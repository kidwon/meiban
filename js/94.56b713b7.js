"use strict";(self["webpackChunkmeiban_app"]=self["webpackChunkmeiban_app"]||[]).push([[94],{6094:(e,t,n)=>{n.d(t,{A:()=>He});n(8706),n(4782),n(2010),n(9868);var a=n(6768),o=n(4232),r={class:"star-chart-container"},i={class:"chart-header"},s={class:"chart-title"},c={class:"chart-controls"},u={class:"chart-wrapper"},l=["width","height","viewBox"],d=["cx","cy","r"],p={class:"zodiac-ring"},h={key:0,class:"house-ring"},g={class:"planet-ring"},v={key:1,class:"aspect-lines"},y=["cx","cy","r"],m={class:"axis-lines"},f=["x1","y1","x2","y2"],x=["x1","y1","x2","y2"],b={class:"tooltip-title"},k={class:"tooltip-position"},M={class:"chart-legend"},L={class:"legend-section"},w={class:"legend-items"},R={class:"planet-name"},C={class:"planet-position"},P={key:0,class:"legend-section"},E={class:"legend-items"},A={class:"aspect-description"},z={class:"aspect-orb"};function D(e,t,n,D,W,N){var H=(0,a.g2)("ZodiacSector"),_=(0,a.g2)("HouseSector"),S=(0,a.g2)("PlanetMarker"),F=(0,a.g2)("AspectLine");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",i,[(0,a.Lk)("h3",s,(0,o.v_)(D.getLocalizedText("starChart.title")),1),(0,a.Lk)("div",c,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=function(){return D.toggleAspects&&D.toggleAspects.apply(D,arguments)}),class:(0,o.C4)([{active:D.showAspects},"control-btn"])},(0,o.v_)(D.showAspects?D.getLocalizedText("starChart.controls.hideAspects"):D.getLocalizedText("starChart.controls.showAspects")),3),(0,a.Lk)("button",{onClick:t[1]||(t[1]=function(){return D.toggleHouses&&D.toggleHouses.apply(D,arguments)}),class:(0,o.C4)([{active:D.showHouses},"control-btn"])},(0,o.v_)(D.showHouses?D.getLocalizedText("starChart.controls.hideHouses"):D.getLocalizedText("starChart.controls.showHouses")),3)])]),(0,a.Lk)("div",u,[((0,a.uX)(),(0,a.CE)("svg",{width:D.chartSize,height:D.chartSize,viewBox:"0 0 ".concat(D.chartSize," ").concat(D.chartSize),class:"star-chart-svg"},[(0,a.Lk)("circle",{cx:D.center,cy:D.center,r:D.settings.outerRadius,class:"chart-background"},null,8,d),(0,a.Lk)("g",p,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(D.chartData.zodiac,(function(e){return(0,a.uX)(),(0,a.Wv)(H,{key:e.name,zodiac:e,center:D.center,"inner-radius":D.settings.zodiacRadius-20,"outer-radius":D.settings.outerRadius},null,8,["zodiac","center","inner-radius","outer-radius"])})),128))]),D.showHouses&&D.chartData.houses.length>0?((0,a.uX)(),(0,a.CE)("g",h,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(D.chartData.houses,(function(e){return(0,a.uX)(),(0,a.Wv)(_,{key:e.number,house:e,center:D.center,"inner-radius":D.settings.houseRadius-20,"outer-radius":D.settings.zodiacRadius-20},null,8,["house","center","inner-radius","outer-radius"])})),128))])):(0,a.Q3)("",!0),(0,a.Lk)("g",g,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(D.chartData.planets,(function(e){return(0,a.uX)(),(0,a.Wv)(S,{key:e.id,planet:e,center:D.center,radius:D.settings.planetRadius,onPlanetHover:D.onPlanetHover},null,8,["planet","center","radius","onPlanetHover"])})),128))]),D.showAspects?((0,a.uX)(),(0,a.CE)("g",v,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(D.chartData.aspects,(function(e,t){return(0,a.uX)(),(0,a.Wv)(F,{key:t,aspect:e,planets:D.chartData.planets,center:D.center,radius:D.settings.innerRadius+30},null,8,["aspect","planets","center","radius"])})),128))])):(0,a.Q3)("",!0),(0,a.Lk)("circle",{cx:D.center,cy:D.center,r:D.settings.innerRadius,class:"chart-center"},null,8,y),(0,a.Lk)("g",m,[(0,a.Lk)("line",{x1:D.center-D.settings.outerRadius,y1:D.center,x2:D.center+D.settings.outerRadius,y2:D.center,class:"axis-line"},null,8,f),(0,a.Lk)("line",{x1:D.center,y1:D.center-D.settings.outerRadius,x2:D.center,y2:D.center+D.settings.outerRadius,class:"axis-line"},null,8,x)])],8,l)),D.hoveredPlanet?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"planet-tooltip",style:(0,o.Tr)(D.tooltipStyle)},[(0,a.Lk)("div",b,(0,o.v_)(D.getLocalizedPlanetName(D.hoveredPlanet.displayName||D.hoveredPlanet.name)),1),(0,a.Lk)("div",k,(0,o.v_)(D.getLocalizedSignName(D.hoveredPlanet.sign))+" "+(0,o.v_)(D.hoveredPlanet.signDegree)+(0,o.v_)(D.getLocalizedText("starChart.tooltip.degree"))+(0,o.v_)(D.hoveredPlanet.signMinute)+(0,o.v_)(D.getLocalizedText("starChart.tooltip.minute")),1)],4)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",M,[(0,a.Lk)("div",L,[(0,a.Lk)("h4",null,(0,o.v_)(D.getLocalizedText("starChart.legends.planets")),1),(0,a.Lk)("div",w,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(D.chartData.planets,(function(e){return(0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"legend-item"},[(0,a.Lk)("span",{class:"planet-symbol",style:(0,o.Tr)({color:e.color})},(0,o.v_)(e.symbol),5),(0,a.Lk)("span",R,(0,o.v_)(D.getLocalizedPlanetName(e.displayName||e.name)),1),(0,a.Lk)("span",C,(0,o.v_)(D.getLocalizedSignName(e.sign))+" "+(0,o.v_)(e.signDegree)+(0,o.v_)(D.getLocalizedText("starChart.tooltip.degree"))+(0,o.v_)(e.signMinute)+(0,o.v_)(D.getLocalizedText("starChart.tooltip.minute")),1)])})),128))])]),D.showAspects&&D.chartData.aspects.length>0?((0,a.uX)(),(0,a.CE)("div",P,[(0,a.Lk)("h4",null,(0,o.v_)(D.getLocalizedText("starChart.legends.majorAspects")),1),(0,a.Lk)("div",E,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(D.chartData.aspects.slice(0,5),(function(e,t){return(0,a.uX)(),(0,a.CE)("div",{key:t,class:"legend-item"},[(0,a.Lk)("span",{class:"aspect-color",style:(0,o.Tr)({backgroundColor:e.color})},null,4),(0,a.Lk)("span",A,(0,o.v_)(D.getLocalizedAspectDescription(e)),1),(0,a.Lk)("span",z,(0,o.v_)(e.orb.toFixed(1))+"°",1)])})),128))])])):(0,a.Q3)("",!0)])])}n(2892);var W=n(144),N=n(3604),H=n(8653),_=(n(6280),n(6918),n(5276),n(2062),n(4114),n(6099),n(8041),[{name:"白羊座",symbol:"♈",startDegree:0,color:"#FF6B6B"},{name:"金牛座",symbol:"♉",startDegree:30,color:"#4ECDC4"},{name:"双子座",symbol:"♊",startDegree:60,color:"#45B7D1"},{name:"巨蟹座",symbol:"♋",startDegree:90,color:"#96CEB4"},{name:"狮子座",symbol:"♌",startDegree:120,color:"#FFEAA7"},{name:"处女座",symbol:"♍",startDegree:150,color:"#DDA0DD"},{name:"天秤座",symbol:"♎",startDegree:180,color:"#98D8C8"},{name:"天蝎座",symbol:"♏",startDegree:210,color:"#F7DC6F"},{name:"射手座",symbol:"♐",startDegree:240,color:"#BB8FCE"},{name:"摩羯座",symbol:"♑",startDegree:270,color:"#85C1E9"},{name:"水瓶座",symbol:"♒",startDegree:300,color:"#F8C471"},{name:"双鱼座",symbol:"♓",startDegree:330,color:"#82E0AA"}]),S={sun:{symbol:"☉",displayName:"太阳",color:"#FFD700"},moon:{symbol:"☽",displayName:"月亮",color:"#C0C0C0"},mercury:{symbol:"☿",displayName:"水星",color:"#87CEEB"},venus:{symbol:"♀",displayName:"金星",color:"#FFC0CB"},mars:{symbol:"♂",displayName:"火星",color:"#FF6347"},jupiter:{symbol:"♃",displayName:"木星",color:"#DAA520"},saturn:{symbol:"♄",displayName:"土星",color:"#2F4F4F"},uranus:{symbol:"♅",displayName:"天王星",color:"#4FD0E3"},neptune:{symbol:"♆",displayName:"海王星",color:"#4169E1"},pluto:{symbol:"♇",displayName:"冥王星",color:"#8B4513"}};function F(e){return(90-e+360)%360}function X(e){var t=["白羊座","金牛座","双子座","巨蟹座","狮子座","处女座","天秤座","天蝎座","射手座","摩羯座","水瓶座","双鱼座"],n=t.indexOf(e.sign);return-1===n?0:30*n+e.degree+e.minute/60}function I(){return _.map((function(e){return(0,H.A)((0,H.A)({},e),{},{svgAngle:F(e.startDegree),endDegree:e.startDegree+30,midDegree:e.startDegree+15})}))}function q(e){for(var t=[],n=1;n<=12;n++){var a=(e+30*(n-1))%360;t.push({number:n,startDegree:a,endDegree:(a+30)%360,midDegree:(a+15)%360,svgAngle:F(a)})}return t}function K(e){var t=[];return e.sun&&t.push((0,H.A)((0,H.A)({id:"sun"},S.sun),{},{degree:e.sun.longitude||X(e.sun),sign:e.sun.sign,signDegree:e.sun.degree,signMinute:e.sun.minute})),e.moon&&t.push((0,H.A)((0,H.A)({id:"moon"},S.moon),{},{degree:e.moon.longitude||X(e.moon),sign:e.moon.sign,signDegree:e.moon.degree,signMinute:e.moon.minute})),e.ascendant&&t.push({id:"ascendant",symbol:"ASC",displayName:"上升",color:"#d35400",degree:e.ascendant.longitude||X(e.ascendant),sign:e.ascendant.sign,signDegree:e.ascendant.degree,signMinute:e.ascendant.minute,isAngle:!0}),t.map((function(e){return(0,H.A)((0,H.A)({},e),{},{svgAngle:F(e.degree-30)})}))}function T(e){for(var t=[],n=[{angle:0,aspectName:"合相",orb:8,color:"#FF6B6B"},{angle:60,aspectName:"六分相",orb:4,color:"#4ECDC4"},{angle:90,aspectName:"四分相",orb:6,color:"#FFE66D"},{angle:120,aspectName:"三分相",orb:6,color:"#4CAF50"},{angle:180,aspectName:"对分相",orb:8,color:"#9C27B0"}],a=0;a<e.length;a++)for(var o=a+1;o<e.length;o++){var r,i=e[a],s=e[o],c=Math.abs(i.degree-s.degree),u=Math.min(c,360-c),l=(0,N.A)(n);try{for(l.s();!(r=l.n()).done;){var d=r.value;if(Math.abs(u-d.angle)<=d.orb){t.push({planet1:i.id,planet2:s.id,aspect:d.aspectName,angle:d.angle,orb:Math.abs(u-d.angle),color:d.color,isApplying:!0});break}}}catch(p){l.e(p)}finally{l.f()}}return t}function j(){return{zodiac:I(),houses:[],planets:[(0,H.A)((0,H.A)({id:"sun"},S.sun),{},{degree:352.8,sign:"双鱼座",signDegree:13,signMinute:49,svgAngle:F(352.8)}),{id:"ascendant",symbol:"ASC",displayName:"上升",color:"#d35400",degree:64.2,sign:"双子座",signDegree:4,signMinute:11,svgAngle:F(64.2),isAngle:!0}],aspects:[],settings:{centerX:250,centerY:250,outerRadius:220,zodiacRadius:200,houseRadius:180,planetRadius:160,innerRadius:50}}}function B(e){try{if(!e||!e.astrologyPositions)throw new Error("缺少占星位置数据");var t=e.astrologyPositions,n=t.ascendant.longitude||X(t.ascendant),a=I(),o=q(n),r=K(t),i=T(r);return{zodiac:a,houses:o,planets:r,aspects:i,settings:{centerX:250,centerY:250,outerRadius:220,zodiacRadius:200,houseRadius:180,planetRadius:160,innerRadius:50}}}catch(s){return console.error("星盘数据生成失败:",s),j()}}var O=["d","fill","fill-opacity","stroke","stroke-width"],Q=["x1","y1","x2","y2","stroke"],Z=["x","y","fill","font-size"],U=["x","y","fill"];function V(e,t,n,r,i,s){return(0,a.uX)(),(0,a.CE)("g",{class:"zodiac-sector",onMouseenter:t[0]||(t[0]=function(){return r.onHover&&r.onHover.apply(r,arguments)}),onMouseleave:t[1]||(t[1]=function(){return r.onLeave&&r.onLeave.apply(r,arguments)})},[(0,a.Lk)("path",{d:r.sectorPath,fill:n.zodiac.color,"fill-opacity":r.isHovered?.3:.15,stroke:n.zodiac.color,"stroke-width":r.isHovered?2:1,class:"sector-background"},null,8,O),(0,a.Lk)("line",{x1:r.innerPoint.x,y1:r.innerPoint.y,x2:r.outerPoint.x,y2:r.outerPoint.y,stroke:n.zodiac.color,"stroke-width":"1",opacity:"0.5",class:"sector-divider"},null,8,Q),(0,a.Lk)("text",{x:r.symbolPosition.x,y:r.symbolPosition.y,fill:n.zodiac.color,"font-size":r.symbolSize,"font-weight":"bold","text-anchor":"middle","dominant-baseline":"middle",class:"zodiac-symbol"},(0,o.v_)(n.zodiac.symbol),9,Z),r.isHovered?((0,a.uX)(),(0,a.CE)("text",{key:0,x:r.namePosition.x,y:r.namePosition.y,fill:n.zodiac.color,"font-size":"11","font-weight":"500","text-anchor":"middle","dominant-baseline":"middle",class:"zodiac-name"},(0,o.v_)(r.localizedZodiacName),9,U)):(0,a.Q3)("",!0)],32)}n(8598);var Y=n(6310);const G={name:"ZodiacSector",props:{zodiac:{type:Object,required:!0},center:{type:Number,required:!0},innerRadius:{type:Number,required:!0},outerRadius:{type:Number,required:!0}},setup:function(e){var t=(0,W.KR)(!1),n=(0,W.KR)((0,Y.UK)()),o={Aries:"aries",Taurus:"taurus",Gemini:"gemini",Cancer:"cancer",Leo:"leo",Virgo:"virgo",Libra:"libra",Scorpio:"scorpio",Sagittarius:"sagittarius",Capricorn:"capricorn",Aquarius:"aquarius",Pisces:"pisces",白羊座:"aries",金牛座:"taurus",双子座:"gemini",巨蟹座:"cancer",狮子座:"leo",处女座:"virgo",天秤座:"libra",天蝎座:"scorpio",射手座:"sagittarius",摩羯座:"capricorn",水瓶座:"aquarius",双鱼座:"pisces"},r=(0,a.EW)((function(){var t=o[e.zodiac.name];if(t){var a="starChart.zodiac.".concat(t),r=(0,Y.sC)(a,n.value);return r!==a?r:e.zodiac.name}return e.zodiac.name})),i=function(e){n.value=e.detail.language};"undefined"!==typeof window&&window.addEventListener("languageChanged",i);var s=(0,a.EW)((function(){var t=e.zodiac.svgAngle,n=t+30,a=t*Math.PI/180,o=n*Math.PI/180,r=e.center+e.innerRadius*Math.cos(a),i=e.center+e.innerRadius*Math.sin(a),s=e.center+e.outerRadius*Math.cos(a),c=e.center+e.outerRadius*Math.sin(a),u=e.center+e.outerRadius*Math.cos(o),l=e.center+e.outerRadius*Math.sin(o),d=e.center+e.innerRadius*Math.cos(o),p=e.center+e.innerRadius*Math.sin(o),h=n-t<=180?"0":"1";return["M ".concat(r," ").concat(i),"L ".concat(s," ").concat(c),"A ".concat(e.outerRadius," ").concat(e.outerRadius," 0 ").concat(h," 1 ").concat(u," ").concat(l),"L ".concat(d," ").concat(p),"A ".concat(e.innerRadius," ").concat(e.innerRadius," 0 ").concat(h," 0 ").concat(r," ").concat(i),"Z"].join(" ")})),c=(0,a.EW)((function(){var t=e.zodiac.svgAngle*Math.PI/180;return{x:e.center+e.innerRadius*Math.cos(t),y:e.center+e.innerRadius*Math.sin(t)}})),u=(0,a.EW)((function(){var t=e.zodiac.svgAngle*Math.PI/180;return{x:e.center+e.outerRadius*Math.cos(t),y:e.center+e.outerRadius*Math.sin(t)}})),l=(0,a.EW)((function(){var t=(e.zodiac.svgAngle+15)*Math.PI/180,n=e.outerRadius-10;return{x:e.center+n*Math.cos(t),y:e.center+n*Math.sin(t)}})),d=(0,a.EW)((function(){var t=(e.zodiac.svgAngle+15)*Math.PI/180,n=e.innerRadius+15;return{x:e.center+n*Math.cos(t),y:e.center+n*Math.sin(t)}})),p=(0,a.EW)((function(){var t=Math.min(e.outerRadius-e.innerRadius,20);return Math.max(.8*t,12)})),h=function(){t.value=!0},g=function(){t.value=!1};return(0,a.hi)((function(){"undefined"!==typeof window&&window.removeEventListener("languageChanged",i)})),{isHovered:t,sectorPath:s,innerPoint:c,outerPoint:u,symbolPosition:l,namePosition:d,symbolSize:p,localizedZodiacName:r,onHover:h,onLeave:g}}};var J=n(1241);const $=(0,J.A)(G,[["render",V],["__scopeId","data-v-637b1616"]]),ee=$;var te=["d"],ne=["x1","y1","x2","y2","stroke-width","opacity"],ae=["x","y","font-size","opacity"],oe={key:0,class:"house-tooltip"},re=["x","y","width"],ie=["x","y"];function se(e,t,n,r,i,s){return(0,a.uX)(),(0,a.CE)("g",{class:"house-sector",onMouseenter:t[0]||(t[0]=function(){return r.onHover&&r.onHover.apply(r,arguments)}),onMouseleave:t[1]||(t[1]=function(){return r.onLeave&&r.onLeave.apply(r,arguments)})},[(0,a.Lk)("path",{d:r.sectorPath,fill:"transparent",stroke:"none",class:"house-background"},null,8,te),(0,a.Lk)("line",{x1:r.innerPoint.x,y1:r.innerPoint.y,x2:r.outerPoint.x,y2:r.outerPoint.y,stroke:"#6c757d","stroke-width":r.isHovered?2:1,opacity:r.isHovered?.8:.4,"stroke-dasharray":"2,2",class:"house-divider"},null,8,ne),(0,a.Lk)("text",{x:r.numberPosition.x,y:r.numberPosition.y,fill:"#495057","font-size":r.numberSize,"font-weight":"600","text-anchor":"middle","dominant-baseline":"middle",opacity:r.isHovered?1:.7,class:"house-number"},(0,o.v_)(n.house.number),9,ae),r.isHovered?((0,a.uX)(),(0,a.CE)("g",oe,[(0,a.Lk)("rect",{x:r.tooltipPosition.x-r.tooltipWidth/2,y:r.tooltipPosition.y-10,width:r.tooltipWidth,height:"20",fill:"rgba(0,0,0,0.8)",rx:"3",class:"tooltip-background"},null,8,re),(0,a.Lk)("text",{x:r.tooltipPosition.x,y:r.tooltipPosition.y,fill:"white","font-size":"10","font-weight":"500","text-anchor":"middle","dominant-baseline":"middle",class:"tooltip-text"},(0,o.v_)(r.houseDescription),9,ie)])):(0,a.Q3)("",!0)],32)}const ce={name:"HouseSector",props:{house:{type:Object,required:!0},center:{type:Number,required:!0},innerRadius:{type:Number,required:!0},outerRadius:{type:Number,required:!0}},setup:function(e){var t=(0,W.KR)(!1),n=(0,W.KR)((0,Y.UK)()),o=function(e){var t="starChart.houses.descriptions.".concat(e),a=(0,Y.sC)(t,n.value);return a!==t?a:"第".concat(e,"宫")},r=function(e){n.value=e.detail.language};"undefined"!==typeof window&&window.addEventListener("languageChanged",r);var i=(0,a.EW)((function(){var t=e.house.svgAngle,n=t+30,a=t*Math.PI/180,o=n*Math.PI/180,r=e.center+e.innerRadius*Math.cos(a),i=e.center+e.innerRadius*Math.sin(a),s=e.center+e.outerRadius*Math.cos(a),c=e.center+e.outerRadius*Math.sin(a),u=e.center+e.outerRadius*Math.cos(o),l=e.center+e.outerRadius*Math.sin(o),d=e.center+e.innerRadius*Math.cos(o),p=e.center+e.innerRadius*Math.sin(o),h=n-t<=180?"0":"1";return["M ".concat(r," ").concat(i),"L ".concat(s," ").concat(c),"A ".concat(e.outerRadius," ").concat(e.outerRadius," 0 ").concat(h," 1 ").concat(u," ").concat(l),"L ".concat(d," ").concat(p),"A ".concat(e.innerRadius," ").concat(e.innerRadius," 0 ").concat(h," 0 ").concat(r," ").concat(i),"Z"].join(" ")})),s=(0,a.EW)((function(){var t=e.house.svgAngle*Math.PI/180;return{x:e.center+e.innerRadius*Math.cos(t),y:e.center+e.innerRadius*Math.sin(t)}})),c=(0,a.EW)((function(){var t=e.house.svgAngle*Math.PI/180;return{x:e.center+e.outerRadius*Math.cos(t),y:e.center+e.outerRadius*Math.sin(t)}})),u=(0,a.EW)((function(){var t=(e.house.svgAngle+15)*Math.PI/180,n=(e.innerRadius+e.outerRadius)/2;return{x:e.center+n*Math.cos(t),y:e.center+n*Math.sin(t)}})),l=(0,a.EW)((function(){var t=(e.house.svgAngle+15)*Math.PI/180,n=e.outerRadius+20;return{x:e.center+n*Math.cos(t),y:e.center+n*Math.sin(t)}})),d=(0,a.EW)((function(){return o(e.house.number)})),p=(0,a.EW)((function(){return 8*d.value.length+16})),h=(0,a.EW)((function(){var t=Math.min(e.outerRadius-e.innerRadius,16);return Math.max(.6*t,10)})),g=function(){t.value=!0},v=function(){t.value=!1};return(0,a.hi)((function(){"undefined"!==typeof window&&window.removeEventListener("languageChanged",r)})),{isHovered:t,sectorPath:i,innerPoint:s,outerPoint:c,numberPosition:u,tooltipPosition:l,houseDescription:d,tooltipWidth:p,numberSize:h,onHover:g,onLeave:v}}},ue=(0,J.A)(ce,[["render",se],["__scopeId","data-v-9236e864"]]),le=ue;var de=["transform"],pe=["r","fill","fill-opacity","stroke","stroke-width"],he=["x2","y2","stroke"],ge=["fill","font-size"],ve={key:0,class:"degree-label"},ye=["x","y","width","fill"],me=["y"];function fe(e,t,n,r,i,s){return(0,a.uX)(),(0,a.CE)("g",{class:"planet-marker",onMouseenter:t[0]||(t[0]=function(){return r.onHover&&r.onHover.apply(r,arguments)}),onMouseleave:t[1]||(t[1]=function(){return r.onLeave&&r.onLeave.apply(r,arguments)}),transform:"translate(".concat(r.position.x,", ").concat(r.position.y,")")},[(0,a.Lk)("circle",{r:r.circleRadius,fill:n.planet.color,"fill-opacity":r.isHovered?.3:.1,stroke:n.planet.color,"stroke-width":r.isHovered?2:1,class:"planet-background"},null,8,pe),(0,a.Lk)("line",{x1:"0",y1:"0",x2:r.lineEnd.x,y2:r.lineEnd.y,stroke:n.planet.color,"stroke-width":"1",opacity:"0.6",class:"position-line"},null,8,he),(0,a.Lk)("text",{x:"0",y:"0",fill:n.planet.color,"font-size":r.symbolSize,"font-weight":"bold","text-anchor":"middle","dominant-baseline":"middle",class:"planet-symbol"},(0,o.v_)(n.planet.symbol),9,ge),r.isHovered?((0,a.uX)(),(0,a.CE)("g",ve,[(0,a.Lk)("rect",{x:-r.labelWidth/2,y:r.circleRadius+5,width:r.labelWidth,height:"16",fill:n.planet.color,"fill-opacity":"0.9",rx:"3",class:"label-background"},null,8,ye),(0,a.Lk)("text",{x:"0",y:r.circleRadius+15,fill:"white","font-size":"10","font-weight":"500","text-anchor":"middle","dominant-baseline":"middle",class:"degree-text"},(0,o.v_)(r.degreeLabel),9,me)])):(0,a.Q3)("",!0)],40,de)}const xe={name:"PlanetMarker",props:{planet:{type:Object,required:!0},center:{type:Number,required:!0},radius:{type:Number,required:!0}},emits:["planet-hover","planet-leave"],setup:function(e,t){var n=t.emit,o=(0,W.KR)(!1),r=(0,a.EW)((function(){var t=e.planet.svgAngle*Math.PI/180;return{x:e.center+e.radius*Math.cos(t),y:e.center+e.radius*Math.sin(t)}})),i=(0,a.EW)((function(){var t=e.planet.svgAngle*Math.PI/180,n=.3*e.radius;return{x:-n*Math.cos(t),y:-n*Math.sin(t)}})),s=(0,a.EW)((function(){return e.planet.isAngle?12:10})),c=(0,a.EW)((function(){return e.planet.isAngle?10:12})),u=(0,a.EW)((function(){return"".concat(e.planet.signDegree,"°").concat(e.planet.signMinute,"'")})),l=(0,a.EW)((function(){return 6*u.value.length+8})),d=function(t){o.value=!0,n("planet-hover",e.planet,t)},p=function(){o.value=!1,n("planet-leave")};return{isHovered:o,position:r,lineEnd:i,circleRadius:s,symbolSize:c,degreeLabel:u,labelWidth:l,onHover:d,onLeave:p}}},be=(0,J.A)(xe,[["render",fe],["__scopeId","data-v-a4cbb2fc"]]),ke=be;var Me=["x1","y1","x2","y2","stroke","stroke-width","opacity","stroke-dasharray"],Le=["cx","cy","fill"],we={key:1,class:"aspect-tooltip"},Re=["x","y","width"],Ce=["x","y"];function Pe(e,t,n,r,i,s){return(0,a.uX)(),(0,a.CE)("g",{class:"aspect-line",onMouseenter:t[0]||(t[0]=function(){return r.onHover&&r.onHover.apply(r,arguments)}),onMouseleave:t[1]||(t[1]=function(){return r.onLeave&&r.onLeave.apply(r,arguments)})},[(0,a.Lk)("line",{x1:r.startPoint.x,y1:r.startPoint.y,x2:r.endPoint.x,y2:r.endPoint.y,stroke:n.aspect.color,"stroke-width":r.lineWidth,opacity:r.lineOpacity,"stroke-dasharray":r.dashPattern,class:"aspect-connection"},null,8,Me),r.isHovered?((0,a.uX)(),(0,a.CE)("circle",{key:0,cx:r.midPoint.x,cy:r.midPoint.y,r:3,fill:n.aspect.color,class:"aspect-marker"},null,8,Le)):(0,a.Q3)("",!0),r.isHovered?((0,a.uX)(),(0,a.CE)("g",we,[(0,a.Lk)("rect",{x:r.tooltipPosition.x-r.tooltipWidth/2,y:r.tooltipPosition.y-12,width:r.tooltipWidth,height:"24",fill:"rgba(0,0,0,0.9)",rx:"4",class:"tooltip-background"},null,8,Re),(0,a.Lk)("text",{x:r.tooltipPosition.x,y:r.tooltipPosition.y,fill:"white","font-size":"10","font-weight":"500","text-anchor":"middle","dominant-baseline":"middle",class:"tooltip-text"},(0,o.v_)(r.aspectDescription),9,Ce)])):(0,a.Q3)("",!0)],32)}n(113),n(8111),n(116);var Ee=n(272);const Ae={name:"AspectLine",mixins:[Ee.A],props:{aspect:{type:Object,required:!0},planets:{type:Array,required:!0},center:{type:Number,required:!0},radius:{type:Number,required:!0}},setup:function(e){var t=(0,W.KR)(!1),n=(0,a.EW)((function(){return e.planets.find((function(t){return t.name===e.aspect.planet1}))})),o=(0,a.EW)((function(){return e.planets.find((function(t){return t.name===e.aspect.planet2}))})),r=(0,a.EW)((function(){if(!n.value)return{x:0,y:0};var t=n.value.svgAngle*Math.PI/180;return{x:e.center+e.radius*Math.cos(t),y:e.center+e.radius*Math.sin(t)}})),i=(0,a.EW)((function(){if(!o.value)return{x:0,y:0};var t=o.value.svgAngle*Math.PI/180;return{x:e.center+e.radius*Math.cos(t),y:e.center+e.radius*Math.sin(t)}})),s=(0,a.EW)((function(){return{x:(r.value.x+i.value.x)/2,y:(r.value.y+i.value.y)/2}})),c=(0,a.EW)((function(){var t=s.value.x,n=s.value.y-20,a=.9*e.center,o=Math.sqrt(Math.pow(t-e.center,2)+Math.pow(n-e.center,2));if(o>a){var r=Math.atan2(n-e.center,t-e.center);return{x:e.center+a*Math.cos(r),y:e.center+a*Math.sin(r)}}return{x:t,y:n}})),u=(0,a.EW)((function(){var t={Conjunction:{width:2,opacity:.8,dash:"none"},Sextile:{width:1.5,opacity:.6,dash:"3,2"},Square:{width:2,opacity:.7,dash:"5,3"},Trine:{width:1.5,opacity:.6,dash:"none"},Opposition:{width:2,opacity:.8,dash:"2,2"},合相:{width:2,opacity:.8,dash:"none"},六分相:{width:1.5,opacity:.6,dash:"3,2"},四分相:{width:2,opacity:.7,dash:"5,3"},三分相:{width:1.5,opacity:.6,dash:"none"},对分相:{width:2,opacity:.8,dash:"2,2"}};return t[e.aspect.aspect]||{width:1,opacity:.5,dash:"none"}})),l=(0,a.EW)((function(){return t.value?u.value.width+1:u.value.width})),d=(0,a.EW)((function(){return t.value?u.value.opacity+.2:u.value.opacity})),p=(0,a.EW)((function(){return u.value.dash})),h=(0,a.EW)((function(){var t,a,r=(null===(t=n.value)||void 0===t?void 0:t.name)||e.aspect.planet1,i=(null===(a=o.value)||void 0===a?void 0:a.name)||e.aspect.planet2,s="".concat(e.aspect.orb.toFixed(1),"°");return"".concat(r," ").concat(e.aspect.aspect," ").concat(i," (").concat(s,")")})),g=(0,a.EW)((function(){return Math.max(6*h.value.length,120)})),v=function(){t.value=!0},y=function(){t.value=!1};return{isHovered:t,startPoint:r,endPoint:i,midPoint:s,tooltipPosition:c,lineWidth:l,lineOpacity:d,dashPattern:p,aspectDescription:h,tooltipWidth:g,onHover:v,onLeave:y}}},ze=(0,J.A)(Ae,[["render",Pe],["__scopeId","data-v-13234056"]]),De=ze,We={name:"StarChart",components:{ZodiacSector:ee,HouseSector:le,PlanetMarker:ke,AspectLine:De},props:{calculationResults:{type:Object,required:!0},size:{type:Number,default:500}},setup:function(e){var t=(0,W.KR)(!1),n=(0,W.KR)(!0),o=(0,W.KR)(null),r=(0,W.KR)({x:0,y:0}),i=(0,W.KR)((0,Y.UK)()),s={Sun:"sun",Moon:"moon",Mercury:"mercury",Venus:"venus",Mars:"mars",Jupiter:"jupiter",Saturn:"saturn",Uranus:"uranus",Neptune:"neptune",Pluto:"pluto","North Node":"north_node","South Node":"south_node",Ascendant:"ascendant",Midheaven:"midheaven",Chiron:"chiron",太阳:"sun",月亮:"moon",水星:"mercury",金星:"venus",火星:"mars",木星:"jupiter",土星:"saturn",天王星:"uranus",海王星:"neptune",冥王星:"pluto",北交点:"north_node",南交点:"south_node",上升点:"ascendant",天顶:"midheaven",凯龙星:"chiron"},c={Conjunction:"conjunction",Sextile:"sextile",Square:"square",Trine:"trine",Opposition:"opposition",合相:"conjunction",六分相:"sextile",四分相:"square",三分相:"trine",对分相:"opposition"},u=function(e){var t=s[e];if(t){var n="starChart.planets.".concat(t),a=(0,Y.sC)(n,i.value);return a!==n?a:e}return e},l={Aries:"aries",Taurus:"taurus",Gemini:"gemini",Cancer:"cancer",Leo:"leo",Virgo:"virgo",Libra:"libra",Scorpio:"scorpio",Sagittarius:"sagittarius",Capricorn:"capricorn",Aquarius:"aquarius",Pisces:"pisces",白羊座:"aries",金牛座:"taurus",双子座:"gemini",巨蟹座:"cancer",狮子座:"leo",处女座:"virgo",天秤座:"libra",天蝎座:"scorpio",射手座:"sagittarius",摩羯座:"capricorn",水瓶座:"aquarius",双鱼座:"pisces"},d=function(e){var t=l[e];if(t){var n="starChart.zodiac.".concat(t),a=(0,Y.sC)(n,i.value);return a!==n?a:e}return e},p=function(e){var t=c[e];if(t){var n="starChart.aspects.".concat(t),a=(0,Y.sC)(n,i.value);return a!==n?a:e}return e},h=function(e){var t=u(e.planet1),n=p(e.aspect),a=u(e.planet2);return"".concat(t," ").concat(n," ").concat(a)},g=function(e){var t=(0,Y.sC)(e,i.value);return t!==e?t:e},v=function(e){i.value=e.detail.language};"undefined"!==typeof window&&window.addEventListener("languageChanged",v);var y=(0,a.EW)((function(){return e.size})),m=(0,a.EW)((function(){return y.value/2})),f=(0,a.EW)((function(){try{return B(e.calculationResults)}catch(t){return console.error("生成星盘数据失败:",t),R()}})),x=(0,a.EW)((function(){return{outerRadius:.44*y.value,zodiacRadius:.4*y.value,houseRadius:.36*y.value,planetRadius:.32*y.value,innerRadius:.1*y.value}})),b=(0,a.EW)((function(){return o.value?{left:"".concat(r.value.x+10,"px"),top:"".concat(r.value.y-30,"px"),display:"block"}:{}})),k=function(){t.value=!t.value},M=function(){n.value=!n.value},L=function(e,t){if(o.value=e,t){var n=t.target.closest("svg").getBoundingClientRect();r.value={x:t.clientX-n.left,y:t.clientY-n.top}}},w=function(){o.value=null},R=function(){return{zodiac:[],houses:[],planets:[],aspects:[],settings:x.value}};return(0,a.sV)((function(){console.log("星盘组件已挂载，数据:",f.value)})),(0,a.hi)((function(){"undefined"!==typeof window&&window.removeEventListener("languageChanged",v)})),{showAspects:t,showHouses:n,hoveredPlanet:o,chartSize:y,center:m,chartData:f,settings:x,tooltipStyle:b,toggleAspects:k,toggleHouses:M,onPlanetHover:L,onPlanetLeave:w,getLocalizedAspectDescription:h,getLocalizedPlanetName:u,getLocalizedSignName:d,getLocalizedText:g}}},Ne=(0,J.A)(We,[["render",D],["__scopeId","data-v-4e752c24"]]),He=Ne},9868:(e,t,n)=>{var a=n(6518),o=n(9504),r=n(1291),i=n(1240),s=n(2333),c=n(9039),u=RangeError,l=String,d=Math.floor,p=o(s),h=o("".slice),g=o(1..toFixed),v=function(e,t,n){return 0===t?n:t%2===1?v(e,t-1,n*e):v(e*e,t/2,n)},y=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},m=function(e,t,n){var a=-1,o=n;while(++a<6)o+=t*e[a],e[a]=o%1e7,o=d(o/1e7)},f=function(e,t){var n=6,a=0;while(--n>=0)a+=e[n],e[n]=d(a/t),a=a%t*1e7},x=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var a=l(e[t]);n=""===n?a:n+p("0",7-a.length)+a}return n},b=c((function(){return"0.000"!==g(8e-5,3)||"1"!==g(.9,0)||"1.25"!==g(1.255,2)||"1000000000000000128"!==g(0xde0b6b3a7640080,0)}))||!c((function(){g({})}));a({target:"Number",proto:!0,forced:b},{toFixed:function(e){var t,n,a,o,s=i(this),c=r(e),d=[0,0,0,0,0,0],g="",b="0";if(c<0||c>20)throw new u("Incorrect fraction digits");if(s!==s)return"NaN";if(s<=-1e21||s>=1e21)return l(s);if(s<0&&(g="-",s=-s),s>1e-21)if(t=y(s*v(2,69,1))-69,n=t<0?s*v(2,-t,1):s/v(2,t,1),n*=4503599627370496,t=52-t,t>0){m(d,0,n),a=c;while(a>=7)m(d,1e7,0),a-=7;m(d,v(10,a,1),0),a=t-1;while(a>=23)f(d,1<<23),a-=23;f(d,1<<a),m(d,1,1),f(d,2),b=x(d)}else m(d,0,n),m(d,1<<-t,0),b=x(d)+p("0",c);return c>0?(o=b.length,b=g+(o<=c?"0."+p("0",c-o)+b:h(b,0,o-c)+"."+h(b,o-c))):b=g+b,b}})}}]);
//# sourceMappingURL=94.56b713b7.js.map