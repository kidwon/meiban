"use strict";(self["webpackChunkmeiban_app"]=self["webpackChunkmeiban_app"]||[]).push([[949],{2945:(r,e,t)=>{var a=t(46518),n=t(22195),o=t(97751),c=t(79504),i=t(69565),s=t(79039),l=t(655),u=t(22812),h=t(92804).c2i,g=/[^\d+/a-z]/i,m=/[\t\n\f\r ]+/g,R=/[=]{1,2}$/,E=o("atob"),d=String.fromCharCode,f=c("".charAt),y=c("".replace),p=c(g.exec),v=!!E&&!s((function(){return"hi"!==E("aGk=")})),D=v&&s((function(){return""!==E(" ")})),b=v&&!s((function(){E("a")})),w=v&&!s((function(){E()})),_=v&&1!==E.length,A=!v||D||b||w||_;a({global:!0,bind:!0,enumerable:!0,forced:A},{atob:function(r){if(u(arguments.length,1),v&&!D&&!b)return i(E,n,r);var e,t,a,c=y(l(r),m,""),s="",w=0,_=0;if(c.length%4===0&&(c=y(c,R,"")),e=c.length,e%4===1||p(g,c))throw new(o("DOMException"))("The string is not correctly encoded","InvalidCharacterError");while(w<e)t=f(c,w++),a=_%4?64*a+h[t]:h[t],_++%4&&(s+=d(255&a>>(-2*_&6)));return s}})},24949:(r,e,t)=>{t.r(e),t.d(e,{decodeDataFromUrl:()=>s,encodeDataForUrl:()=>i,generateShareContent:()=>R,generateShareUrl:()=>u,generateShortUrl:()=>d,isUrlLengthReasonable:()=>E,restoreDataFromUrl:()=>g,validateShareData:()=>m});var a=t(14048),n=t(30388),o=t(54119),c=(t(16280),t(76918),t(28706),t(34782),t(59089),t(60739),t(23288),t(62010),t(33110),t(79432),t(26099),t(27495),t(38781),t(47764),t(25440),t(2945),t(42207),t(62953),t(55815),t(64979),t(79739),t(48408),t(14603),t(47566),t(98721),"1.0");function i(r){try{var e={v:c,t:Date.now(),u:{n:r.userData.name,d:r.userData.birthdate,h:r.userData.birthHour,m:r.userData.birthMinute,p:r.userData.birthplace,g:r.userData.gender,f:r.userData.fullBirthDateTime},r:{e:r.calculationResults.eightCharacters?{y:[r.calculationResults.eightCharacters.year.heavenlyStem,r.calculationResults.eightCharacters.year.earthlyBranch],mo:[r.calculationResults.eightCharacters.month.heavenlyStem,r.calculationResults.eightCharacters.month.earthlyBranch],d:[r.calculationResults.eightCharacters.day.heavenlyStem,r.calculationResults.eightCharacters.day.earthlyBranch],h:[r.calculationResults.eightCharacters.hour.heavenlyStem,r.calculationResults.eightCharacters.hour.earthlyBranch]}:null,el:r.calculationResults.elements||[],as:r.calculationResults.astrologyPositions?{asc:[r.calculationResults.astrologyPositions.ascendant.sign,r.calculationResults.astrologyPositions.ascendant.degree],sun:[r.calculationResults.astrologyPositions.sun.sign,r.calculationResults.astrologyPositions.sun.degree],moon:[r.calculationResults.astrologyPositions.moon.sign,r.calculationResults.astrologyPositions.moon.degree]}:null,f:r.calculationResults.fortune?{o:r.calculationResults.fortune.overview,c:r.calculationResults.fortune.career,w:r.calculationResults.fortune.wealth,l:r.calculationResults.fortune.love,h:r.calculationResults.fortune.health}:null},a:r.analysisType},t=JSON.stringify(e),a=btoa(encodeURIComponent(t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return a}catch(n){throw console.error("数据编码失败:",n),new Error("数据编码失败")}}function s(r){try{var e=r.replace(/-/g,"+").replace(/_/g,"/");while(e.length%4)e+="=";var t=decodeURIComponent(atob(e)),a=JSON.parse(t),n={version:a.v,timestamp:a.t,userData:{name:a.u.n,birthdate:a.u.d,birthHour:a.u.h,birthMinute:a.u.m,birthplace:a.u.p,gender:a.u.g,fullBirthDateTime:a.u.f},calculationResults:l(a.r),analysisType:a.a};return n.version&&n.version===c||console.warn("数据版本不匹配，可能存在兼容性问题"),n}catch(o){throw console.error("数据解码失败:",o),new Error("数据解码失败，链接可能已损坏")}}function l(r){if(!r)return null;var e={};return r.e&&(e.eightCharacters={year:{heavenlyStem:r.e.y[0],earthlyBranch:r.e.y[1]},month:{heavenlyStem:r.e.mo[0],earthlyBranch:r.e.mo[1]},day:{heavenlyStem:r.e.d[0],earthlyBranch:r.e.d[1]},hour:{heavenlyStem:r.e.h[0],earthlyBranch:r.e.h[1]}}),r.el&&(e.elements=r.el),r.as&&(e.astrologyPositions={ascendant:{sign:r.as.asc[0],degree:r.as.asc[1],minute:0},sun:{sign:r.as.sun[0],degree:r.as.sun[1],minute:0},moon:{sign:r.as.moon[0],degree:r.as.moon[1],minute:0}}),r.f&&(e.fortune={overview:r.f.o,career:r.f.c,wealth:r.f.w,love:r.f.l,health:r.f.h}),e}function u(r,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"astrology";try{var a={userData:{name:r.name,birthdate:r.birthdate,birthHour:r.birthHour,birthMinute:r.birthMinute,birthplace:r.birthplace,gender:r.gender,fullBirthDateTime:r.fullBirthDateTime},calculationResults:e,analysisType:t,shareId:h()},n=i(a),o=window.location.origin,c="bazi"===t?"bazi-results":"astrology-results";return"".concat(o,"/#/").concat(c,"/shared?data=").concat(n)}catch(s){throw console.error("生成分享链接失败:",s),new Error("生成分享链接失败")}}function h(){return Date.now().toString(36)+Math.random().toString(36).slice(2)}function g(r){try{var e=new URLSearchParams(r),t=e.get("data");return t?s(t):null}catch(a){return console.error("从URL恢复数据失败:",a),null}}function m(r){if(!r||"object"!==(0,o.A)(r))return!1;var e=r.userData,t=r.calculationResults;return!!(e&&e.name&&e.birthdate&&null!==e.birthHour&&null!==e.birthMinute&&e.birthplace&&e.gender)&&!!t}function R(r,e,t){var a=new Date(r.fullBirthDateTime),n=a.getFullYear(),o=a.getMonth()+1,c=a.getDate();if("bazi"===t){var i=e.eightCharacters;return{title:"".concat(r.name,"的生辰八字分析"),desc:"".concat(n,"年").concat(o,"月").concat(c,"日生 | ").concat(i.year.heavenlyStem).concat(i.year.earthlyBranch,"年 ").concat(i.month.heavenlyStem).concat(i.month.earthlyBranch,"月 | 查看详细命盘分析"),imgUrl:"".concat(window.location.origin,"/images/bazi-share.jpg")}}var s=e.astrologyPositions;return{title:"".concat(r.name,"的星盘分析"),desc:"".concat(n,"年").concat(o,"月").concat(c,"日生 | 上升").concat(s.ascendant.sign," 太阳").concat(s.sun.sign," | 查看详细占星分析"),imgUrl:"".concat(window.location.origin,"/images/astrology-share.jpg")}}function E(r){return r.length<1e3}function d(r){return f.apply(this,arguments)}function f(){return f=(0,n.A)((0,a.A)().mark((function r(e){return(0,a.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.warn("URL过长，建议集成短链接服务"),r.abrupt("return",e);case 2:case"end":return r.stop()}}),r)}))),f.apply(this,arguments)}},42207:(r,e,t)=>{var a=t(46518),n=t(22195),o=t(97751),c=t(79504),i=t(69565),s=t(79039),l=t(655),u=t(22812),h=t(92804).i2c,g=o("btoa"),m=c("".charAt),R=c("".charCodeAt),E=!!g&&!s((function(){return"aGk="!==g("hi")})),d=E&&!s((function(){g()})),f=E&&s((function(){return"bnVsbA=="!==g(null)})),y=E&&1!==g.length;a({global:!0,bind:!0,enumerable:!0,forced:!E||d||f||y},{btoa:function(r){if(u(arguments.length,1),E)return i(g,n,l(r));var e,t,a=l(r),c="",s=0,d=h;while(m(a,s)||(d="=",s%1)){if(t=R(a,s+=3/4),t>255)throw new(o("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");e=e<<8|t,c+=m(d,63&e>>8-s%1*8)}return c}})},55002:r=>{r.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},55815:(r,e,t)=>{var a=t(46518),n=t(97751),o=t(89429),c=t(79039),i=t(2360),s=t(6980),l=t(24913).f,u=t(36840),h=t(62106),g=t(39297),m=t(90679),R=t(28551),E=t(77536),d=t(32603),f=t(55002),y=t(38574),p=t(91181),v=t(43724),D=t(96395),b="DOMException",w="DATA_CLONE_ERR",_=n("Error"),A=n(b)||function(){try{var r=n("MessageChannel")||o("worker_threads").MessageChannel;(new r).port1.postMessage(new WeakMap)}catch(e){if(e.name===w&&25===e.code)return e.constructor}}(),S=A&&A.prototype,T=_.prototype,C=p.set,I=p.getterFor(b),O="stack"in new _(b),M=function(r){return g(f,r)&&f[r].m?f[r].c:0},N=function(){m(this,U);var r=arguments.length,e=d(r<1?void 0:arguments[0]),t=d(r<2?void 0:arguments[1],"Error"),a=M(t);if(C(this,{type:b,name:t,message:e,code:a}),v||(this.name=t,this.message=e,this.code=a),O){var n=new _(e);n.name=b,l(this,"stack",s(1,y(n.stack,1)))}},U=N.prototype=i(T),L=function(r){return{enumerable:!0,configurable:!0,get:r}},B=function(r){return L((function(){return I(this)[r]}))};v&&(h(U,"code",B("code")),h(U,"message",B("message")),h(U,"name",B("name"))),l(U,"constructor",s(1,N));var k=c((function(){return!(new A instanceof _)})),P=k||c((function(){return T.toString!==E||"2: 1"!==String(new A(1,2))})),x=k||c((function(){return 25!==new A(1,"DataCloneError").code})),H=k||25!==A[w]||25!==S[w],F=D?P||x||H:k;a({global:!0,constructor:!0,forced:F},{DOMException:F?N:A});var V=n(b),z=V.prototype;for(var W in P&&(D||A===V)&&u(z,"toString",E),x&&v&&A===V&&h(z,"code",L((function(){return M(R(this).name)}))),f)if(g(f,W)){var Y=f[W],j=Y.s,G=s(6,Y.c);g(V,j)||l(V,j,G),g(z,j)||l(z,j,G)}},64979:(r,e,t)=>{var a=t(46518),n=t(22195),o=t(97751),c=t(6980),i=t(24913).f,s=t(39297),l=t(90679),u=t(23167),h=t(32603),g=t(55002),m=t(38574),R=t(43724),E=t(96395),d="DOMException",f=o("Error"),y=o(d),p=function(){l(this,v);var r=arguments.length,e=h(r<1?void 0:arguments[0]),t=h(r<2?void 0:arguments[1],"Error"),a=new y(e,t),n=new f(e);return n.name=d,i(a,"stack",c(1,m(n.stack,1))),u(a,this,p),a},v=p.prototype=y.prototype,D="stack"in new f(d),b="stack"in new y(1,2),w=y&&R&&Object.getOwnPropertyDescriptor(n,d),_=!!w&&!(w.writable&&w.configurable),A=D&&!_&&!b;a({global:!0,constructor:!0,forced:E||A},{DOMException:A?p:y});var S=o(d),T=S.prototype;if(T.constructor!==S)for(var C in E||i(T,"constructor",c(1,S)),g)if(s(g,C)){var I=g[C],O=I.s;s(S,O)||i(S,O,c(6,I.c))}},79739:(r,e,t)=>{var a=t(97751),n=t(10687),o="DOMException";n(a(o),o)},89429:(r,e,t)=>{var a=t(22195),n=t(16193);r.exports=function(r){if(n){try{return a.process.getBuiltinModule(r)}catch(e){}try{return Function('return require("'+r+'")')()}catch(e){}}}},92804:r=>{var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e+"+/",a=e+"-_",n=function(r){for(var e={},t=0;t<64;t++)e[r.charAt(t)]=t;return e};r.exports={i2c:t,c2i:n(t),i2cUrl:a,c2iUrl:n(a)}}}]);
//# sourceMappingURL=949.a0adfeaf.js.map