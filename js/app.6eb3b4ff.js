(()=>{"use strict";var t={3307:(t,e,a)=>{a.d(e,{lc:()=>A,Y6:()=>L,RV:()=>N,C2:()=>s});var r=a(8653),n=a(9258),o=(a(2008),a(4423),a(5276),a(3288),a(6099),a(1415),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698),a(1699),a(7764),a(2953),a(8676)),i=(a(113),a(1629),a(4114),a(6910),a(8111),a(116),a(7588),a(5506),a(3500),{東京:{lat:35.6762,lng:139.6503,country:"JP"},东京:{lat:35.6762,lng:139.6503,country:"JP"},大阪:{lat:34.6937,lng:135.5023,country:"JP"},京都:{lat:35.0116,lng:135.7681,country:"JP"},横浜:{lat:35.4437,lng:139.638,country:"JP"},横滨:{lat:35.4437,lng:139.638,country:"JP"},名古屋:{lat:35.1815,lng:136.9066,country:"JP"},福岡:{lat:33.5904,lng:130.4017,country:"JP"},福冈:{lat:33.5904,lng:130.4017,country:"JP"},札幌:{lat:43.0642,lng:141.3469,country:"JP"},仙台:{lat:38.2682,lng:140.8694,country:"JP"},広島:{lat:34.3853,lng:132.4553,country:"JP"},广岛:{lat:34.3853,lng:132.4553,country:"JP"},沖縄:{lat:26.2125,lng:127.6792,country:"JP"},冲绳:{lat:26.2125,lng:127.6792,country:"JP"},北京:{lat:39.9042,lng:116.4074,country:"CN"},上海:{lat:31.2304,lng:121.4737,country:"CN"},广州:{lat:23.1291,lng:113.2644,country:"CN"},深圳:{lat:22.5431,lng:114.0579,country:"CN"},杭州:{lat:30.2741,lng:120.1551,country:"CN"},南京:{lat:32.0603,lng:118.7969,country:"CN"},苏州:{lat:31.2989,lng:120.5853,country:"CN"},武汉:{lat:30.5928,lng:114.3055,country:"CN"},成都:{lat:30.5728,lng:104.0668,country:"CN"},重庆:{lat:29.563,lng:106.5516,country:"CN"},西安:{lat:34.3416,lng:108.9398,country:"CN"},天津:{lat:39.3434,lng:117.3616,country:"CN"},青岛:{lat:36.0986,lng:120.3719,country:"CN"},大连:{lat:38.914,lng:121.6147,country:"CN"},厦门:{lat:24.4798,lng:118.0819,country:"CN"},福州:{lat:26.0745,lng:119.2965,country:"CN"},济南:{lat:36.6512,lng:117.1201,country:"CN"},郑州:{lat:34.7466,lng:113.6254,country:"CN"},长沙:{lat:28.2282,lng:112.9388,country:"CN"},哈尔滨:{lat:45.8038,lng:126.5349,country:"CN"},沈阳:{lat:41.8057,lng:123.4315,country:"CN"},长春:{lat:43.8171,lng:125.3235,country:"CN"},石家庄:{lat:38.0428,lng:114.5149,country:"CN"},太原:{lat:37.8706,lng:112.5489,country:"CN"},呼和浩特:{lat:40.8414,lng:111.7525,country:"CN"},银川:{lat:38.4681,lng:106.2731,country:"CN"},西宁:{lat:36.6171,lng:101.7782,country:"CN"},兰州:{lat:36.0611,lng:103.8343,country:"CN"},乌鲁木齐:{lat:43.8256,lng:87.6168,country:"CN"},拉萨:{lat:29.652,lng:91.1721,country:"CN"},昆明:{lat:25.0389,lng:102.7183,country:"CN"},贵阳:{lat:26.647,lng:106.6302,country:"CN"},南宁:{lat:22.817,lng:108.3669,country:"CN"},海口:{lat:20.0444,lng:110.1989,country:"CN"},三亚:{lat:18.2533,lng:109.5007,country:"CN"},台州:{lat:28.6568,lng:121.4281,country:"CN"},天台:{lat:29.1444,lng:121.0114,country:"CN"},天台县:{lat:29.1444,lng:121.0114,country:"CN"},玉环:{lat:28.1356,lng:121.2318,country:"CN"},玉环县:{lat:28.1356,lng:121.2318,country:"CN"},温州:{lat:28.0015,lng:120.6997,country:"CN"},嘉兴:{lat:30.7463,lng:120.755,country:"CN"},湖州:{lat:30.8936,lng:120.0856,country:"CN"},绍兴:{lat:30.0023,lng:120.581,country:"CN"},金华:{lat:29.1028,lng:119.6471,country:"CN"},衢州:{lat:28.9569,lng:118.8739,country:"CN"},舟山:{lat:29.985,lng:122.2068,country:"CN"},丽水:{lat:28.4517,lng:119.9217,country:"CN"},香港:{lat:22.3193,lng:114.1694,country:"HK"},澳门:{lat:22.1987,lng:113.5439,country:"MO"},澳門:{lat:22.1987,lng:113.5439,country:"MO"},台北:{lat:25.033,lng:121.5654,country:"TW"},臺北:{lat:25.033,lng:121.5654,country:"TW"},高雄:{lat:22.6273,lng:120.3014,country:"TW"},台中:{lat:24.1477,lng:120.6736,country:"TW"},臺中:{lat:24.1477,lng:120.6736,country:"TW"}}),l={北京市:"北京",上海市:"上海",天津市:"天津",重庆市:"重庆",河北:"石家庄",河北省:"石家庄",山西:"太原",山西省:"太原",内蒙古:"呼和浩特",辽宁:"沈阳",辽宁省:"沈阳",吉林:"长春",吉林省:"长春",黑龙江:"哈尔滨",黑龙江省:"哈尔滨",江苏:"南京",江苏省:"南京",浙江:"杭州",浙江省:"杭州",安徽:"合肥",安徽省:"合肥",福建:"福州",福建省:"福州",江西:"南昌",江西省:"南昌",山东:"济南",山东省:"济南",河南:"郑州",河南省:"郑州",湖北:"武汉",湖北省:"武汉",湖南:"长沙",湖南省:"长沙",广东:"广州",广东省:"广州",广西:"南宁",海南:"海口",海南省:"海口",四川:"成都",四川省:"成都",贵州:"贵阳",贵州省:"贵阳",云南:"昆明",云南省:"昆明",西藏:"拉萨",陕西:"西安",陕西省:"西安",甘肃:"兰州",甘肃省:"兰州",青海:"西宁",青海省:"西宁",宁夏:"银川",新疆:"乌鲁木齐"};function s(){var t={japanese:[],chinese:[],hkTaiwan:[]};return Object.entries(i).forEach((function(e){var a=(0,o.A)(e,2),r=a[0],n=a[1],i={value:r,label:r};"JP"!==n.country||t.japanese.find((function(t){return t.value===r}))?"CN"!==n.country||t.chinese.find((function(t){return t.value===r}))?["HK","MO","TW"].includes(n.country)&&!t.hkTaiwan.find((function(t){return t.value===r}))&&t.hkTaiwan.push(i):t.chinese.push(i):t.japanese.push(i)})),t.japanese.sort((function(t,e){return t.label.localeCompare(e.label)})),t.chinese.sort((function(t,e){return t.label.localeCompare(e.label)})),t.hkTaiwan.sort((function(t,e){return t.label.localeCompare(e.label)})),t}function u(t){if(i[t])return i[t];for(var e=0,a=Object.entries(i);e<a.length;e++){var r=(0,o.A)(a[e],2),n=r[0],s=r[1];if(t.includes(n)||n.includes(t))return s}for(var u=0,c=Object.entries(l);u<c.length;u++){var d=(0,o.A)(c[u],2),h=d[0],f=d[1];if(t.includes(h)&&i[f])return i[f]}return{lat:35.6762,lng:139.6503,country:"JP"}}var c=["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],d=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],h=["白羊座","金牛座","双子座","巨蟹座","狮子座","处女座","天秤座","天蝎座","射手座","摩羯座","水瓶座","双鱼座"],f={甲:"木",乙:"木",丙:"火",丁:"火",戊:"土",己:"土",庚:"金",辛:"金",壬:"水",癸:"水"},g={寅:"木",卯:"木",巳:"火",午:"火",申:"金",酉:"金",亥:"水",子:"水",辰:"土",戌:"土",丑:"土",未:"土"},y={1:"丑",2:"寅",3:"卯",4:"辰",5:"巳",6:"午",7:"未",8:"申",9:"酉",10:"戌",11:"亥",12:"子"},m={23:"子",0:"子",1:"丑",2:"丑",3:"寅",4:"寅",5:"卯",6:"卯",7:"辰",8:"辰",9:"巳",10:"巳",11:"午",12:"午",13:"未",14:"未",15:"申",16:"申",17:"酉",18:"酉",19:"戌",20:"戌",21:"亥",22:"亥"};function p(t){return t%=360,t<0?t+360:t}function v(t){return t*Math.PI/180}function b(t,e,a,r,n){e<=2&&(t-=1,e+=12);var o=Math.floor(t/100),i=2-o+Math.floor(o/4),l=Math.floor(365.25*(t+4716))+Math.floor(30.6001*(e+1))+a+i-1524.5,s=(r+n/60)/24;return l+s}function D(t,e){var a=(t-2451545)/36525,r=280.46061837+360.98564736629*(t-2451545)+387933e-9*a*a-a*a*a/3871e4,n=(r+e)%360;return n<0?n+360:n}function C(t){var e=t-2451545,a=(280.46+.9856474*e)%360,r=(357.528+.9856003*e)%360*Math.PI/180,n=1.915*Math.sin(r)+.02*Math.sin(2*r),o=(a+n)%360;return o<0?o+360:o}function k(t){if(t<240){if(t<120){var e=9.615+t/120*10.385;return(t-e+360)%360}var a=(t-120)/120,r=20+9*a;return(t-r+360)%360}return t<290?(t-191.549+360)%360:(t-45.06+360)%360}function w(t){var e=(t-2451545)/36525,a=p(218.3164591+481267.88134236*e-.0013268*e*e),r=p(134.9634114+477198.8676313*e+.008997*e*e),n=p(357.5291092+35999.0502909*e-1536e-7*e*e),o=p(297.8502042+445267.1115168*e-.00163*e*e),i=p(93.2720993+483202.0175273*e-.0034029*e*e),l=6.288774*Math.sin(v(r))+1.274027*Math.sin(v(2*o-r))+.658314*Math.sin(v(2*o))+.213618*Math.sin(v(2*r))-.185116*Math.sin(v(n))-.114332*Math.sin(v(2*i)),s=p(a+l);return s}function S(t){var e=Math.floor(t/30),a=Math.floor(t%30),r=Math.floor(60*(t%30-a));return{sign:h[e],degree:a,minute:r,longitude:t}}function A(t){try{console.log("🔍 开始计算占星位置 - 调试信息:"),console.log("输入数据:",t);var e=new Date(t.fullBirthDateTime);console.log("本地时间:",e);var a=u(t.birthplace);console.log("坐标信息:",a);var r=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),i=e.getHours(),l=e.getMinutes();console.log("解析时间:",{year:r,month:n,day:o,hour:i,minute:l});var s=b(r,n,o,i,l);console.log("儒略日:",s);var c=C(s);console.log("太阳黄经:",c);var d=w(s);console.log("月亮黄经:",d);var h=D(s,a.lng);console.log("恒星时:",h,"度 (第"+(Math.floor(h/90)+1)+"象限)");var f=k(h);console.log("上升黄经:",f);var g={sun:S(c),moon:S(d),ascendant:S(f)};return console.log("最终结果:",g),console.log("🎯 占星位置计算完成"),g}catch(y){return console.error("占星位置计算出错:",y),{ascendant:{sign:"双子座",degree:4,minute:11},sun:{sign:"双鱼座",degree:13,minute:49},moon:{sign:"水瓶座",degree:18,minute:56}}}}function L(t){var e=["白羊座","金牛座","双子座","巨蟹座","狮子座","处女座","天秤座","天蝎座","射手座","摩羯座","水瓶座","双鱼座"],a=e.indexOf(t.sign);return-1===a?0:30*a+t.degree+t.minute/60}function E(t){try{var e=new Date(t.fullBirthDateTime),a=e.getFullYear(),r=e.getMonth()+1,o=e.getHours(),i=(a-4)%10,l=(a-4)%12,s=[2,4,6,8,0][i%5],u=(s+r-1)%10,h=Math.floor((e-new Date(1900,0,1))/864e5),p=h%10,v=h%12,b=p%5*2,D=o>=23||o<1?0:Math.floor((o+1)/2),C=(b+D)%10,k=[f[c[i]],f[c[u]],f[c[p]],f[c[C]],g[d[l]],g[y[r]],g[d[v]],g[m[o]||"子"]].filter(Boolean);return{eightCharacters:{year:{heavenlyStem:c[i],earthlyBranch:d[l]},month:{heavenlyStem:c[u],earthlyBranch:y[r]},day:{heavenlyStem:c[p],earthlyBranch:d[v]},hour:{heavenlyStem:c[C],earthlyBranch:m[o]||"子"}},elements:(0,n.A)(new Set(k))}}catch(w){return console.error("八字计算出错:",w),null}}function M(t,e){if(!t)return null;var a=t.elements,r=["木","火","土","金","水"].filter((function(t){return a.includes(t)})).length,n=r>=4?"大吉":3===r?"吉":"凶",o=e.gender,i="★★★☆☆",l="★★★☆☆",s="★★★☆☆",u="★★★☆☆";return"male"===o?(a.includes("金")&&a.includes("水")&&(i="★★★★★"),a.includes("木")&&a.includes("火")&&(l="★★★★☆"),a.includes("土")&&a.includes("火")&&(s="★★★★☆"),a.includes("水")&&a.includes("木")&&(u="★★★★★")):(a.includes("火")&&a.includes("土")&&(i="★★★★☆"),a.includes("金")&&a.includes("水")&&(l="★★★★★"),a.includes("木")&&a.includes("水")&&(s="★★★★★"),a.includes("土")&&a.includes("金")&&(u="★★★★☆")),{overview:n,career:i,wealth:l,love:s,health:u}}function N(t){try{var e=E(t),a=A(t),n=M(e,t);return(0,r.A)((0,r.A)({},e),{},{astrologyPositions:a,fortune:n})}catch(o){return console.error("完整命盘计算出错:",o),{eightCharacters:{year:{heavenlyStem:"甲",earthlyBranch:"子"},month:{heavenlyStem:"丙",earthlyBranch:"寅"},day:{heavenlyStem:"戊",earthlyBranch:"午"},hour:{heavenlyStem:"庚",earthlyBranch:"申"}},elements:["木","火","土","金"],astrologyPositions:{ascendant:{sign:"双子座",degree:4,minute:11},sun:{sign:"双鱼座",degree:13,minute:49},moon:{sign:"水瓶座",degree:18,minute:56}},fortune:{overview:"大吉",career:"★★★☆☆",wealth:"★★★★☆",love:"★★★★★",health:"★★★☆☆"}}}}},7794:(t,e,a)=>{a(3792),a(3362),a(9085),a(9391);var r=a(5130),n=a(6768),o={id:"app"};function i(t,e){var a=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.bF)(a)])}var l=a(1241);const s={},u=(0,l.A)(s,[["render",i]]),c=u;a(8706),a(4114),a(2010),a(6099),a(7764),a(2762),a(2953);var d=a(1387),h=a(8676),f=a(4048),g=a(388),y=a(8653),m=(a(6280),a(6918),a(2008),a(113),a(1629),a(4423),a(4782),a(6910),a(3609),a(9089),a(1688),a(739),a(3288),a(8111),a(2489),a(116),a(7588),a(3110),a(9432),a(3500),a(782)),p=a(3307);function v(){try{var t=localStorage.getItem("meibanAppState");if(null===t)return;return JSON.parse(t)}catch(e){return void console.error("无法加载保存的状态:",e)}}function b(t){try{var e=JSON.stringify({userData:t.userData,calculationResults:t.calculationResults,settings:t.settings,analysisHistory:t.analysisHistory});localStorage.setItem("meibanAppState",e)}catch(a){console.error("无法保存状态:",a)}}var D={userData:null,calculationResults:null,transitResults:null,analysisHistory:[],currentAnalysisType:null,settings:{language:"ja",theme:"default",notifications:!0,autoSave:!0,debugMode:!1},loading:!1,error:null,pageStates:{lastVisitedPage:null,navigationHistory:[]}},C=v();const k=(0,m.y$)({state:(0,y.A)((0,y.A)({},D),C),getters:{getUserData:function(t){return t.userData},getCalculationResults:function(t){return t.calculationResults},getTransitResults:function(t){return t.transitResults},getAnalysisHistory:function(t){return t.analysisHistory},getCurrentAnalysisType:function(t){return t.currentAnalysisType},getSettings:function(t){return t.settings},isLoading:function(t){return t.loading},getError:function(t){return t.error},getPageStates:function(t){return t.pageStates},hasCompleteUserData:function(t){return t.userData&&t.userData.name&&""!==t.userData.name.trim()&&t.userData.birthdate&&null!==t.userData.birthHour&&void 0!==t.userData.birthHour&&""!==t.userData.birthHour&&null!==t.userData.birthMinute&&void 0!==t.userData.birthMinute&&""!==t.userData.birthMinute&&t.userData.birthplace&&""!==t.userData.birthplace.trim()&&t.userData.gender},hasCalculationResults:function(t){return t.calculationResults&&t.calculationResults.eightCharacters&&t.calculationResults.astrologyPositions},hasBaziResults:function(t){return t.calculationResults&&t.calculationResults.eightCharacters&&t.calculationResults.elements},hasAstrologyResults:function(t){return t.calculationResults&&t.calculationResults.astrologyPositions},getUserAge:function(t){if(!t.userData||!t.userData.fullBirthDateTime)return null;var e=new Date(t.userData.fullBirthDateTime),a=new Date,r=a-e;return Math.floor(r/315576e5)},getFormattedUserInfo:function(t){if(!t.userData)return null;var e=new Date(t.userData.fullBirthDateTime);return{name:t.userData.name,age:Math.floor((new Date-e)/315576e5),birthDateFormatted:"".concat(e.getFullYear(),"年").concat(e.getMonth()+1,"月").concat(e.getDate(),"日"),birthTimeFormatted:"".concat(t.userData.birthHour,"時").concat(t.userData.birthMinute,"分"),birthPlace:t.userData.birthplace,gender:"male"===t.userData.gender?"男性":"女性"}},getRecentAnalysis:function(t){return t.analysisHistory.sort((function(t,e){return new Date(e.timestamp)-new Date(t.timestamp)})).slice(0,5)},isDebugMode:function(t){return t.settings.debugMode}},mutations:{setLoading:function(t,e){t.loading=e},setError:function(t,e){t.error={message:e.message||e,type:e.type||"UnknownError",timestamp:(new Date).toISOString(),code:e.code||null}},clearError:function(t){t.error=null},setUserData:function(t,e){t.userData=e,t.settings.autoSave&&b(t)},setAnalysisType:function(t,e){t.currentAnalysisType=e},setCalculationResults:function(t,e){if(t.calculationResults=e,t.userData&&e){var a={id:Date.now(),timestamp:(new Date).toISOString(),userData:(0,y.A)({},t.userData),results:(0,y.A)({},e),analysisType:t.currentAnalysisType||"unknown"};t.analysisHistory.unshift(a),t.analysisHistory.length>20&&(t.analysisHistory=t.analysisHistory.slice(0,20))}t.settings.autoSave&&b(t)},setTransitResults:function(t,e){t.transitResults=e},updateSettings:function(t,e){t.settings=(0,y.A)((0,y.A)({},t.settings),e),b(t)},toggleDebugMode:function(t){t.settings.debugMode=!t.settings.debugMode,b(t)},clearUserData:function(t){t.userData=null,t.calculationResults=null,t.transitResults=null,t.currentAnalysisType=null,t.error=null,localStorage.removeItem("meibanAppState")},clearTransitResults:function(t){t.transitResults=null},clearCalculationResults:function(t){t.calculationResults=null,t.settings.autoSave&&b(t)},clearAnalysisHistory:function(t){t.analysisHistory=[],t.settings.autoSave&&b(t)},removeAnalysisHistory:function(t,e){t.analysisHistory=t.analysisHistory.filter((function(t){return t.id!==e})),t.settings.autoSave&&b(t)},setPageState:function(t,e){var a=e.page,r=e.data;t.pageStates[a]=r},recordPageVisit:function(t,e){t.pageStates.lastVisitedPage=e,t.pageStates.navigationHistory.unshift({page:e,timestamp:(new Date).toISOString()}),t.pageStates.navigationHistory.length>50&&(t.pageStates.navigationHistory=t.pageStates.navigationHistory.slice(0,50))}},actions:{saveUserData:function(t,e){var a=t.commit;a("clearError"),a("setUserData",e)},setAnalysisType:function(t,e){var a=t.commit,r=["bazi","astrology","transit"];r.includes(e)?a("setAnalysisType",e):console.warn("无效的分析类型:",e)},calculateFortune:function(t){var e=arguments;return(0,g.A)((0,f.A)().mark((function a(){var r,n,o,i,l,s,u,c;return(0,f.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=t.commit,n=t.state,o=e.length>1&&void 0!==e[1]?e[1]:null,i=o||n.userData,i){a.next=8;break}throw l=new Error("缺少用户数据，请先填写基本信息"),l.type="DataError",r("setError",l),l;case 8:return r("setLoading",!0),r("clearError"),a.prev=10,s=(0,p.RV)(i),r("setCalculationResults",s),n.settings.debugMode&&console.log("命盘计算成功:",s),a.abrupt("return",s);case 17:return a.prev=17,a.t0=a["catch"](10),console.error("命盤計算失敗:",a.t0),u=new Error("命盤計算失敗，請檢查輸入數據或稍後重試"),u.type="CalculationError",u.originalError=a.t0,r("setError",u),c={eightCharacters:{year:{heavenlyStem:"甲",earthlyBranch:"子"},month:{heavenlyStem:"丙",earthlyBranch:"寅"},day:{heavenlyStem:"戊",earthlyBranch:"午"},hour:{heavenlyStem:"庚",earthlyBranch:"申"}},elements:["木","火","土","金"],astrologyPositions:{ascendant:{sign:"双子座",degree:4,minute:11},sun:{sign:"双鱼座",degree:13,minute:49},moon:{sign:"水瓶座",degree:18,minute:56}},fortune:{overview:"大吉",career:"★★★☆☆",wealth:"★★★★☆",love:"★★★★★",health:"★★★☆☆"}},r("setCalculationResults",c),a.abrupt("return",c);case 27:return a.prev=27,r("setLoading",!1),a.finish(27);case 30:case"end":return a.stop()}}),a,null,[[10,17,27,30]])})))()},calculateTransit:function(t,e){return(0,g.A)((0,f.A)().mark((function r(){var n,o,i,l,s,u,c,d,g,y,m,p;return(0,f.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.commit,o=t.state,i=e.transitDate,l=o.userData,l){r.next=8;break}throw s=new Error("缺少用户数据，请先填写基本信息"),s.type="DataError",n("setError",s),s;case 8:return n("setLoading",!0),n("clearError"),r.prev=10,r.next=13,Promise.all([a.e(694).then(a.bind(a,2694)),a.e(599).then(a.bind(a,1599))]);case 13:return u=r.sent,c=(0,h.A)(u,2),d=c[0].calculateTransitChart,g=c[1].generateDetailedTransitReport,y=d(l,i),m=g(y,l),n("setTransitResults",m),r.abrupt("return",m);case 23:throw r.prev=23,r.t0=r["catch"](10),console.error("行運計算失敗:",r.t0),p=new Error("行運計算失敗，請檢查輸入數據或稍後重試"),p.type="CalculationError",p.originalError=r.t0,n("setError",p),p;case 31:return r.prev=31,n("setLoading",!1),r.finish(31);case 34:case"end":return r.stop()}}),r,null,[[10,23,31,34]])})))()},recalculateFortune:function(t){return(0,g.A)((0,f.A)().mark((function e(){var a,r;return(0,f.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dispatch,r=t.commit,r("clearCalculationResults"),e.next=4,a("calculateFortune");case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))()},loadAnalysisHistory:function(t,e){var a=t.commit,r=t.state,n=r.analysisHistory.find((function(t){return t.id===e}));return n?(a("setUserData",n.userData),a("setCalculationResults",n.results),a("setAnalysisType",n.analysisType),n):null},exportUserData:function(t){var e=t.state;if(!e.userData)throw new Error("没有用户数据可以导出");var a={userData:e.userData,calculationResults:e.calculationResults,analysisHistory:e.analysisHistory,settings:e.settings,exportTime:(new Date).toISOString(),version:"2.0"};return a},importUserData:function(t,e){return(0,g.A)((0,f.A)().mark((function a(){var r,n,o;return(0,f.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=t.commit,n=t.dispatch,a.prev=1,e.userData){a.next=4;break}throw new Error("导入数据格式错误");case 4:if(r("setLoading",!0),r("setUserData",e.userData),!e.calculationResults){a.next=10;break}r("setCalculationResults",e.calculationResults),a.next=12;break;case 10:return a.next=12,n("calculateFortune");case 12:return e.analysisHistory&&(r("clearAnalysisHistory"),e.analysisHistory.forEach((function(t){r("setCalculationResults",t.results)}))),e.settings&&r("updateSettings",e.settings),a.abrupt("return",!0);case 17:throw a.prev=17,a.t0=a["catch"](1),console.error("導入數據失敗:",a.t0),o=new Error("導入數據失敗："+a.t0.message),o.type="DataError",r("setError",o),o;case 24:return a.prev=24,r("setLoading",!1),a.finish(24);case 27:case"end":return a.stop()}}),a,null,[[1,17,24,27]])})))()},updateAppSettings:function(t,e){var a=t.commit;a("updateSettings",e)},toggleAutoSave:function(t){var e=t.commit,a=t.state,r=!a.settings.autoSave;e("updateSettings",{autoSave:r}),r&&b(a)},manualSave:function(t){var e=t.state;b(e)},resetApp:function(t){var e=t.commit;e("clearUserData"),e("clearAnalysisHistory"),e("clearError")},clearTransitData:function(t){var e=t.commit;e("clearTransitResults")},clearErrorMessage:function(t){var e=t.commit;e("clearError")},recordPageVisit:function(t,e){var a=t.commit;a("recordPageVisit",e)},initializeApp:function(t){return(0,g.A)((0,f.A)().mark((function e(){var a,r,n,o;return(0,f.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.state,r=t.dispatch,n=t.commit,e.prev=1,n("setLoading",!0),!a.userData||a.calculationResults){e.next=6;break}return e.next=6,r("calculateFortune");case 6:return n("clearError"),a.settings.debugMode&&console.log("应用初始化完成"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e["catch"](1),console.error("應用初始化失敗:",e.t0),o=new Error("應用初始化失敗"),o.type="InitializationError",n("setError",o),e.abrupt("return",!1);case 18:return e.prev=18,n("setLoading",!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,11,18,21]])})))()}},modules:{}});var w=a(4232),S={class:"meiban-container"},A={class:"form-container"},L={class:"birth-form"},E={class:"form-group"},M={class:"form-group"},N={class:"form-row"},T={class:"form-group time-group"},H=["value"],R={class:"form-group time-group"},P=["value"],U={class:"form-group"},O={class:"location-input-wrapper"},F=["label"],x=["value"],B={class:"form-group gender-group"},J={class:"radio-group"},j=["value"],I={class:"section"},_={class:"analysis-buttons"};function q(t,e,a,o,i,l){return(0,n.uX)(),(0,n.CE)("div",S,[e[23]||(e[23]=(0,n.Lk)("header",{class:"header"},[(0,n.Lk)("h1",{class:"title"},"命盤"),(0,n.Lk)("p",{class:"subtitle"},"生辰八字・命盤占い・占星分析")],-1)),(0,n.Lk)("div",A,[(0,n.Lk)("form",L,[(0,n.Lk)("div",E,[e[10]||(e[10]=(0,n.Lk)("label",{for:"name"},"お名前",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=function(t){return i.formData.name=t}),placeholder:"お名前を入力してください",required:""},null,512),[[r.Jo,i.formData.name]])]),(0,n.Lk)("div",M,[e[11]||(e[11]=(0,n.Lk)("label",{for:"birthdate"},"生年月日",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",id:"birthdate","onUpdate:modelValue":e[1]||(e[1]=function(t){return i.formData.birthdate=t}),required:""},null,512),[[r.Jo,i.formData.birthdate]])]),(0,n.Lk)("div",N,[(0,n.Lk)("div",T,[e[13]||(e[13]=(0,n.Lk)("label",{for:"birthHour"},"時間",-1)),(0,n.bo)((0,n.Lk)("select",{id:"birthHour","onUpdate:modelValue":e[2]||(e[2]=function(t){return i.formData.birthHour=t}),required:""},[e[12]||(e[12]=(0,n.Lk)("option",{value:"",disabled:""},"時",-1)),((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(24,(function(t){return(0,n.Lk)("option",{key:t,value:String(t-1)},(0,w.v_)(t-1),9,H)})),64))],512),[[r.u1,i.formData.birthHour]])]),(0,n.Lk)("div",R,[e[15]||(e[15]=(0,n.Lk)("label",{for:"birthMinute"},"分",-1)),(0,n.bo)((0,n.Lk)("select",{id:"birthMinute","onUpdate:modelValue":e[3]||(e[3]=function(t){return i.formData.birthMinute=t}),required:""},[e[14]||(e[14]=(0,n.Lk)("option",{value:"",disabled:""},"分",-1)),((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(60,(function(t){return(0,n.Lk)("option",{key:t,value:String(t-1)},(0,w.v_)(t-1),9,P)})),64))],512),[[r.u1,i.formData.birthMinute]])])]),(0,n.Lk)("div",U,[e[17]||(e[17]=(0,n.Lk)("label",{for:"birthplace"},"出生地",-1)),(0,n.Lk)("div",O,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[4]||(e[4]=function(t){return i.selectedCity=t}),onChange:e[5]||(e[5]=function(){return l.onCitySelect&&l.onCitySelect.apply(l,arguments)}),class:"city-select"},[e[16]||(e[16]=(0,n.Lk)("option",{value:""},"都市を選択してください",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.cityGroups,(function(t,e){return(0,n.uX)(),(0,n.CE)("optgroup",{key:e,label:i.regionLabels[e]},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t,(function(t){return(0,n.uX)(),(0,n.CE)("option",{key:t.value,value:t.value},(0,w.v_)(t.label),9,x)})),128))],8,F)})),128))],544),[[r.u1,i.selectedCity]]),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"birthplace","onUpdate:modelValue":e[6]||(e[6]=function(t){return i.formData.birthplace=t}),placeholder:"または直接入力してください",required:"",class:"city-input"},null,512),[[r.Jo,i.formData.birthplace]])]),e[18]||(e[18]=(0,n.Lk)("p",{class:"location-hint"},"リストから選択するか、直接入力してください",-1))]),(0,n.Lk)("div",B,[e[19]||(e[19]=(0,n.Lk)("label",null,"性別",-1)),(0,n.Lk)("div",J,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.genderOptions,(function(t){return(0,n.uX)(),(0,n.CE)("label",{class:"radio-label",key:t.value},[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":e[7]||(e[7]=function(t){return i.formData.gender=t}),value:t.value,required:""},null,8,j),[[r.XL,i.formData.gender]]),(0,n.Lk)("span",null,(0,w.v_)(t.label),1)])})),128))])]),(0,n.Lk)("div",I,[e[22]||(e[22]=(0,n.Lk)("h3",{class:"section-title"},"分析種類を選択",-1)),(0,n.Lk)("div",_,[(0,n.Lk)("button",{type:"button",onClick:e[8]||(e[8]=function(t){return l.submitWithAnalysisType("bazi")}),class:"analysis-btn analysis-btn--bazi"},e[20]||(e[20]=[(0,n.Lk)("div",{class:"btn-icon"},"🏮",-1),(0,n.Lk)("div",{class:"btn-content"},[(0,n.Lk)("h4",null,"生辰八字"),(0,n.Lk)("p",null,"四柱推命による詳細な運勢分析")],-1)])),(0,n.Lk)("button",{type:"button",onClick:e[9]||(e[9]=function(t){return l.submitWithAnalysisType("astrology")}),class:"analysis-btn analysis-btn--astrology"},e[21]||(e[21]=[(0,n.Lk)("div",{class:"btn-icon"},"⭐",-1),(0,n.Lk)("div",{class:"btn-content"},[(0,n.Lk)("h4",null,"占星分析"),(0,n.Lk)("p",null,"西洋占星術による星盤分析")],-1)]))])])])]),e[24]||(e[24]=(0,n.Fv)('<div class="features-section" data-v-637a9fe6><h3 class="features-title" data-v-637a9fe6>機能紹介</h3><div class="features-grid" data-v-637a9fe6><div class="feature-card feature-card--primary" data-v-637a9fe6><div class="feature-icon" data-v-637a9fe6>🏮</div><h4 data-v-637a9fe6>生辰八字</h4><p data-v-637a9fe6>四柱推命による伝統的な運勢分析</p></div><div class="feature-card feature-card--secondary" data-v-637a9fe6><div class="feature-icon" data-v-637a9fe6>⭐</div><h4 data-v-637a9fe6>占星分析</h4><p data-v-637a9fe6>西洋占星術による詳細な星盤分析</p></div><div class="feature-card feature-card--success" data-v-637a9fe6><div class="feature-icon" data-v-637a9fe6>🌟</div><h4 data-v-637a9fe6>行運分析</h4><p data-v-637a9fe6>現在の運勢の詳細な分析レポート</p></div><div class="feature-card feature-card--primary" data-v-637a9fe6><div class="feature-icon" data-v-637a9fe6>📈</div><h4 data-v-637a9fe6>運勢予測</h4><p data-v-637a9fe6>未来の傾向と重要な時期の予測</p></div></div></div><footer class="footer" data-v-637a9fe6><p data-v-637a9fe6>© 2025 命盤 - 生辰八字・四柱推命・命盤占い・占星分析</p></footer>',2))])}a(8940),a(8156);const V={name:"HomePage",data:function(){return{formData:{name:"",birthdate:"",birthHour:"",birthMinute:"",birthplace:"",gender:""},selectedCity:"",cityGroups:{},regionLabels:{japanese:"日本",chinese:"中国",hkTaiwan:"港澳台"},genderOptions:[{value:"male",label:"男性"},{value:"female",label:"女性"}]}},computed:(0,y.A)({},(0,m.L8)({userData:"getUserData",calculationResults:"getCalculationResults"})),watch:{userData:{handler:function(t){t&&this.fillFormWithStoredData()},immediate:!0}},created:function(){this.cityGroups=(0,p.C2)()},mounted:function(){this.userData&&this.fillFormWithStoredData()},methods:{onCitySelect:function(){this.selectedCity&&(this.formData.birthplace=this.selectedCity)},fillFormWithStoredData:function(){this.userData&&(this.formData={name:this.userData.name||"",birthdate:this.userData.birthdate||"",birthHour:String(void 0!==this.userData.birthHour?this.userData.birthHour:""),birthMinute:String(void 0!==this.userData.birthMinute?this.userData.birthMinute:""),birthplace:this.userData.birthplace||"",gender:this.userData.gender||""},this.userData.birthplace&&(this.selectedCity=this.userData.birthplace))},submitWithAnalysisType:function(t){if(this.validateForm()){this.analysisType=t;var e=(0,y.A)((0,y.A)({},this.formData),{},{birthHour:parseInt(this.formData.birthHour),birthMinute:parseInt(this.formData.birthMinute),fullBirthDateTime:"".concat(this.formData.birthdate,"T").concat(String(this.formData.birthHour).padStart(2,"0"),":").concat(String(this.formData.birthMinute).padStart(2,"0"),":00")});this.$store.dispatch("saveUserData",e),this.$store.dispatch("setAnalysisType",t),this.$store.dispatch("calculateFortune",e),"bazi"===t?this.$router.push({name:"bazi-results",params:{id:Date.now()}}):this.$router.push({name:"astrology-results",params:{id:Date.now()}})}},validateForm:function(){return this.formData.name.trim()?this.formData.birthdate?""===this.formData.birthHour?(alert("時間を選択してください"),!1):""===this.formData.birthMinute?(alert("分を選択してください"),!1):this.formData.birthplace.trim()?!!this.formData.gender||(alert("性別を選択してください"),!1):(alert("出生地を入力してください"),!1):(alert("生年月日を選択してください"),!1):(alert("お名前を入力してください"),!1)}}},z=(0,l.A)(V,[["render",q],["__scopeId","data-v-637a9fe6"]]),W=z;var X=[{path:"/",name:"home",component:W},{path:"/results/:id",name:"results",component:function(){return Promise.all([a.e(457),a.e(958)]).then(a.bind(a,6989))}},{path:"/bazi-results/:id",name:"bazi-results",component:function(){return Promise.all([a.e(569),a.e(188)]).then(a.bind(a,7188))},meta:{requiresUserData:!0,analysisType:"bazi",title:"生辰八字結果"}},{path:"/astrology-results/:id",name:"astrology-results",component:function(){return Promise.all([a.e(569),a.e(457),a.e(228)]).then(a.bind(a,5387))},meta:{requiresUserData:!0,analysisType:"astrology",title:"占星分析結果"}},{path:"/transit-analysis",name:"transit-analysis",component:function(){return a.e(554).then(a.bind(a,6554))},meta:{requiresUserData:!0,title:"行運盤分析"}},{path:"/error",name:"error",component:function(){return a.e(476).then(a.bind(a,476))},props:function(t){return{error:t.query.error||"Unknown error",message:t.query.message||"An error occurred"}}},{path:"/:pathMatch(.*)*",name:"not-found",component:function(){return a.e(411).then(a.bind(a,1411))}}],K=(0,d.aE)({history:(0,d.LA)("/meiban/"),routes:X,scrollBehavior:function(t,e,a){return a||{top:0}}});K.beforeEach((function(t,e,a){if(console.log("路由守卫检查:",t.name,t.meta),t.meta.title?document.title="".concat(t.meta.title," - 命盤"):document.title="命盤 - 生辰八字・占星分析",t.meta.requiresUserData){var r=k.getters.getUserData,n=k.getters.getCalculationResults;console.log("路由守卫检查用户数据:",r),console.log("路由守卫检查计算结果:",n);var o=r&&r.name&&""!==r.name.trim()&&r.birthdate&&null!==r.birthHour&&void 0!==r.birthHour&&""!==r.birthHour&&null!==r.birthMinute&&void 0!==r.birthMinute&&""!==r.birthMinute&&r.birthplace&&""!==r.birthplace.trim()&&r.gender;if(console.log("用户数据验证结果:",o),!o){console.log("用户数据不完整，重定向到首页");var i="";return i="transit-analysis"===t.name?"行運分析需要完整的出生信息，請先填寫基本資料":"bazi-results"===t.name?"生辰八字分析需要完整的出生信息，請先填寫基本資料":"astrology-results"===t.name?"占星分析需要完整的出生信息，請先填寫基本資料":"訪問此頁面需要完整的出生信息，請先填寫基本資料",alert(i),void a({name:"home"})}if(("bazi-results"===t.name||"astrology-results"===t.name)&&!n)return console.log("没有计算结果，重定向到首页"),alert("沒有找到計算結果，請先進行分析"),void a({name:"home"});console.log("用户数据验证通过，允许访问"),a()}else a()})),K.onError((function(t){console.error("Router error:",t),K.push({name:"error",query:{error:t.name||"RouterError",message:t.message||"Navigation failed"}})})),K.afterEach((function(t,e){console.log("路由跳转: ".concat(e.name," -> ").concat(t.name)),"undefined"!==typeof window&&window.gtag&&window.gtag("config","GA_MEASUREMENT_ID",{page_title:t.meta.title||t.name,page_location:window.location.href})}));const $=K;(0,r.Ef)(c).use(k).use($).mount("#app")}},e={};function a(r){var n=e[r];if(void 0!==n)return n.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,a),o.exports}a.m=t,(()=>{var t=[];a.O=(e,r,n,o)=>{if(!r){var i=1/0;for(c=0;c<t.length;c++){for(var[r,n,o]=t[c],l=!0,s=0;s<r.length;s++)(!1&o||i>=o)&&Object.keys(a.O).every((t=>a.O[t](r[s])))?r.splice(s--,1):(l=!1,o<i&&(i=o));if(l){t.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[r,n,o]}})(),(()=>{a.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return a.d(e,{a:e}),e}})(),(()=>{a.d=(t,e)=>{for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}})(),(()=>{a.f={},a.e=t=>Promise.all(Object.keys(a.f).reduce(((e,r)=>(a.f[r](t,e),e)),[]))})(),(()=>{a.u=t=>"js/"+t+"."+{188:"1c917fbb",228:"f550cc35",411:"975656ff",457:"12a2c941",476:"27090a5f",554:"25c5fadb",569:"2ba997f6",599:"1cffc112",694:"cf01f16b",958:"27fd3ab5"}[t]+".js"})(),(()=>{a.miniCssF=t=>"css/"+t+"."+{188:"ff8c1b44",228:"9d9066c4",411:"c61c93ec",476:"c1344bfd",554:"dc0cd33c",958:"b62e84c9"}[t]+".css"})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{var t={},e="meiban-app:";a.l=(r,n,o,i)=>{if(t[r])t[r].push(n);else{var l,s;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==e+o){l=d;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",e+o),l.src=r),t[r]=[n];var h=(e,a)=>{l.onerror=l.onload=null,clearTimeout(f);var n=t[r];if(delete t[r],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach((t=>t(a))),e)return e(a)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),s&&document.head.appendChild(l)}}})(),(()=>{a.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{a.p="/meiban/"})(),(()=>{if("undefined"!==typeof document){var t=(t,e,r,n,o)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",a.nc&&(i.nonce=a.nc);var l=a=>{if(i.onerror=i.onload=null,"load"===a.type)n();else{var r=a&&a.type,l=a&&a.target&&a.target.href||e,s=new Error("Loading CSS chunk "+t+" failed.\n("+r+": "+l+")");s.name="ChunkLoadError",s.code="CSS_CHUNK_LOAD_FAILED",s.type=r,s.request=l,i.parentNode&&i.parentNode.removeChild(i),o(s)}};return i.onerror=i.onload=l,i.href=e,r?r.parentNode.insertBefore(i,r.nextSibling):document.head.appendChild(i),i},e=(t,e)=>{for(var a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var n=a[r],o=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(o===t||o===e))return n}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){n=i[r],o=n.getAttribute("data-href");if(o===t||o===e)return n}},r=r=>new Promise(((n,o)=>{var i=a.miniCssF(r),l=a.p+i;if(e(i,l))return n();t(r,l,null,n,o)})),n={524:0};a.f.miniCss=(t,e)=>{var a={188:1,228:1,411:1,476:1,554:1,958:1};n[t]?e.push(n[t]):0!==n[t]&&a[t]&&e.push(n[t]=r(t).then((()=>{n[t]=0}),(e=>{throw delete n[t],e})))}}})(),(()=>{var t={524:0};a.f.j=(e,r)=>{var n=a.o(t,e)?t[e]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise(((a,r)=>n=t[e]=[a,r]));r.push(n[2]=o);var i=a.p+a.u(e),l=new Error,s=r=>{if(a.o(t,e)&&(n=t[e],0!==n&&(t[e]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,n[1](l)}};a.l(i,s,"chunk-"+e,e)}},a.O.j=e=>0===t[e];var e=(e,r)=>{var n,o,[i,l,s]=r,u=0;if(i.some((e=>0!==t[e]))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(s)var c=s(a)}for(e&&e(r);u<i.length;u++)o=i[u],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(c)},r=self["webpackChunkmeiban_app"]=self["webpackChunkmeiban_app"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var r=a.O(void 0,[504],(()=>a(7794)));r=a.O(r)})();
//# sourceMappingURL=app.6eb3b4ff.js.map