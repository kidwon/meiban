"use strict";(self["webpackChunkmeiban_app"]=self["webpackChunkmeiban_app"]||[]).push([[573],{9573:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Rt});n(2010);var a=n(6768),s=n(4232),i={class:"results-container"},o={class:"header"},r={class:"user-name"},c={key:0,class:"results-content"},l={class:"birth-data-summary"},u={class:"result-section star-chart-section"},d={class:"chart-container"},h={class:"result-section astrology-positions"},v={class:"positions-grid"},p={class:"position-item ascendant"},y={class:"position-value"},f={class:"sign"},g={class:"degree"},k={class:"position-item sun"},m={class:"position-value"},L={class:"sign"},x={class:"degree"},b={class:"position-item moon"},R={class:"position-value"},P={class:"sign"},M={class:"degree"},w={class:"result-section eight-characters"},E={class:"eight-char-grid"},_={class:"char-column"},C={class:"char-value heavenly"},W={class:"char-value earthly"},z={class:"char-column"},H={class:"char-value heavenly"},A={class:"char-value earthly"},X={class:"char-column"},D={class:"char-value heavenly"},S={class:"char-value earthly"},I={class:"char-column"},q={class:"char-value heavenly"},K={class:"char-value earthly"},N={class:"result-section elements"},B={class:"elements-grid"},F={class:"result-section fortune"},Q={class:"fortune-overview"},j={class:"fortune-badge"},O={class:"fortune-details"},T={class:"fortune-item"},Z={class:"fortune-stars"},V={class:"fortune-item"},$={class:"fortune-stars"},U={class:"fortune-item"},Y={class:"fortune-stars"},G={class:"fortune-item"},J={class:"fortune-stars"},ee={class:"actions"},te={key:1,class:"loading"};function ne(e,t,n,ne,ae,se){var ie=(0,a.g2)("StarChart");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("header",o,[t[2]||(t[2]=(0,a.Lk)("h1",{class:"title"},"命盤結果",-1)),(0,a.Lk)("p",r,(0,s.v_)(e.userData?e.userData.name:"ゲスト")+"様の命盤",1)]),e.calculationResults?((0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("div",l,[(0,a.Lk)("p",null,(0,s.v_)(se.formatBirthDate)+" "+(0,s.v_)(se.formatBirthTime)+" / "+(0,s.v_)(e.userData.birthplace),1)]),(0,a.Lk)("section",u,[t[3]||(t[3]=(0,a.Lk)("h2",{class:"section-title"},"星盤圖",-1)),(0,a.Lk)("div",d,[(0,a.bF)(ie,{"calculation-results":e.calculationResults,size:ne.chartSize},null,8,["calculation-results","size"])])]),(0,a.Lk)("section",h,[t[7]||(t[7]=(0,a.Lk)("h2",{class:"section-title"},"星座位置",-1)),(0,a.Lk)("div",v,[(0,a.Lk)("div",p,[t[4]||(t[4]=(0,a.Lk)("div",{class:"position-label"},"上升",-1)),(0,a.Lk)("div",y,[(0,a.Lk)("span",f,(0,s.v_)(e.calculationResults.astrologyPositions.ascendant.sign),1),(0,a.Lk)("span",g,(0,s.v_)(e.calculationResults.astrologyPositions.ascendant.degree)+"°"+(0,s.v_)(e.calculationResults.astrologyPositions.ascendant.minute)+"'",1)])]),(0,a.Lk)("div",k,[t[5]||(t[5]=(0,a.Lk)("div",{class:"position-label"},"太陽",-1)),(0,a.Lk)("div",m,[(0,a.Lk)("span",L,(0,s.v_)(e.calculationResults.astrologyPositions.sun.sign),1),(0,a.Lk)("span",x,(0,s.v_)(e.calculationResults.astrologyPositions.sun.degree)+"°"+(0,s.v_)(e.calculationResults.astrologyPositions.sun.minute)+"'",1)])]),(0,a.Lk)("div",b,[t[6]||(t[6]=(0,a.Lk)("div",{class:"position-label"},"月亮",-1)),(0,a.Lk)("div",R,[(0,a.Lk)("span",P,(0,s.v_)(e.calculationResults.astrologyPositions.moon.sign),1),(0,a.Lk)("span",M,(0,s.v_)(e.calculationResults.astrologyPositions.moon.degree)+"°"+(0,s.v_)(e.calculationResults.astrologyPositions.moon.minute)+"'",1)])])])]),(0,a.Lk)("section",w,[t[12]||(t[12]=(0,a.Lk)("h2",{class:"section-title"},"生辰八字",-1)),(0,a.Lk)("div",E,[(0,a.Lk)("div",_,[t[8]||(t[8]=(0,a.Lk)("div",{class:"char-label"},"年柱",-1)),(0,a.Lk)("div",C,(0,s.v_)(e.calculationResults.eightCharacters.year.heavenlyStem),1),(0,a.Lk)("div",W,(0,s.v_)(e.calculationResults.eightCharacters.year.earthlyBranch),1)]),(0,a.Lk)("div",z,[t[9]||(t[9]=(0,a.Lk)("div",{class:"char-label"},"月柱",-1)),(0,a.Lk)("div",H,(0,s.v_)(e.calculationResults.eightCharacters.month.heavenlyStem),1),(0,a.Lk)("div",A,(0,s.v_)(e.calculationResults.eightCharacters.month.earthlyBranch),1)]),(0,a.Lk)("div",X,[t[10]||(t[10]=(0,a.Lk)("div",{class:"char-label"},"日柱",-1)),(0,a.Lk)("div",D,(0,s.v_)(e.calculationResults.eightCharacters.day.heavenlyStem),1),(0,a.Lk)("div",S,(0,s.v_)(e.calculationResults.eightCharacters.day.earthlyBranch),1)]),(0,a.Lk)("div",I,[t[11]||(t[11]=(0,a.Lk)("div",{class:"char-label"},"時柱",-1)),(0,a.Lk)("div",q,(0,s.v_)(e.calculationResults.eightCharacters.hour.heavenlyStem),1),(0,a.Lk)("div",K,(0,s.v_)(e.calculationResults.eightCharacters.hour.earthlyBranch),1)])])]),(0,a.Lk)("section",N,[t[13]||(t[13]=(0,a.Lk)("h2",{class:"section-title"},"五行配置",-1)),(0,a.Lk)("div",B,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.calculationResults.elements,(function(e,t){return(0,a.uX)(),(0,a.CE)("div",{key:t,class:(0,s.C4)(["element-item",se.getElementClass(e)])},(0,s.v_)(e),3)})),128))])]),(0,a.Lk)("section",F,[t[18]||(t[18]=(0,a.Lk)("h2",{class:"section-title"},"運勢分析",-1)),(0,a.Lk)("div",Q,[(0,a.Lk)("div",j,(0,s.v_)(e.calculationResults.fortune.overview),1)]),(0,a.Lk)("div",O,[(0,a.Lk)("div",T,[t[14]||(t[14]=(0,a.Lk)("div",{class:"fortune-label"},"仕事運",-1)),(0,a.Lk)("div",Z,(0,s.v_)(e.calculationResults.fortune.career),1)]),(0,a.Lk)("div",V,[t[15]||(t[15]=(0,a.Lk)("div",{class:"fortune-label"},"金運",-1)),(0,a.Lk)("div",$,(0,s.v_)(e.calculationResults.fortune.wealth),1)]),(0,a.Lk)("div",U,[t[16]||(t[16]=(0,a.Lk)("div",{class:"fortune-label"},"恋愛運",-1)),(0,a.Lk)("div",Y,(0,s.v_)(e.calculationResults.fortune.love),1)]),(0,a.Lk)("div",G,[t[17]||(t[17]=(0,a.Lk)("div",{class:"fortune-label"},"健康運",-1)),(0,a.Lk)("div",J,(0,s.v_)(e.calculationResults.fortune.health),1)])])]),(0,a.Lk)("div",ee,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=function(){return se.goBack&&se.goBack.apply(se,arguments)}),class:"back-btn"},"トップに戻る"),(0,a.Lk)("button",{onClick:t[1]||(t[1]=function(){return se.shareChart&&se.shareChart.apply(se,arguments)}),class:"share-btn"},"星盤を共有")])])):((0,a.uX)(),(0,a.CE)("div",te,t[19]||(t[19]=[(0,a.Lk)("p",null,"命盤を計算中...",-1)]))),t[20]||(t[20]=(0,a.Lk)("footer",{class:"footer"},[(0,a.Lk)("p",null,"© 2025 命盤 - 生辰八字・四柱推命・命盤占い")],-1))])}var ae=n(8653),se=(n(8706),n(4114),n(3180)),ie=n(144),oe=(n(4782),n(9868),{class:"star-chart-container"}),re={class:"chart-header"},ce={class:"chart-controls"},le={class:"chart-wrapper"},ue=["width","height","viewBox"],de=["cx","cy","r"],he={class:"zodiac-ring"},ve={key:0,class:"house-ring"},pe={class:"planet-ring"},ye={key:1,class:"aspect-lines"},fe=["cx","cy","r"],ge={class:"axis-lines"},ke=["x1","y1","x2","y2"],me=["x1","y1","x2","y2"],Le={class:"tooltip-title"},xe={class:"tooltip-position"},be={class:"chart-legend"},Re={class:"legend-section"},Pe={class:"legend-items"},Me={class:"planet-name"},we={class:"planet-position"},Ee={key:0,class:"legend-section"},_e={class:"legend-items"},Ce={class:"aspect-description"},We={class:"aspect-orb"};function ze(e,t,n,i,o,r){var c=(0,a.g2)("ZodiacSector"),l=(0,a.g2)("HouseSector"),u=(0,a.g2)("PlanetMarker"),d=(0,a.g2)("AspectLine");return(0,a.uX)(),(0,a.CE)("div",oe,[(0,a.Lk)("div",re,[t[2]||(t[2]=(0,a.Lk)("h3",{class:"chart-title"},"星盤圖",-1)),(0,a.Lk)("div",ce,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=function(){return i.toggleAspects&&i.toggleAspects.apply(i,arguments)}),class:(0,s.C4)([{active:i.showAspects},"control-btn"])},(0,s.v_)(i.showAspects?"隐藏相位":"显示相位"),3),(0,a.Lk)("button",{onClick:t[1]||(t[1]=function(){return i.toggleHouses&&i.toggleHouses.apply(i,arguments)}),class:(0,s.C4)([{active:i.showHouses},"control-btn"])},(0,s.v_)(i.showHouses?"隐藏宫位":"显示宫位"),3)])]),(0,a.Lk)("div",le,[((0,a.uX)(),(0,a.CE)("svg",{width:i.chartSize,height:i.chartSize,viewBox:"0 0 ".concat(i.chartSize," ").concat(i.chartSize),class:"star-chart-svg"},[(0,a.Lk)("circle",{cx:i.center,cy:i.center,r:i.settings.outerRadius,class:"chart-background"},null,8,de),(0,a.Lk)("g",he,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.chartData.zodiac,(function(e){return(0,a.uX)(),(0,a.Wv)(c,{key:e.name,zodiac:e,center:i.center,"inner-radius":i.settings.zodiacRadius-20,"outer-radius":i.settings.outerRadius},null,8,["zodiac","center","inner-radius","outer-radius"])})),128))]),i.showHouses&&i.chartData.houses.length>0?((0,a.uX)(),(0,a.CE)("g",ve,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.chartData.houses,(function(e){return(0,a.uX)(),(0,a.Wv)(l,{key:e.number,house:e,center:i.center,"inner-radius":i.settings.houseRadius-20,"outer-radius":i.settings.zodiacRadius-20},null,8,["house","center","inner-radius","outer-radius"])})),128))])):(0,a.Q3)("",!0),(0,a.Lk)("g",pe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.chartData.planets,(function(e){return(0,a.uX)(),(0,a.Wv)(u,{key:e.id,planet:e,center:i.center,radius:i.settings.planetRadius,onPlanetHover:i.onPlanetHover},null,8,["planet","center","radius","onPlanetHover"])})),128))]),i.showAspects?((0,a.uX)(),(0,a.CE)("g",ye,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.chartData.aspects,(function(e,t){return(0,a.uX)(),(0,a.Wv)(d,{key:t,aspect:e,planets:i.chartData.planets,center:i.center,radius:i.settings.innerRadius+30},null,8,["aspect","planets","center","radius"])})),128))])):(0,a.Q3)("",!0),(0,a.Lk)("circle",{cx:i.center,cy:i.center,r:i.settings.innerRadius,class:"chart-center"},null,8,fe),(0,a.Lk)("g",ge,[(0,a.Lk)("line",{x1:i.center-i.settings.outerRadius,y1:i.center,x2:i.center+i.settings.outerRadius,y2:i.center,class:"axis-line"},null,8,ke),(0,a.Lk)("line",{x1:i.center,y1:i.center-i.settings.outerRadius,x2:i.center,y2:i.center+i.settings.outerRadius,class:"axis-line"},null,8,me)])],8,ue)),i.hoveredPlanet?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"planet-tooltip",style:(0,s.Tr)(i.tooltipStyle)},[(0,a.Lk)("div",Le,(0,s.v_)(i.hoveredPlanet.name),1),(0,a.Lk)("div",xe,(0,s.v_)(i.hoveredPlanet.sign)+" "+(0,s.v_)(i.hoveredPlanet.signDegree)+"°"+(0,s.v_)(i.hoveredPlanet.signMinute)+"' ",1)],4)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",be,[(0,a.Lk)("div",Re,[t[3]||(t[3]=(0,a.Lk)("h4",null,"行星",-1)),(0,a.Lk)("div",Pe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.chartData.planets,(function(e){return(0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"legend-item"},[(0,a.Lk)("span",{class:"planet-symbol",style:(0,s.Tr)({color:e.color})},(0,s.v_)(e.symbol),5),(0,a.Lk)("span",Me,(0,s.v_)(e.displayName),1),(0,a.Lk)("span",we,(0,s.v_)(e.sign)+" "+(0,s.v_)(e.signDegree)+"°"+(0,s.v_)(e.signMinute)+"' ",1)])})),128))])]),i.showAspects&&i.chartData.aspects.length>0?((0,a.uX)(),(0,a.CE)("div",Ee,[t[4]||(t[4]=(0,a.Lk)("h4",null,"主要相位",-1)),(0,a.Lk)("div",_e,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.chartData.aspects.slice(0,5),(function(e,t){return(0,a.uX)(),(0,a.CE)("div",{key:t,class:"legend-item"},[(0,a.Lk)("span",{class:"aspect-color",style:(0,s.Tr)({backgroundColor:e.color})},null,4),(0,a.Lk)("span",Ce,(0,s.v_)(e.planet1)+" "+(0,s.v_)(e.aspect)+" "+(0,s.v_)(e.planet2),1),(0,a.Lk)("span",We,(0,s.v_)(e.orb.toFixed(1))+"°",1)])})),128))])])):(0,a.Q3)("",!0)])])}n(2892);var He=n(3645),Ae=["d","fill","fill-opacity","stroke","stroke-width"],Xe=["x1","y1","x2","y2","stroke"],De=["x","y","fill","font-size"],Se=["x","y","fill"];function Ie(e,t,n,i,o,r){return(0,a.uX)(),(0,a.CE)("g",{class:"zodiac-sector",onMouseenter:t[0]||(t[0]=function(){return i.onHover&&i.onHover.apply(i,arguments)}),onMouseleave:t[1]||(t[1]=function(){return i.onLeave&&i.onLeave.apply(i,arguments)})},[(0,a.Lk)("path",{d:i.sectorPath,fill:n.zodiac.color,"fill-opacity":i.isHovered?.3:.15,stroke:n.zodiac.color,"stroke-width":i.isHovered?2:1,class:"sector-background"},null,8,Ae),(0,a.Lk)("line",{x1:i.innerPoint.x,y1:i.innerPoint.y,x2:i.outerPoint.x,y2:i.outerPoint.y,stroke:n.zodiac.color,"stroke-width":"1",opacity:"0.5",class:"sector-divider"},null,8,Xe),(0,a.Lk)("text",{x:i.symbolPosition.x,y:i.symbolPosition.y,fill:n.zodiac.color,"font-size":i.symbolSize,"font-weight":"bold","text-anchor":"middle","dominant-baseline":"middle",class:"zodiac-symbol"},(0,s.v_)(n.zodiac.symbol),9,De),i.isHovered?((0,a.uX)(),(0,a.CE)("text",{key:0,x:i.namePosition.x,y:i.namePosition.y,fill:n.zodiac.color,"font-size":"11","font-weight":"500","text-anchor":"middle","dominant-baseline":"middle",class:"zodiac-name"},(0,s.v_)(n.zodiac.name),9,Se)):(0,a.Q3)("",!0)],32)}n(8598);const qe={name:"ZodiacSector",props:{zodiac:{type:Object,required:!0},center:{type:Number,required:!0},innerRadius:{type:Number,required:!0},outerRadius:{type:Number,required:!0}},setup:function(e){var t=(0,ie.KR)(!1),n=(0,a.EW)((function(){var t=e.zodiac.svgAngle,n=t+30,a=t*Math.PI/180,s=n*Math.PI/180,i=e.center+e.innerRadius*Math.cos(a),o=e.center+e.innerRadius*Math.sin(a),r=e.center+e.outerRadius*Math.cos(a),c=e.center+e.outerRadius*Math.sin(a),l=e.center+e.outerRadius*Math.cos(s),u=e.center+e.outerRadius*Math.sin(s),d=e.center+e.innerRadius*Math.cos(s),h=e.center+e.innerRadius*Math.sin(s),v=n-t<=180?"0":"1";return["M ".concat(i," ").concat(o),"L ".concat(r," ").concat(c),"A ".concat(e.outerRadius," ").concat(e.outerRadius," 0 ").concat(v," 1 ").concat(l," ").concat(u),"L ".concat(d," ").concat(h),"A ".concat(e.innerRadius," ").concat(e.innerRadius," 0 ").concat(v," 0 ").concat(i," ").concat(o),"Z"].join(" ")})),s=(0,a.EW)((function(){var t=e.zodiac.svgAngle*Math.PI/180;return{x:e.center+e.innerRadius*Math.cos(t),y:e.center+e.innerRadius*Math.sin(t)}})),i=(0,a.EW)((function(){var t=e.zodiac.svgAngle*Math.PI/180;return{x:e.center+e.outerRadius*Math.cos(t),y:e.center+e.outerRadius*Math.sin(t)}})),o=(0,a.EW)((function(){var t=(e.zodiac.svgAngle+15)*Math.PI/180,n=e.outerRadius-10;return{x:e.center+n*Math.cos(t),y:e.center+n*Math.sin(t)}})),r=(0,a.EW)((function(){var t=(e.zodiac.svgAngle+15)*Math.PI/180,n=e.innerRadius+15;return{x:e.center+n*Math.cos(t),y:e.center+n*Math.sin(t)}})),c=(0,a.EW)((function(){var t=Math.min(e.outerRadius-e.innerRadius,20);return Math.max(.8*t,12)})),l=function(){t.value=!0},u=function(){t.value=!1};return{isHovered:t,sectorPath:n,innerPoint:s,outerPoint:i,symbolPosition:o,namePosition:r,symbolSize:c,onHover:l,onLeave:u}}};var Ke=n(1241);const Ne=(0,Ke.A)(qe,[["render",Ie],["__scopeId","data-v-6fddcf42"]]),Be=Ne;var Fe=["d"],Qe=["x1","y1","x2","y2","stroke-width","opacity"],je=["x","y","font-size","opacity"],Oe={key:0,class:"house-tooltip"},Te=["x","y","width"],Ze=["x","y"];function Ve(e,t,n,i,o,r){return(0,a.uX)(),(0,a.CE)("g",{class:"house-sector",onMouseenter:t[0]||(t[0]=function(){return i.onHover&&i.onHover.apply(i,arguments)}),onMouseleave:t[1]||(t[1]=function(){return i.onLeave&&i.onLeave.apply(i,arguments)})},[(0,a.Lk)("path",{d:i.sectorPath,fill:"transparent",stroke:"none",class:"house-background"},null,8,Fe),(0,a.Lk)("line",{x1:i.innerPoint.x,y1:i.innerPoint.y,x2:i.outerPoint.x,y2:i.outerPoint.y,stroke:"#6c757d","stroke-width":i.isHovered?2:1,opacity:i.isHovered?.8:.4,"stroke-dasharray":"2,2",class:"house-divider"},null,8,Qe),(0,a.Lk)("text",{x:i.numberPosition.x,y:i.numberPosition.y,fill:"#495057","font-size":i.numberSize,"font-weight":"600","text-anchor":"middle","dominant-baseline":"middle",opacity:i.isHovered?1:.7,class:"house-number"},(0,s.v_)(n.house.number),9,je),i.isHovered?((0,a.uX)(),(0,a.CE)("g",Oe,[(0,a.Lk)("rect",{x:i.tooltipPosition.x-i.tooltipWidth/2,y:i.tooltipPosition.y-10,width:i.tooltipWidth,height:"20",fill:"rgba(0,0,0,0.8)",rx:"3",class:"tooltip-background"},null,8,Te),(0,a.Lk)("text",{x:i.tooltipPosition.x,y:i.tooltipPosition.y,fill:"white","font-size":"10","font-weight":"500","text-anchor":"middle","dominant-baseline":"middle",class:"tooltip-text"},(0,s.v_)(i.houseDescription),9,Ze)])):(0,a.Q3)("",!0)],32)}const $e={name:"HouseSector",props:{house:{type:Object,required:!0},center:{type:Number,required:!0},innerRadius:{type:Number,required:!0},outerRadius:{type:Number,required:!0}},setup:function(e){var t=(0,ie.KR)(!1),n={1:"自我・个性",2:"财富・价值",3:"沟通・学习",4:"家庭・根源",5:"创造・恋爱",6:"工作・健康",7:"关系・合作",8:"转化・共享",9:"哲学・远行",10:"事业・声誉",11:"友谊・希望",12:"潜意识・牺牲"},s=(0,a.EW)((function(){var t=e.house.svgAngle,n=t+30,a=t*Math.PI/180,s=n*Math.PI/180,i=e.center+e.innerRadius*Math.cos(a),o=e.center+e.innerRadius*Math.sin(a),r=e.center+e.outerRadius*Math.cos(a),c=e.center+e.outerRadius*Math.sin(a),l=e.center+e.outerRadius*Math.cos(s),u=e.center+e.outerRadius*Math.sin(s),d=e.center+e.innerRadius*Math.cos(s),h=e.center+e.innerRadius*Math.sin(s),v=n-t<=180?"0":"1";return["M ".concat(i," ").concat(o),"L ".concat(r," ").concat(c),"A ".concat(e.outerRadius," ").concat(e.outerRadius," 0 ").concat(v," 1 ").concat(l," ").concat(u),"L ".concat(d," ").concat(h),"A ".concat(e.innerRadius," ").concat(e.innerRadius," 0 ").concat(v," 0 ").concat(i," ").concat(o),"Z"].join(" ")})),i=(0,a.EW)((function(){var t=e.house.svgAngle*Math.PI/180;return{x:e.center+e.innerRadius*Math.cos(t),y:e.center+e.innerRadius*Math.sin(t)}})),o=(0,a.EW)((function(){var t=e.house.svgAngle*Math.PI/180;return{x:e.center+e.outerRadius*Math.cos(t),y:e.center+e.outerRadius*Math.sin(t)}})),r=(0,a.EW)((function(){var t=(e.house.svgAngle+15)*Math.PI/180,n=(e.innerRadius+e.outerRadius)/2;return{x:e.center+n*Math.cos(t),y:e.center+n*Math.sin(t)}})),c=(0,a.EW)((function(){var t=(e.house.svgAngle+15)*Math.PI/180,n=e.outerRadius+20;return{x:e.center+n*Math.cos(t),y:e.center+n*Math.sin(t)}})),l=(0,a.EW)((function(){return n[e.house.number]||"第".concat(e.house.number,"宫")})),u=(0,a.EW)((function(){return 8*l.value.length+16})),d=(0,a.EW)((function(){var t=Math.min(e.outerRadius-e.innerRadius,16);return Math.max(.6*t,10)})),h=function(){t.value=!0},v=function(){t.value=!1};return{isHovered:t,sectorPath:s,innerPoint:i,outerPoint:o,numberPosition:r,tooltipPosition:c,houseDescription:l,tooltipWidth:u,numberSize:d,onHover:h,onLeave:v}}},Ue=(0,Ke.A)($e,[["render",Ve],["__scopeId","data-v-6d9eb358"]]),Ye=Ue;var Ge=["transform"],Je=["r","fill","fill-opacity","stroke","stroke-width"],et=["x2","y2","stroke"],tt=["fill","font-size"],nt={key:0,class:"degree-label"},at=["x","y","width","fill"],st=["y"];function it(e,t,n,i,o,r){return(0,a.uX)(),(0,a.CE)("g",{class:"planet-marker",onMouseenter:t[0]||(t[0]=function(){return i.onHover&&i.onHover.apply(i,arguments)}),onMouseleave:t[1]||(t[1]=function(){return i.onLeave&&i.onLeave.apply(i,arguments)}),transform:"translate(".concat(i.position.x,", ").concat(i.position.y,")")},[(0,a.Lk)("circle",{r:i.circleRadius,fill:n.planet.color,"fill-opacity":i.isHovered?.3:.1,stroke:n.planet.color,"stroke-width":i.isHovered?2:1,class:"planet-background"},null,8,Je),(0,a.Lk)("line",{x1:"0",y1:"0",x2:i.lineEnd.x,y2:i.lineEnd.y,stroke:n.planet.color,"stroke-width":"1",opacity:"0.6",class:"position-line"},null,8,et),(0,a.Lk)("text",{x:"0",y:"0",fill:n.planet.color,"font-size":i.symbolSize,"font-weight":"bold","text-anchor":"middle","dominant-baseline":"middle",class:"planet-symbol"},(0,s.v_)(n.planet.symbol),9,tt),i.isHovered?((0,a.uX)(),(0,a.CE)("g",nt,[(0,a.Lk)("rect",{x:-i.labelWidth/2,y:i.circleRadius+5,width:i.labelWidth,height:"16",fill:n.planet.color,"fill-opacity":"0.9",rx:"3",class:"label-background"},null,8,at),(0,a.Lk)("text",{x:"0",y:i.circleRadius+15,fill:"white","font-size":"10","font-weight":"500","text-anchor":"middle","dominant-baseline":"middle",class:"degree-text"},(0,s.v_)(i.degreeLabel),9,st)])):(0,a.Q3)("",!0)],40,Ge)}const ot={name:"PlanetMarker",props:{planet:{type:Object,required:!0},center:{type:Number,required:!0},radius:{type:Number,required:!0}},emits:["planet-hover","planet-leave"],setup:function(e,t){var n=t.emit,s=(0,ie.KR)(!1),i=(0,a.EW)((function(){var t=e.planet.svgAngle*Math.PI/180;return{x:e.center+e.radius*Math.cos(t),y:e.center+e.radius*Math.sin(t)}})),o=(0,a.EW)((function(){var t=e.planet.svgAngle*Math.PI/180,n=.3*e.radius;return{x:-n*Math.cos(t),y:-n*Math.sin(t)}})),r=(0,a.EW)((function(){return e.planet.isAngle?12:10})),c=(0,a.EW)((function(){return e.planet.isAngle?10:12})),l=(0,a.EW)((function(){return"".concat(e.planet.signDegree,"°").concat(e.planet.signMinute,"'")})),u=(0,a.EW)((function(){return 6*l.value.length+8})),d=function(t){s.value=!0,n("planet-hover",e.planet,t)},h=function(){s.value=!1,n("planet-leave")};return{isHovered:s,position:i,lineEnd:o,circleRadius:r,symbolSize:c,degreeLabel:l,labelWidth:u,onHover:d,onLeave:h}}},rt=(0,Ke.A)(ot,[["render",it],["__scopeId","data-v-a4cbb2fc"]]),ct=rt;var lt=["x1","y1","x2","y2","stroke","stroke-width","opacity","stroke-dasharray"],ut=["cx","cy","fill"],dt={key:1,class:"aspect-tooltip"},ht=["x","y","width"],vt=["x","y"];function pt(e,t,n,i,o,r){return(0,a.uX)(),(0,a.CE)("g",{class:"aspect-line",onMouseenter:t[0]||(t[0]=function(){return i.onHover&&i.onHover.apply(i,arguments)}),onMouseleave:t[1]||(t[1]=function(){return i.onLeave&&i.onLeave.apply(i,arguments)})},[(0,a.Lk)("line",{x1:i.startPoint.x,y1:i.startPoint.y,x2:i.endPoint.x,y2:i.endPoint.y,stroke:n.aspect.color,"stroke-width":i.lineWidth,opacity:i.lineOpacity,"stroke-dasharray":i.dashPattern,class:"aspect-connection"},null,8,lt),i.isHovered?((0,a.uX)(),(0,a.CE)("circle",{key:0,cx:i.midPoint.x,cy:i.midPoint.y,r:3,fill:n.aspect.color,class:"aspect-marker"},null,8,ut)):(0,a.Q3)("",!0),i.isHovered?((0,a.uX)(),(0,a.CE)("g",dt,[(0,a.Lk)("rect",{x:i.tooltipPosition.x-i.tooltipWidth/2,y:i.tooltipPosition.y-12,width:i.tooltipWidth,height:"24",fill:"rgba(0,0,0,0.9)",rx:"4",class:"tooltip-background"},null,8,ht),(0,a.Lk)("text",{x:i.tooltipPosition.x,y:i.tooltipPosition.y,fill:"white","font-size":"10","font-weight":"500","text-anchor":"middle","dominant-baseline":"middle",class:"tooltip-text"},(0,s.v_)(i.aspectDescription),9,vt)])):(0,a.Q3)("",!0)],32)}n(113),n(8111),n(116),n(6099);const yt={name:"AspectLine",props:{aspect:{type:Object,required:!0},planets:{type:Array,required:!0},center:{type:Number,required:!0},radius:{type:Number,required:!0}},setup:function(e){var t=(0,ie.KR)(!1),n=(0,a.EW)((function(){return e.planets.find((function(t){return t.name===e.aspect.planet1}))})),s=(0,a.EW)((function(){return e.planets.find((function(t){return t.name===e.aspect.planet2}))})),i=(0,a.EW)((function(){if(!n.value)return{x:0,y:0};var t=n.value.svgAngle*Math.PI/180;return{x:e.center+e.radius*Math.cos(t),y:e.center+e.radius*Math.sin(t)}})),o=(0,a.EW)((function(){if(!s.value)return{x:0,y:0};var t=s.value.svgAngle*Math.PI/180;return{x:e.center+e.radius*Math.cos(t),y:e.center+e.radius*Math.sin(t)}})),r=(0,a.EW)((function(){return{x:(i.value.x+o.value.x)/2,y:(i.value.y+o.value.y)/2}})),c=(0,a.EW)((function(){var t=r.value.x,n=r.value.y-20,a=.9*e.center,s=Math.sqrt(Math.pow(t-e.center,2)+Math.pow(n-e.center,2));if(s>a){var i=Math.atan2(n-e.center,t-e.center);return{x:e.center+a*Math.cos(i),y:e.center+a*Math.sin(i)}}return{x:t,y:n}})),l=(0,a.EW)((function(){var t={合相:{width:2,opacity:.8,dash:"none"},六分相:{width:1.5,opacity:.6,dash:"3,2"},四分相:{width:2,opacity:.7,dash:"5,3"},三分相:{width:1.5,opacity:.6,dash:"none"},对分相:{width:2,opacity:.8,dash:"2,2"}};return t[e.aspect.aspect]||{width:1,opacity:.5,dash:"none"}})),u=(0,a.EW)((function(){return t.value?l.value.width+1:l.value.width})),d=(0,a.EW)((function(){return t.value?l.value.opacity+.2:l.value.opacity})),h=(0,a.EW)((function(){return l.value.dash})),v=(0,a.EW)((function(){var t,a,i=(null===(t=n.value)||void 0===t?void 0:t.name)||e.aspect.planet1,o=(null===(a=s.value)||void 0===a?void 0:a.name)||e.aspect.planet2,r="".concat(e.aspect.orb.toFixed(1),"°");return"".concat(i," ").concat(e.aspect.aspect," ").concat(o," (").concat(r,")")})),p=(0,a.EW)((function(){return Math.max(6*v.value.length,120)})),y=function(){t.value=!0},f=function(){t.value=!1};return{isHovered:t,startPoint:i,endPoint:o,midPoint:r,tooltipPosition:c,lineWidth:u,lineOpacity:d,dashPattern:h,aspectDescription:v,tooltipWidth:p,onHover:y,onLeave:f}}},ft=(0,Ke.A)(yt,[["render",pt],["__scopeId","data-v-48e68821"]]),gt=ft,kt={name:"StarChart",components:{ZodiacSector:Be,HouseSector:Ye,PlanetMarker:ct,AspectLine:gt},props:{calculationResults:{type:Object,required:!0},size:{type:Number,default:500}},setup:function(e){var t=(0,ie.KR)(!1),n=(0,ie.KR)(!0),s=(0,ie.KR)(null),i=(0,ie.KR)({x:0,y:0}),o=(0,a.EW)((function(){return e.size})),r=(0,a.EW)((function(){return o.value/2})),c=(0,a.EW)((function(){try{return(0,He.Wd)(e.calculationResults)}catch(t){return console.error("生成星盘数据失败:",t),y()}})),l=(0,a.EW)((function(){return{outerRadius:.44*o.value,zodiacRadius:.4*o.value,houseRadius:.36*o.value,planetRadius:.32*o.value,innerRadius:.1*o.value}})),u=(0,a.EW)((function(){return s.value?{left:"".concat(i.value.x+10,"px"),top:"".concat(i.value.y-30,"px"),display:"block"}:{}})),d=function(){t.value=!t.value},h=function(){n.value=!n.value},v=function(e,t){if(s.value=e,t){var n=t.target.closest("svg").getBoundingClientRect();i.value={x:t.clientX-n.left,y:t.clientY-n.top}}},p=function(){s.value=null},y=function(){return{zodiac:[],houses:[],planets:[],aspects:[],settings:l.value}};return(0,a.sV)((function(){console.log("星盘组件已挂载，数据:",c.value)})),{showAspects:t,showHouses:n,hoveredPlanet:s,chartSize:o,center:r,chartData:c,settings:l,tooltipStyle:u,toggleAspects:d,toggleHouses:h,onPlanetHover:v,onPlanetLeave:p}}},mt=(0,Ke.A)(kt,[["render",ze],["__scopeId","data-v-ff03e71a"]]),Lt=mt,xt={name:"ResultsPage",components:{StarChart:Lt},setup:function(){var e=(0,ie.KR)(500),t=function(){var t=window.innerWidth;e.value=t<480?350:t<768?400:500};return(0,a.sV)((function(){t(),window.addEventListener("resize",t)})),(0,a.xo)((function(){window.removeEventListener("resize",t)})),{chartSize:e}},computed:(0,ae.A)((0,ae.A)({},(0,se.L8)({userData:"getUserData",calculationResults:"getCalculationResults"})),{},{formatBirthDate:function(){if(!this.userData||!this.userData.birthdate)return"";var e=this.userData.birthdate.split("-");return"".concat(e[0],"年").concat(e[1],"月").concat(e[2],"日")},formatBirthTime:function(){return this.userData?"".concat(this.userData.birthHour,"時").concat(this.userData.birthMinute,"分"):""}}),methods:{getElementClass:function(e){var t={木:"element-wood",火:"element-fire",土:"element-earth",金:"element-metal",水:"element-water"};return t[e]||""},goBack:function(){this.$router.push({name:"home"})},shareChart:function(){var e=this;navigator.share?navigator.share({title:"我的星盘命盘",text:"".concat(this.userData.name,"の星盤命盤結果"),url:window.location.href})["catch"]((function(t){console.log("分享失败:",t),e.fallbackShare()})):this.fallbackShare()},fallbackShare:function(){navigator.clipboard?navigator.clipboard.writeText(window.location.href).then((function(){alert("链接已复制到剪贴板")}))["catch"]((function(){alert("请手动复制当前页面链接进行分享")})):alert("请手动复制当前页面链接进行分享")}},created:function(){this.userData&&this.calculationResults||this.$router.push({name:"home"})}},bt=(0,Ke.A)(xt,[["render",ne],["__scopeId","data-v-39889d4c"]]),Rt=bt},9868:(e,t,n)=>{var a=n(6518),s=n(9504),i=n(1291),o=n(1240),r=n(2333),c=n(9039),l=RangeError,u=String,d=Math.floor,h=s(r),v=s("".slice),p=s(1..toFixed),y=function(e,t,n){return 0===t?n:t%2===1?y(e,t-1,n*e):y(e*e,t/2,n)},f=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},g=function(e,t,n){var a=-1,s=n;while(++a<6)s+=t*e[a],e[a]=s%1e7,s=d(s/1e7)},k=function(e,t){var n=6,a=0;while(--n>=0)a+=e[n],e[n]=d(a/t),a=a%t*1e7},m=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var a=u(e[t]);n=""===n?a:n+h("0",7-a.length)+a}return n},L=c((function(){return"0.000"!==p(8e-5,3)||"1"!==p(.9,0)||"1.25"!==p(1.255,2)||"1000000000000000128"!==p(0xde0b6b3a7640080,0)}))||!c((function(){p({})}));a({target:"Number",proto:!0,forced:L},{toFixed:function(e){var t,n,a,s,r=o(this),c=i(e),d=[0,0,0,0,0,0],p="",L="0";if(c<0||c>20)throw new l("Incorrect fraction digits");if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return u(r);if(r<0&&(p="-",r=-r),r>1e-21)if(t=f(r*y(2,69,1))-69,n=t<0?r*y(2,-t,1):r/y(2,t,1),n*=4503599627370496,t=52-t,t>0){g(d,0,n),a=c;while(a>=7)g(d,1e7,0),a-=7;g(d,y(10,a,1),0),a=t-1;while(a>=23)k(d,1<<23),a-=23;k(d,1<<a),g(d,1,1),k(d,2),L=m(d)}else g(d,0,n),g(d,1<<-t,0),L=m(d)+h("0",c);return c>0?(s=L.length,L=p+(s<=c?"0."+h("0",c-s)+L:v(L,0,s-c)+"."+v(L,s-c))):L=p+L,L}})}}]);
//# sourceMappingURL=573.998afe36.js.map