"use strict";(self["webpackChunkmeiban_app"]=self["webpackChunkmeiban_app"]||[]).push([[599,694,954],{1599:(t,e,n)=>{n.r(e),n.d(e,{TRANSIT_INTERPRETATIONS:()=>s,generateDetailedTransitReport:()=>i});var r=n(9258),a=(n(2675),n(9463),n(6280),n(6918),n(8706),n(2008),n(1629),n(4423),n(2062),n(4114),n(4782),n(5086),n(3288),n(2010),n(8111),n(2489),n(7588),n(1701),n(3579),n(9868),n(6099),n(7495),n(1415),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(1699),n(7764),n(5440),n(3500),n(2953),n(6310)),s={aspects:{土星合相:{description:"transitReport.aspects.saturnConjunction.description",keywords:"transitReport.aspects.saturnConjunction.keywords",advice:"transitReport.aspects.saturnConjunction.advice"},土星四分相:{description:"transitReport.aspects.saturnSquare.description",keywords:"transitReport.aspects.saturnSquare.keywords",advice:"transitReport.aspects.saturnSquare.advice"},土星三分相:{description:"transitReport.aspects.saturnTrine.description",keywords:"transitReport.aspects.saturnTrine.keywords",advice:"transitReport.aspects.saturnTrine.advice"},土星对分相:{description:"transitReport.aspects.saturnOpposition.description",keywords:"transitReport.aspects.saturnOpposition.keywords",advice:"transitReport.aspects.saturnOpposition.advice"},木星合相:{description:"transitReport.aspects.jupiterConjunction.description",keywords:"transitReport.aspects.jupiterConjunction.keywords",advice:"transitReport.aspects.jupiterConjunction.advice"},木星三分相:{description:"transitReport.aspects.jupiterTrine.description",keywords:"transitReport.aspects.jupiterTrine.keywords",advice:"transitReport.aspects.jupiterTrine.advice"},天王星合相:{description:"transitReport.aspects.uranusConjunction.description",keywords:"transitReport.aspects.uranusConjunction.keywords",advice:"transitReport.aspects.uranusConjunction.advice"},天王星四分相:{description:"transitReport.aspects.uranusSquare.description",keywords:"transitReport.aspects.uranusSquare.keywords",advice:"transitReport.aspects.uranusSquare.advice"},海王星合相:{description:"transitReport.aspects.neptuneConjunction.description",keywords:"transitReport.aspects.neptuneConjunction.keywords",advice:"transitReport.aspects.neptuneConjunction.advice"},海王星四分相:{description:"transitReport.aspects.neptuneSquare.description",keywords:"transitReport.aspects.neptuneSquare.keywords",advice:"transitReport.aspects.neptuneSquare.advice"},冥王星合相:{description:"transitReport.aspects.plutoConjunction.description",keywords:"transitReport.aspects.plutoConjunction.keywords",advice:"transitReport.aspects.plutoConjunction.advice"},冥王星四分相:{description:"transitReport.aspects.plutoSquare.description",keywords:"transitReport.aspects.plutoSquare.keywords",advice:"transitReport.aspects.plutoSquare.advice"}},lifeCycles:{saturn_return_1:{title:"transitReport.lifeCycles.saturnReturn1.title",description:"transitReport.lifeCycles.saturnReturn1.description",themes:"transitReport.lifeCycles.saturnReturn1.themes",advice:"transitReport.lifeCycles.saturnReturn1.advice"},jupiter_return_3:{title:"transitReport.lifeCycles.jupiterReturn3.title",description:"transitReport.lifeCycles.jupiterReturn3.description",themes:"transitReport.lifeCycles.jupiterReturn3.themes",advice:"transitReport.lifeCycles.jupiterReturn3.advice"},saturn_opposition:{title:"transitReport.lifeCycles.saturnOpposition.title",description:"transitReport.lifeCycles.saturnOpposition.description",themes:"transitReport.lifeCycles.saturnOpposition.themes",advice:"transitReport.lifeCycles.saturnOpposition.advice"}}};function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{console.log("📊 开始生成详细行运报告");var r=n||(0,a.UK)(),s=function(t){return(0,a.sC)(t,r)},i=t.age,v=t.aspects,h=t.currentCycles,y=t.outerPlanetAnalysis,f=t.transitDate;if(!t||!e)throw new Error(s("transitReport.errors.missingData"));var k=function(t){try{var e=new Date(t);if(isNaN(e.getTime()))throw new Error(s("transitReport.errors.invalidDate"));return"en"===r?"".concat(e.getMonth()+1,"/").concat(e.getDate(),"/").concat(e.getFullYear()):"".concat(e.getFullYear(),"年").concat(e.getMonth()+1,"月").concat(e.getDate(),"日")}catch(n){return console.warn("日期格式化失败:",t,n),s("transitReport.errors.dateFormatError")}},g={header:{title:s("transitReport.header.title"),user:e.name||s("transitReport.header.anonymousUser"),age:i||0,analysisDate:k(f),birthDate:k(e.fullBirthDateTime),birthPlace:e.birthplace||s("transitReport.header.unknownPlace")},overview:o(t,r),majorCycles:c(h||[],i||0,r),outerPlanets:l(y||{},i||0,r),majorAspects:u((v||[]).slice(0,8),r),lifeGuidance:p(t,i||0,r),recommendations:d(t,r),futureOutlook:m(i||0,v||[],r)};return console.log("✅ 详细行运报告生成完成"),g}catch(R){return console.error("❌ 生成详细行运报告失败:",R),console.error("错误堆栈:",R.stack),E(e,n)}}function o(t,e){try{var n=function(t){return(0,a.sC)(t,e)},r=t.age,s=t.aspects,i=t.currentCycles,o="";o=n(r>=42&&r<=46?"transitReport.overview.midlifePhase":r>=28&&r<=32?"transitReport.overview.saturnReturnPhase":r>=35&&r<=37?"transitReport.overview.jupiterReturnPhase":"transitReport.overview.stablePhase");var c=(s||[]).filter((function(t){return"strong"===t.intensity})).length,l=(i||[]).length,u=n("transitReport.overview.summaryTemplate"),p=u.replace("{age}",r).replace("{totalAspects}",(s||[]).length).replace("{majorAspects}",c).replace("{cyclesCount}",l);return{summary:p,phaseDescription:o,keyThemes:v(s||[],i||[],e),intensity:h(s||[],i||[],e)}}catch(m){console.error("生成概述失败:",m);var d=function(t){return(0,a.sC)(t,e)};return{summary:d("transitReport.overview.fallbackSummary"),phaseDescription:d("transitReport.overview.fallbackPhase"),keyThemes:[d("transitReport.overview.fallbackTheme")],intensity:d("transitReport.intensity.gentle")}}}function c(t,e,n){try{var r=function(t){return(0,a.sC)(t,n)};return t&&0!==t.length?t.map((function(t){var e,n=s.lifeCycles[t.key],a=Math.round(100*(t.progress||0));return e=(t.progress||0)<.3?r("transitReport.cycles.phases.early"):(t.progress||0)<.7?r("transitReport.cycles.phases.middle"):r("transitReport.cycles.phases.late"),{name:t.name||r("transitReport.cycles.unknownCycle"),progress:a,phase:e,description:n?r(n.description):r("transitReport.cycles.defaultDescription").replace("{cycleName}",t.name),themes:n?r(n.themes).split(","):[r("transitReport.cycles.defaultThemes.growth"),r("transitReport.cycles.defaultThemes.responsibility")],advice:r(n?n.advice:"transitReport.cycles.defaultAdvice")}})):[{name:r("transitReport.cycles.noMajorCycles"),progress:0,phase:r("transitReport.cycles.stablePhase"),description:r("transitReport.cycles.stableDescription"),themes:[r("transitReport.cycles.stableThemes.development"),r("transitReport.cycles.stableThemes.skillBuilding"),r("transitReport.cycles.stableThemes.foundation")],advice:r("transitReport.cycles.stableAdvice")}]}catch(o){console.error("生成周期分析失败:",o);var i=function(t){return(0,a.sC)(t,n)};return[{name:i("transitReport.cycles.analysisError"),progress:0,phase:i("transitReport.cycles.unknown"),description:i("transitReport.cycles.analysisErrorDescription"),themes:[i("transitReport.cycles.reanalysisNeeded")],advice:i("transitReport.cycles.retryAdvice")}]}}function l(t,e,n){try{var r=function(t){return(0,a.sC)(t,n)},s=t.saturn,i=void 0===s?[]:s,o=t.uranus,c=void 0===o?[]:o,l=t.neptune,u=void 0===l?[]:l,p=t.pluto,d=void 0===p?[]:p,m=t.summary,v=[];return i.length>0&&v.push({planet:r("transitReport.outerPlanets.saturn.name"),theme:r("transitReport.outerPlanets.saturn.theme"),description:r("transitReport.outerPlanets.saturn.description"),aspects:i.map((function(t){return y(t,n)})),advice:r("transitReport.outerPlanets.saturn.advice")}),c.length>0&&v.push({planet:r("transitReport.outerPlanets.uranus.name"),theme:r("transitReport.outerPlanets.uranus.theme"),description:r("transitReport.outerPlanets.uranus.description"),aspects:c.map((function(t){return y(t,n)})),advice:r("transitReport.outerPlanets.uranus.advice")}),u.length>0&&v.push({planet:r("transitReport.outerPlanets.neptune.name"),theme:r("transitReport.outerPlanets.neptune.theme"),description:r("transitReport.outerPlanets.neptune.description"),aspects:u.map((function(t){return y(t,n)})),advice:r("transitReport.outerPlanets.neptune.advice")}),d.length>0&&v.push({planet:r("transitReport.outerPlanets.pluto.name"),theme:r("transitReport.outerPlanets.pluto.theme"),description:r("transitReport.outerPlanets.pluto.description"),aspects:d.map((function(t){return y(t,n)})),advice:r("transitReport.outerPlanets.pluto.advice")}),{summary:m||{description:r("transitReport.outerPlanets.mildInfluence")},planets:v,overallTheme:f(v,n)}}catch(k){console.error("生成外行星报告失败:",k);var h=function(t){return(0,a.sC)(t,n)};return{summary:{description:h("transitReport.outerPlanets.analysisError")},planets:[],overallTheme:h("transitReport.outerPlanets.reanalysisNeeded")}}}function u(t,e){try{var n=function(t){return(0,a.sC)(t,e)};return(t||[]).map((function(t){var e="".concat(t.transitPlanet||"未知").concat(t.aspect||"未知"),r=s.aspects[e];return{title:"".concat(t.transitPlanet||n("transitReport.aspects.unknown")," ").concat(t.aspect||n("transitReport.aspects.unknown")," ").concat(t.natalPlanet||n("transitReport.aspects.unknown")),orb:(t.orb||0).toFixed(1),intensity:t.intensity||"unknown",direction:t.applying?n("transitReport.aspects.applying"):n("transitReport.aspects.separating"),description:n(r?r.description:"transitReport.aspects.defaultDescription"),keywords:r?n(r.keywords).split(","):[n("transitReport.aspects.defaultKeyword")],advice:n(r?r.advice:"transitReport.aspects.defaultAdvice")}}))}catch(r){return console.error("生成相位报告失败:",r),[]}}function p(t,e,n){try{var r=function(t){return(0,a.sC)(t,n)},s=t.aspects;return{primaryFocus:k(s||[],e,n),currentChallenge:g(s||[],n),currentOpportunity:R(s||[],n),emotionalAdvice:r("transitReport.lifeGuidance.emotionalAdvice"),practicalAdvice:r("transitReport.lifeGuidance.practicalAdvice"),spiritualAdvice:C(e,n)}}catch(o){console.error("生成人生指导失败:",o);var i=function(t){return(0,a.sC)(t,n)};return{primaryFocus:i("transitReport.lifeGuidance.fallbackFocus"),currentChallenge:i("transitReport.lifeGuidance.fallbackChallenge"),currentOpportunity:i("transitReport.lifeGuidance.fallbackOpportunity"),emotionalAdvice:i("transitReport.lifeGuidance.fallbackEmotional"),practicalAdvice:i("transitReport.lifeGuidance.fallbackPractical"),spiritualAdvice:i("transitReport.lifeGuidance.fallbackSpiritual")}}}function d(t,e){try{var n=t.aspects,r=void 0===n?[]:n,s=t.currentCycles,i=void 0===s?[]:s,o=t.age,c=void 0===o?0:o;return{career:A(r,c,e),relationships:b(r,e),health:L(e),personal:w(r,i,e),financial:_(r,e),timing:T(r,e)}}catch(u){console.error("生成详细建议失败:",u);var l=function(t){return(0,a.sC)(t,e)};return{career:{focus:l("transitReport.recommendations.career.fallbackFocus"),advice:l("transitReport.recommendations.career.fallbackAdvice"),timing:l("transitReport.recommendations.career.fallbackTiming")},relationships:{focus:l("transitReport.recommendations.relationships.fallbackFocus"),advice:l("transitReport.recommendations.relationships.fallbackAdvice"),areas:[l("transitReport.recommendations.relationships.fallbackArea")]},health:{physical:l("transitReport.recommendations.health.fallbackPhysical"),mental:l("transitReport.recommendations.health.fallbackMental"),emotional:l("transitReport.recommendations.health.fallbackEmotional")},personal:{priorities:[l("transitReport.recommendations.personal.fallbackPriority")],methods:[l("transitReport.recommendations.personal.fallbackMethod")]},financial:{approach:l("transitReport.recommendations.financial.fallbackApproach"),advice:l("transitReport.recommendations.financial.fallbackAdvice"),priority:l("transitReport.recommendations.financial.fallbackPriority")},timing:{bestTiming:l("transitReport.recommendations.timing.fallbackBest"),avoidTiming:l("transitReport.recommendations.timing.fallbackAvoid"),keyDates:l("transitReport.recommendations.timing.fallbackKey")}}}}function m(t,e,n){try{var r=function(t){return(0,a.sC)(t,n)};return{next3Months:r("transitReport.futureOutlook.next3Months"),next6Months:r("transitReport.futureOutlook.next6Months"),nextYear:r("transitReport.futureOutlook.nextYear"),longTerm:D(t,n)}}catch(i){console.error("生成未来展望失败:",i);var s=function(t){return(0,a.sC)(t,n)};return{next3Months:s("transitReport.futureOutlook.fallback3Months"),next6Months:s("transitReport.futureOutlook.fallback6Months"),nextYear:s("transitReport.futureOutlook.fallbackYear"),longTerm:s("transitReport.futureOutlook.fallbackLongTerm")}}}function v(t,e,n){var s=function(t){return(0,a.sC)(t,n)},i=[];return t.forEach((function(t){"土星"===t.transitPlanet?i.push(s("transitReport.themes.responsibility")):"木星"===t.transitPlanet?i.push(s("transitReport.themes.expansion")):"天王星"===t.transitPlanet&&i.push(s("transitReport.themes.innovation"))})),e.forEach((function(t){t.name&&t.name.includes("土星")&&i.push(s("transitReport.themes.maturation"))})),i.length>0?(0,r.A)(new Set(i)).slice(0,4):[s("transitReport.themes.stability")]}function h(t,e,n){var r=function(t){return(0,a.sC)(t,n)},s=t.filter((function(t){return"strong"===t.intensity})).length,i=e.length;return r(s>=3||i>=2?"transitReport.intensity.high":s>=1||i>=1?"transitReport.intensity.medium":"transitReport.intensity.gentle")}function y(t,e){var n=function(t){return(0,a.sC)(t,e)};return{description:"".concat(t.transitPlanet||n("transitReport.aspects.unknown")," ").concat(t.aspect||n("transitReport.aspects.unknown")," ").concat(t.natalPlanet||n("transitReport.aspects.unknown")),orb:(t.orb||0).toFixed(1)}}function f(t,e){var n=function(t){return(0,a.sC)(t,e)};return 0===t.length?n("transitReport.outerPlanets.themes.peaceful"):t.length>=3?n("transitReport.outerPlanets.themes.transformation"):t.some((function(t){return t.planet.includes("土星")}))?n("transitReport.outerPlanets.themes.building"):t.some((function(t){return t.planet.includes("天王星")}))?n("transitReport.outerPlanets.themes.breakthrough"):n("transitReport.outerPlanets.themes.growth")}function k(t,e,n){var r=function(t){return(0,a.sC)(t,n)};return r(e<30?"transitReport.lifeGuidance.focus.foundation":e<45?"transitReport.lifeGuidance.focus.achievement":e<60?"transitReport.lifeGuidance.focus.wisdom":"transitReport.lifeGuidance.focus.legacy")}function g(t,e){var n=function(t){return(0,a.sC)(t,e)},r=t.filter((function(t){return["四分相","square","对分相","opposition"].includes(t.aspect)}));if(r.length>0){var s=r[0];return n("transitReport.lifeGuidance.challenge.specific").replace("{transitPlanet}",s.transitPlanet).replace("{aspect}",s.aspect).replace("{natalPlanet}",s.natalPlanet)}return n("transitReport.lifeGuidance.challenge.peaceful")}function R(t,e){var n=function(t){return(0,a.sC)(t,e)},r=t.filter((function(t){return["三分相","trine","六分相","sextile"].includes(t.aspect)}));if(r.length>0){var s=r[0];return n("transitReport.lifeGuidance.opportunity.specific").replace("{transitPlanet}",s.transitPlanet).replace("{aspect}",s.aspect).replace("{natalPlanet}",s.natalPlanet)}return n("transitReport.lifeGuidance.opportunity.general")}function C(t,e){var n=function(t){return(0,a.sC)(t,e)};return n(t<30?"transitReport.lifeGuidance.spiritual.exploration":t<50?"transitReport.lifeGuidance.spiritual.integration":"transitReport.lifeGuidance.spiritual.transcendence")}function A(t,e,n){var r=function(t){return(0,a.sC)(t,n)};return{focus:r("transitReport.recommendations.career.focus"),advice:r("transitReport.recommendations.career.advice"),timing:r("transitReport.recommendations.career.timing")}}function b(t,e){var n=function(t){return(0,a.sC)(t,e)};return{focus:n("transitReport.recommendations.relationships.focus"),advice:n("transitReport.recommendations.relationships.advice"),areas:[n("transitReport.recommendations.relationships.areas.communication"),n("transitReport.recommendations.relationships.areas.intimacy"),n("transitReport.recommendations.relationships.areas.boundaries")]}}function L(t){var e=function(e){return(0,a.sC)(e,t)};return{physical:e("transitReport.recommendations.health.physical"),mental:e("transitReport.recommendations.health.mental"),emotional:e("transitReport.recommendations.health.emotional")}}function w(t,e,n){var r=function(t){return(0,a.sC)(t,n)};return{priorities:[r("transitReport.recommendations.personal.priorities.awareness"),r("transitReport.recommendations.personal.priorities.skills"),r("transitReport.recommendations.personal.priorities.relationships")],methods:[r("transitReport.recommendations.personal.methods.reflection"),r("transitReport.recommendations.personal.methods.learning"),r("transitReport.recommendations.personal.methods.practice")]}}function _(t,e){var n=function(t){return(0,a.sC)(t,e)};return{approach:n("transitReport.recommendations.financial.approach"),advice:n("transitReport.recommendations.financial.advice"),priority:n("transitReport.recommendations.financial.priority")}}function T(t,e){var n=function(t){return(0,a.sC)(t,e)},r=t.some((function(t){return["四分相","square","对分相","opposition"].includes(t.aspect)}));return{bestTiming:n("transitReport.recommendations.timing.bestTiming"),avoidTiming:n(r?"transitReport.recommendations.timing.avoidHigh":"transitReport.recommendations.timing.avoidNone"),keyDates:n("transitReport.recommendations.timing.keyDates")}}function D(t,e){var n=function(t){return(0,a.sC)(t,e)};return n(t<30?"transitReport.futureOutlook.longTerm.foundation":t<45?"transitReport.futureOutlook.longTerm.development":t<60?"transitReport.futureOutlook.longTerm.experience":"transitReport.futureOutlook.longTerm.wisdom")}function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e||(0,a.UK)(),r=function(t){return(0,a.sC)(t,n)};return{header:{title:r("transitReport.header.title"),user:(null===t||void 0===t?void 0:t.name)||r("transitReport.header.anonymousUser"),age:0,analysisDate:r("transitReport.errors.dateError"),birthDate:r("transitReport.errors.dateError"),birthPlace:(null===t||void 0===t?void 0:t.birthplace)||r("transitReport.header.unknownPlace")},overview:{summary:r("transitReport.errors.analysisError"),phaseDescription:r("transitReport.errors.unknownPhase"),keyThemes:[r("transitReport.errors.reanalysis")],intensity:r("transitReport.errors.unknownIntensity")},majorCycles:[],outerPlanets:{summary:{description:r("transitReport.errors.outerPlanetError")},planets:[],overallTheme:r("transitReport.errors.reanalysisNeeded")},majorAspects:[],lifeGuidance:{primaryFocus:r("transitReport.errors.reanalysis"),currentChallenge:r("transitReport.errors.systemError"),currentOpportunity:r("transitReport.errors.retryLater"),emotionalAdvice:r("transitReport.errors.patience"),practicalAdvice:r("transitReport.errors.checkData"),spiritualAdvice:r("transitReport.errors.trustProcess")},recommendations:{career:{focus:r("transitReport.errors.reanalysisNeeded"),advice:r("transitReport.errors.systemError"),timing:r("transitReport.errors.unknown")},relationships:{focus:r("transitReport.errors.reanalysisNeeded"),advice:r("transitReport.errors.systemError"),areas:[r("transitReport.errors.unknown")]},health:{physical:r("transitReport.errors.stayHealthy"),mental:r("transitReport.errors.stayCalm"),emotional:r("transitReport.errors.bePatient")},personal:{priorities:[r("transitReport.errors.reanalysis")],methods:[r("transitReport.errors.checkData")]},financial:{approach:r("transitReport.errors.beCautious"),advice:r("transitReport.errors.waitForFix"),priority:r("transitReport.errors.dataValidation")},timing:{bestTiming:r("transitReport.errors.retryLater"),avoidTiming:r("transitReport.errors.avoidNow"),keyDates:r("transitReport.errors.waitForFix")}},futureOutlook:{next3Months:r("transitReport.errors.reanalysisNeeded"),next6Months:r("transitReport.errors.waitForFix"),nextYear:r("transitReport.errors.needRecalculation"),longTerm:r("transitReport.errors.contactSupport")}}}},2694:(t,e,n)=>{n.r(e),n.d(e,{ASPECT_CONFIG:()=>c,LIFE_CYCLES:()=>l,PLANET_CYCLES:()=>o,calculateTransitChart:()=>k,generateTransitReport:()=>g});var r=n(8653),a=n(8676),s=n(4119),i=(n(6280),n(6918),n(8706),n(2008),n(1629),n(4423),n(2062),n(4114),n(4782),n(6910),n(1688),n(3288),n(2010),n(8111),n(2489),n(7588),n(1701),n(9868),n(5506),n(9432),n(6099),n(3500),n(8041)),o={sun:{period:365.25,name:"太阳"},moon:{period:29.53,name:"月亮"},mercury:{period:87.97,name:"水星"},venus:{period:224.7,name:"金星"},mars:{period:686.98,name:"火星"},jupiter:{period:4332.59,name:"木星"},saturn:{period:10759.22,name:"土星"},uranus:{period:30688.5,name:"天王星"},neptune:{period:60182,name:"海王星"},pluto:{period:90560,name:"冥王星"}},c={合相:{angle:0,orb:8,intensity:"strong",type:"conjunction"},六分相:{angle:60,orb:4,intensity:"moderate",type:"sextile"},四分相:{angle:90,orb:6,intensity:"strong",type:"square"},三分相:{angle:120,orb:6,intensity:"strong",type:"trine"},对分相:{angle:180,orb:8,intensity:"strong",type:"opposition"}},l={saturn_return_1:{age:29,duration:2,name:"第一次土星回归"},jupiter_return_1:{age:12,duration:1,name:"第一次木星回归"},jupiter_return_2:{age:24,duration:1,name:"第二次木星回归"},jupiter_return_3:{age:36,duration:1,name:"第三次木星回归"},jupiter_return_4:{age:48,duration:1,name:"第四次木星回归"},saturn_opposition:{age:44,duration:2,name:"土星对冲"},saturn_return_2:{age:58,duration:2,name:"第二次土星回归"}};function u(t,e){var n=Math.abs(t-e);return n>180&&(n=360-n),n}function p(t,e,n){return Math.abs(t-e)<=n}function d(t){try{return"number"===typeof t?t:t&&"object"===(0,s.A)(t)?void 0!==t.longitude?t.longitude:(0,i.Y6)(t):(console.warn("无效的位置数据:",t),0)}catch(e){return console.error("度数计算错误:",e,t),0}}function m(t,e){var n=[];try{return Object.keys(e).forEach((function(r){if("ascendant"!==r){var s=e[r],i=d(s);Object.keys(t).forEach((function(e){var l=t[e],m=d(l),v=u(i,m);Object.entries(c).forEach((function(t){var c,u,d=(0,a.A)(t,2),h=d[0],y=d[1];p(v,y.angle,y.orb)&&n.push({transitPlanet:(null===(c=o[r])||void 0===c?void 0:c.name)||r,natalPlanet:(null===(u=o[e])||void 0===u?void 0:u.name)||e,aspect:h,orb:Math.abs(v-y.angle),intensity:y.intensity,type:y.type,applying:i<m,transitSign:s.sign||"未知",natalSign:l.sign||"未知"})}))}))}})),n.sort((function(t,e){return t.orb-e.orb}))}catch(r){return console.error("计算行运相位时出错:",r),[]}}function v(t,e){try{var n=new Date(t).getTime(),s=new Date(e).getTime(),i=(s-n)/315576e5,o=[];return Object.entries(l).forEach((function(t){var e=(0,a.A)(t,2),n=e[0],s=e[1],c=s.age-s.duration/2,l=s.age+s.duration/2;i>=c&&i<=l&&o.push((0,r.A)((0,r.A)({},s),{},{key:n,progress:(i-c)/s.duration}))})),o}catch(c){return console.error("计算生命周期时出错:",c),[]}}function h(t){var e={"月亮-合相":{positive:"情绪和直觉得到强化，是开始新的情感周期的好时机。",challenging:"情绪可能较为强烈，需要学会平衡内在感受。"},"月亮-三分相":{positive:"情感流动顺畅，与他人的关系和谐，直觉力增强。",challenging:"过度依赖情感判断，可能忽略理性分析。"},"月亮-四分相":{positive:"情感挑战促进内在成长，学会处理复杂情绪。",challenging:"情绪波动较大，人际关系可能出现紧张。"},"水星-合相":{positive:"思维敏锐，沟通能力增强，学习新事物的好时机。",challenging:"思绪过于活跃，可能导致焦虑或决策困难。"},"水星-三分相":{positive:"逻辑思维清晰，表达能力强，适合谈判和学习。",challenging:"可能过于理性，忽略情感因素。"},"金星-合相":{positive:"魅力增强，人际关系改善，艺术创造力提升。",challenging:"可能过于注重外表或物质享受。"},"金星-三分相":{positive:"爱情运佳，社交活跃，审美品味提升。",challenging:"可能过于追求和谐，避免必要冲突。"},"土星-合相":{positive:"建立稳固基础，承担重要责任，获得长期成就。",challenging:"压力增大，可能感到限制和负担。"},"土星-三分相":{positive:"通过努力获得稳定成果，责任感增强。",challenging:"可能过于保守，缺乏冒险精神。"},"土星-四分相":{positive:"通过挑战获得成长，建立更强的自律能力。",challenging:"面临重要考验，需要做出艰难决定。"},"天王星-合相":{positive:"突破旧有模式，迎来革命性变化，创新能力强。",challenging:"变化来得突然，可能带来不稳定感。"},"天王星-四分相":{positive:"被迫改变促进个人成长，获得新的自由。",challenging:"面临突发变故，原有计划可能被打乱。"},"海王星-合相":{positive:"精神觉醒，直觉增强，艺术灵感丰富。",challenging:"现实感模糊，可能出现迷惑或逃避。"},"海王星-三分相":{positive:"灵性成长，同理心增强，创造力提升。",challenging:"可能过于理想化，忽视现实问题。"}},n="".concat(t.transitPlanet,"-").concat(t.aspect),r=e[n];if(!r)return"".concat(t.transitPlanet).concat(t.aspect).concat(t.natalPlanet,"：这个相位带来重要的能量交流，容许度").concat(t.orb.toFixed(1),"度。");var a=["三分相","六分相"].includes(t.aspect);return r[a?"positive":"challenging"]}function y(t,e){var n=t.filter((function(t){return["土星","天王星","海王星","冥王星"].includes(t.transitPlanet)})),a={saturn:[],uranus:[],neptune:[],pluto:[]};return n.forEach((function(t){var e={土星:"saturn",天王星:"uranus",海王星:"neptune",冥王星:"pluto"}[t.transitPlanet];e&&a[e].push((0,r.A)((0,r.A)({},t),{},{interpretation:h(t)}))})),(0,r.A)((0,r.A)({},a),{},{summary:f(e)})}function f(t){return t>=42&&t<=46?{phase:"中年转化期",description:"正处于人生的重要转折点，外行星的影响促使您重新评估人生方向和价值观。这是一个深度内省和转化的时期。",keyThemes:["责任与自由的平衡","内在蜕变","事业重新定位","精神觉醒"]}:t>=28&&t<=32?{phase:"成年确立期",description:"土星回归带来成年责任的确立，这是从青年过渡到成熟成年人的关键时期。",keyThemes:["承担责任","建立基础","确立方向","成熟成长"]}:t>=35&&t<=37?{phase:"扩展成长期",description:"木星回归带来新的成长机遇和视野扩展，是追求更高目标的良好时期。",keyThemes:["机遇扩展","视野开阔","学习成长","积极进取"]}:{phase:"稳定发展期",description:"当前处于相对稳定的发展阶段，适合巩固既有成果并为未来做准备。",keyThemes:["稳定发展","积累经验","完善技能","准备机遇"]}}function k(t,e){try{console.log("🌟 开始计算行运盘"),console.log("出生数据:",t),console.log("行运日期:",e),console.log("📍 计算本命盘位置...");var n=(0,i.lc)(t);console.log("本命盘位置:",n),console.log("📍 计算行运盘位置...");var a=(0,r.A)((0,r.A)({},t),{},{fullBirthDateTime:e}),s=(0,i.lc)(a);console.log("行运盘位置:",s);var o=new Date(t.fullBirthDateTime),c=new Date(e),l=(c-o)/315576e5;console.log("当前年龄:",l),console.log("📍 计算相位关系...");var u=m(n,s);console.log("相位关系:",u),console.log("📍 分析生命周期...");var p=v(t.fullBirthDateTime,e);console.log("当前生命周期:",p),console.log("📍 生成外行星分析...");var d=y(u,l);console.log("外行星分析:",d);var h={birthData:t,transitDate:e,age:Math.floor(l),natalPositions:n,transitPositions:s,aspects:u.slice(0,10),currentCycles:p,outerPlanetAnalysis:d,metadata:{calculationTime:(new Date).toISOString(),aspectCount:u.length,majorAspects:u.filter((function(t){return"strong"===t.intensity})).length}};return console.log("✅ 行运盘计算完成"),h}catch(f){throw console.error("❌ 行运盘计算失败:",f),console.error("错误堆栈:",f.stack),new Error("行运盘计算失败: ".concat(f.message))}}function g(t){try{var e=t.age,n=t.aspects,r=t.currentCycles,a=t.outerPlanetAnalysis,s={summary:"".concat(e,"岁的行运分析显示了").concat(n.length,"个重要相位正在发生作用。"),currentPhase:a.summary,majorAspects:n.slice(0,5).map((function(t){return{title:"".concat(t.transitPlanet," ").concat(t.aspect," ").concat(t.natalPlanet),description:h(t),orb:t.orb,intensity:t.intensity}})),lifeCycles:r.map((function(t){return{name:t.name,progress:Math.round(100*t.progress),description:"正在经历".concat(t.name,"，完成度").concat(Math.round(100*t.progress),"%")}})),recommendations:R(t)};return s}catch(i){throw console.error("生成行运报告失败:",i),i}}function R(t){try{var e=t.aspects,n=[],r=e.filter((function(t){return"strong"===t.intensity})).slice(0,3);return r.forEach((function(t){"土星"===t.transitPlanet?n.push({area:"责任与结构",advice:"这是建立长期基础的重要时期，虽然可能面临压力，但坚持下去会有稳固的收获。",timeframe:"未来6-12个月"}):"木星"===t.transitPlanet?n.push({area:"成长与机遇",advice:"积极把握扩展机会，这是学习新技能和拓展视野的良好时机。",timeframe:"未来3-6个月"}):"天王星"===t.transitPlanet&&n.push({area:"变化与创新",advice:"拥抱变化，不要抗拒突如其来的转变，它们可能带来意想不到的机遇。",timeframe:"未来1-2年"})})),n}catch(a){return console.error("生成建议失败:",a),[]}}},2954:(t,e,n)=>{n.r(e),n.d(e,{default:()=>Ee});n(2675),n(9463),n(2010);var r=n(6768),a=n(4232),s=n(5130),i={class:"transit-analysis-container"},o={class:"header"},c={class:"title"},l={class:"subtitle"},u={class:"analysis-content"},p={key:0,class:"date-selection-section"},d={class:"selection-card"},m={class:"section-title"},v={class:"date-options"},h={class:"quick-options"},y={class:"quick-buttons"},f={class:"custom-date"},k={class:"date-inputs"},g={class:"input-group"},R=["min","max"],C={class:"input-group"},A={key:0,class:"analysis-preview"},b={class:"preview-info"},L={class:"action-buttons"},w=["disabled"],_={key:1,class:"analysis-results"},T={class:"report-header"},D={class:"user-info"},E={class:"basic-info"},P={class:"analysis-meta"},$={class:"overview-section"},X={class:"section-title"},j={class:"overview-card"},x={class:"summary"},O={class:"main-summary"},S={class:"phase-description"},F={class:"key-themes"},Q={class:"theme-tags"},M={key:0,class:"life-cycles-section"},G={class:"section-title"},Y={class:"cycles-grid"},I={class:"cycle-header"},N={class:"progress-indicator"},B={class:"progress-bar"},q={class:"progress-text"},K={class:"cycle-description"},W={key:0,class:"cycle-themes"},z={key:1,class:"cycle-advice"},U={key:1,class:"outer-planets-section"},H={class:"section-title"},V={class:"overall-theme"},J={class:"planets-grid"},Z={class:"planet-header"},tt={class:"planet-theme"},et={class:"planet-description"},nt={key:0,class:"planet-aspects"},rt={class:"aspects-list"},at={class:"aspect-name"},st={class:"aspect-orb"},it={class:"planet-advice"},ot={key:2,class:"major-aspects-section"},ct={class:"section-title"},lt={class:"aspects-list"},ut={class:"aspect-header"},pt={class:"aspect-meta"},dt={class:"orb-info"},mt={key:0,class:"direction-info"},vt={key:1,class:"timeframe-info"},ht={class:"aspect-description"},yt={key:0,class:"aspect-keywords"},ft={key:1,class:"aspect-advice"},kt={key:3,class:"life-guidance-section"},gt={class:"section-title"},Rt={class:"guidance-grid"},Ct={class:"guidance-card"},At={class:"guidance-card challenge"},bt={class:"guidance-card opportunity"},Lt={class:"advice-sections"},wt={class:"advice-card"},_t={class:"advice-card"},Tt={class:"advice-card"},Dt={key:4,class:"recommendations-section"},Et={class:"section-title"},Pt={class:"recommendations-tabs"},$t=["onClick"],Xt={class:"tab-content"},jt={key:0,class:"recommendation-content"},xt={key:0},Ot={key:1},St={key:2},Ft={key:1,class:"recommendation-content"},Qt={key:0},Mt={key:1},Gt={key:2,class:"focus-areas"},Yt={key:2,class:"recommendation-content"},It={key:0,class:"health-aspects"},Nt={key:0,class:"health-item"},Bt={key:1,class:"health-item"},qt={key:2,class:"health-item"},Kt={key:3,class:"recommendation-content"},Wt={key:0,class:"priorities"},zt={key:1,class:"methods"},Ut={key:4,class:"recommendation-content"},Ht={key:0},Vt={key:1},Jt={key:2},Zt={key:5,class:"recommendation-content"},te={key:0,class:"timing-info"},ee={key:0,class:"timing-item positive"},ne={key:1,class:"timing-item caution"},re={key:2,class:"timing-item neutral"},ae={key:5,class:"future-outlook-section"},se={class:"section-title"},ie={class:"outlook-timeline"},oe={key:0,class:"timeline-item"},ce={key:1,class:"timeline-item"},le={key:2,class:"timeline-item"},ue={key:3,class:"timeline-item"},pe={class:"action-section"},de={key:2,class:"loading-section"},me={class:"loading-content"},ve={class:"loading-steps"},he={class:"footer"};function ye(t,e,n,ye,fe,ke){var ge=(0,r.g2)("LanguageSwitcher");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.bF)(ge,{onLanguageChanged:ke.onLanguageChanged,compact:ke.isMobile,theme:"light"},null,8,["onLanguageChanged","compact"]),(0,r.Lk)("header",o,[(0,r.Lk)("h1",c,(0,a.v_)(t.$t("transitAnalysis.title")),1),(0,r.Lk)("p",l,(0,a.v_)(t.$t("transitAnalysis.subtitle")),1)]),(0,r.Lk)("div",u,[ye.transitReport?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("section",p,[(0,r.Lk)("div",d,[(0,r.Lk)("h2",m,(0,a.v_)(t.$t("transitAnalysis.selectDate")),1),(0,r.Lk)("div",v,[(0,r.Lk)("div",h,[(0,r.Lk)("h3",null,(0,a.v_)(t.$t("transitAnalysis.quickSelect")),1),(0,r.Lk)("div",y,[(0,r.Lk)("button",{onClick:e[0]||(e[0]=function(){return ke.selectToday&&ke.selectToday.apply(ke,arguments)}),class:(0,a.C4)(["quick-btn",{current:ke.isToday}])},(0,a.v_)(t.$t("transitAnalysis.today")),3),(0,r.Lk)("button",{onClick:e[1]||(e[1]=function(){return ke.selectBirthday&&ke.selectBirthday.apply(ke,arguments)}),class:(0,a.C4)(["quick-btn",{current:ke.isBirthday}])},(0,a.v_)(t.$t("transitAnalysis.birthday")),3),(0,r.Lk)("button",{onClick:e[2]||(e[2]=function(){return ke.selectNewYear&&ke.selectNewYear.apply(ke,arguments)}),class:(0,a.C4)(["quick-btn",{current:ke.isNewYear}])},(0,a.v_)(t.$t("transitAnalysis.newYear")),3)])]),(0,r.Lk)("div",f,[(0,r.Lk)("h3",null,(0,a.v_)(t.$t("transitAnalysis.customDate")),1),(0,r.Lk)("div",k,[(0,r.Lk)("div",g,[(0,r.Lk)("label",null,(0,a.v_)(t.$t("transitAnalysis.analysisDate")),1),(0,r.bo)((0,r.Lk)("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=function(t){return ye.selectedDate=t}),min:ye.minDate,max:ye.maxDate},null,8,R),[[s.Jo,ye.selectedDate]])]),(0,r.Lk)("div",C,[(0,r.Lk)("label",null,(0,a.v_)(t.$t("transitAnalysis.analysisTime")),1),(0,r.bo)((0,r.Lk)("input",{type:"time","onUpdate:modelValue":e[4]||(e[4]=function(t){return ye.selectedTime=t})},null,512),[[s.Jo,ye.selectedTime]])])])])]),ye.selectedDate?((0,r.uX)(),(0,r.CE)("div",A,[(0,r.Lk)("h3",null,(0,a.v_)(t.$t("transitAnalysis.preview")),1),(0,r.Lk)("div",b,[(0,r.Lk)("p",null,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.previewDate"))+":",1),(0,r.eW)(" "+(0,a.v_)(ye.formatSelectedDate),1)]),(0,r.Lk)("p",null,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.ageAtTime"))+":",1),(0,r.eW)(" "+(0,a.v_)(ke.calculatedAge)+(0,a.v_)(t.$t("transitAnalysis.yearsOld")),1)]),(0,r.Lk)("p",null,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.daysToBirthday"))+":",1),(0,r.eW)(" "+(0,a.v_)(ke.daysToBirthday)+(0,a.v_)(t.$t("transitAnalysis.days")),1)])])])):(0,r.Q3)("",!0),(0,r.Lk)("div",L,[(0,r.Lk)("button",{onClick:e[5]||(e[5]=function(){return ke.startAnalysis&&ke.startAnalysis.apply(ke,arguments)}),disabled:!ye.selectedDate||ye.isAnalyzing,class:"analyze-btn"},(0,a.v_)(ye.isAnalyzing?t.$t("transitAnalysis.analyzing"):t.$t("transitAnalysis.startAnalysis")),9,w),(0,r.Lk)("button",{onClick:e[6]||(e[6]=function(){return ke.goBack&&ke.goBack.apply(ke,arguments)}),class:"back-btn"},(0,a.v_)(t.$t("common.back")),1)])])])),ye.transitReport&&!ye.isAnalyzing?((0,r.uX)(),(0,r.CE)("section",_,[(0,r.Lk)("div",T,[(0,r.Lk)("div",D,[(0,r.Lk)("h2",null,(0,a.v_)(t.userData.name)+(0,a.v_)(t.$t("transitAnalysis.reportTitle")),1),(0,r.Lk)("div",E,[(0,r.Lk)("span",null,(0,a.v_)(t.$t("transitAnalysis.previewDate"))+": "+(0,a.v_)(ye.formatAnalysisDate),1),(0,r.Lk)("span",null,(0,a.v_)(t.$t("transitAnalysis.age"))+": "+(0,a.v_)(ye.transitReport.header.age)+(0,a.v_)(t.$t("transitAnalysis.yearsOld")),1),(0,r.Lk)("span",null,(0,a.v_)(t.$t("transitAnalysis.birthPlace"))+": "+(0,a.v_)(ye.transitReport.header.birthPlace),1)])]),(0,r.Lk)("div",P,[(0,r.Lk)("span",{class:(0,a.C4)(["intensity-badge",ye.intensityClass])},(0,a.v_)(ke.getIntensityText(ye.transitReport.overview.intensity)),3)])]),(0,r.Lk)("div",$,[(0,r.Lk)("h3",X,(0,a.v_)(t.$t("transitAnalysis.overview")),1),(0,r.Lk)("div",j,[(0,r.Lk)("div",x,[(0,r.Lk)("p",O,(0,a.v_)(ye.transitReport.overview.summary),1),(0,r.Lk)("p",S,(0,a.v_)(ye.transitReport.overview.phaseDescription),1)]),(0,r.Lk)("div",F,[(0,r.Lk)("h4",null,(0,a.v_)(t.$t("transitAnalysis.keyThemes")),1),(0,r.Lk)("div",Q,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(ye.transitReport.overview.keyThemes,(function(t){return(0,r.uX)(),(0,r.CE)("span",{key:t,class:"theme-tag"},(0,a.v_)(t),1)})),128))])])])]),ye.transitReport.majorCycles&&ye.transitReport.majorCycles.length>0?((0,r.uX)(),(0,r.CE)("div",M,[(0,r.Lk)("h3",G,(0,a.v_)(t.$t("transitAnalysis.lifeCycles")),1),(0,r.Lk)("div",Y,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(ye.transitReport.majorCycles,(function(e){return(0,r.uX)(),(0,r.CE)("div",{key:e.name,class:"cycle-card"},[(0,r.Lk)("div",I,[(0,r.Lk)("h4",null,(0,a.v_)(e.name),1),(0,r.Lk)("div",N,[(0,r.Lk)("div",B,[(0,r.Lk)("div",{class:"progress-fill",style:(0,a.Tr)({width:e.progress+"%"})},null,4)]),(0,r.Lk)("span",q,(0,a.v_)(e.progress)+"% - "+(0,a.v_)(e.phase),1)])]),(0,r.Lk)("p",K,(0,a.v_)(e.description),1),e.themes?((0,r.uX)(),(0,r.CE)("div",W,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.themes,(function(t){return(0,r.uX)(),(0,r.CE)("span",{key:t,class:"cycle-theme"},(0,a.v_)(t),1)})),128))])):(0,r.Q3)("",!0),e.advice?((0,r.uX)(),(0,r.CE)("div",z,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.advice"))+":",1),(0,r.eW)(" "+(0,a.v_)(e.advice),1)])):(0,r.Q3)("",!0)])})),128))])])):(0,r.Q3)("",!0),ye.transitReport.outerPlanets&&ye.transitReport.outerPlanets.planets.length>0?((0,r.uX)(),(0,r.CE)("div",U,[(0,r.Lk)("h3",H,(0,a.v_)(t.$t("transitAnalysis.outerPlanetsInfluence")),1),(0,r.Lk)("div",V,[(0,r.Lk)("h4",null,(0,a.v_)(t.$t("transitAnalysis.overallTheme"))+": "+(0,a.v_)(ye.transitReport.outerPlanets.overallTheme),1),(0,r.Lk)("p",null,(0,a.v_)(ye.transitReport.outerPlanets.summary.description),1)]),(0,r.Lk)("div",J,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(ye.transitReport.outerPlanets.planets,(function(e){return(0,r.uX)(),(0,r.CE)("div",{key:e.planet,class:"planet-card"},[(0,r.Lk)("div",Z,[(0,r.Lk)("h4",null,(0,a.v_)(e.planet)+(0,a.v_)(t.$t("transitAnalysis.planetInfluence")),1),(0,r.Lk)("span",tt,(0,a.v_)(e.theme),1)]),(0,r.Lk)("p",et,(0,a.v_)(e.description),1),e.aspects&&e.aspects.length>0?((0,r.uX)(),(0,r.CE)("div",nt,[(0,r.Lk)("h5",null,(0,a.v_)(t.$t("transitAnalysis.relatedAspects")),1),(0,r.Lk)("div",rt,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.aspects,(function(t){return(0,r.uX)(),(0,r.CE)("div",{key:t.description,class:"aspect-item"},[(0,r.Lk)("span",at,(0,a.v_)(t.description),1),(0,r.Lk)("span",st,(0,a.v_)(t.orb)+"°",1)])})),128))])])):(0,r.Q3)("",!0),(0,r.Lk)("div",it,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.guidanceAdvice"))+":",1),(0,r.eW)(" "+(0,a.v_)(e.advice),1)])])})),128))])])):(0,r.Q3)("",!0),ye.transitReport.majorAspects&&ye.transitReport.majorAspects.length>0?((0,r.uX)(),(0,r.CE)("div",ot,[(0,r.Lk)("h3",ct,(0,a.v_)(t.$t("transitAnalysis.majorTransitAspects")),1),(0,r.Lk)("div",lt,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(ye.transitReport.majorAspects,(function(e){return(0,r.uX)(),(0,r.CE)("div",{key:e.title,class:(0,a.C4)(["aspect-card",ke.intensityAspectClass(e.intensity)])},[(0,r.Lk)("div",ut,[(0,r.Lk)("h4",null,(0,a.v_)(e.title),1),(0,r.Lk)("div",pt,[(0,r.Lk)("span",dt,(0,a.v_)(t.$t("transitAnalysis.orb"))+": "+(0,a.v_)(e.orb)+"°",1),e.direction?((0,r.uX)(),(0,r.CE)("span",mt,(0,a.v_)(e.direction),1)):(0,r.Q3)("",!0),e.timeframe?((0,r.uX)(),(0,r.CE)("span",vt,(0,a.v_)(e.timeframe),1)):(0,r.Q3)("",!0)])]),(0,r.Lk)("p",ht,(0,a.v_)(e.description),1),e.keywords&&e.keywords.length>0?((0,r.uX)(),(0,r.CE)("div",yt,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.keywords,(function(t){return(0,r.uX)(),(0,r.CE)("span",{key:t,class:"keyword-tag"},(0,a.v_)(t),1)})),128))])):(0,r.Q3)("",!0),e.advice?((0,r.uX)(),(0,r.CE)("div",ft,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.advice"))+":",1),(0,r.eW)(" "+(0,a.v_)(e.advice),1)])):(0,r.Q3)("",!0)],2)})),128))])])):(0,r.Q3)("",!0),ye.transitReport.lifeGuidance?((0,r.uX)(),(0,r.CE)("div",kt,[(0,r.Lk)("h3",gt,(0,a.v_)(t.$t("transitAnalysis.lifeGuidanceAdvice")),1),(0,r.Lk)("div",Rt,[(0,r.Lk)("div",Ct,[(0,r.Lk)("h4",null,(0,a.v_)(t.$t("transitAnalysis.currentFocus")),1),(0,r.Lk)("p",null,(0,a.v_)(ye.transitReport.lifeGuidance.primaryFocus),1)]),(0,r.Lk)("div",At,[(0,r.Lk)("h4",null,(0,a.v_)(t.$t("transitAnalysis.mainChallenge")),1),(0,r.Lk)("p",null,(0,a.v_)(ye.transitReport.lifeGuidance.currentChallenge),1)]),(0,r.Lk)("div",bt,[(0,r.Lk)("h4",null,(0,a.v_)(t.$t("transitAnalysis.importantOpportunity")),1),(0,r.Lk)("p",null,(0,a.v_)(ye.transitReport.lifeGuidance.currentOpportunity),1)])]),(0,r.Lk)("div",Lt,[(0,r.Lk)("div",wt,[(0,r.Lk)("h4",null,(0,a.v_)(t.$t("transitAnalysis.emotionalAdvice")),1),(0,r.Lk)("p",null,(0,a.v_)(ye.transitReport.lifeGuidance.emotionalAdvice),1)]),(0,r.Lk)("div",_t,[(0,r.Lk)("h4",null,(0,a.v_)(t.$t("transitAnalysis.practicalAdvice")),1),(0,r.Lk)("p",null,(0,a.v_)(ye.transitReport.lifeGuidance.practicalAdvice),1)]),(0,r.Lk)("div",Tt,[(0,r.Lk)("h4",null,(0,a.v_)(t.$t("transitAnalysis.spiritualAdvice")),1),(0,r.Lk)("p",null,(0,a.v_)(ye.transitReport.lifeGuidance.spiritualAdvice),1)])])])):(0,r.Q3)("",!0),ye.transitReport.recommendations?((0,r.uX)(),(0,r.CE)("div",Dt,[(0,r.Lk)("h3",Et,(0,a.v_)(t.$t("transitAnalysis.detailedRecommendations")),1),(0,r.Lk)("div",Pt,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(ye.recommendationTabs,(function(e,n){return(0,r.uX)(),(0,r.CE)("button",{key:n,onClick:function(t){return ye.activeTab=n},class:(0,a.C4)([{active:ye.activeTab===n},"tab-button"])},(0,a.v_)(t.$t(e.name)),11,$t)})),128))]),(0,r.Lk)("div",Xt,["career"===ye.activeTab?((0,r.uX)(),(0,r.CE)("div",jt,[ye.transitReport.recommendations.career.focus?((0,r.uX)(),(0,r.CE)("h4",xt,(0,a.v_)(ye.transitReport.recommendations.career.focus),1)):(0,r.Q3)("",!0),ye.transitReport.recommendations.career.advice?((0,r.uX)(),(0,r.CE)("p",Ot,(0,a.v_)(ye.transitReport.recommendations.career.advice),1)):(0,r.Q3)("",!0),ye.transitReport.recommendations.career.timing?((0,r.uX)(),(0,r.CE)("p",St,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.timeframe"))+":",1),(0,r.eW)(" "+(0,a.v_)(ye.transitReport.recommendations.career.timing),1)])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),"relationships"===ye.activeTab?((0,r.uX)(),(0,r.CE)("div",Ft,[ye.transitReport.recommendations.relationships.focus?((0,r.uX)(),(0,r.CE)("h4",Qt,(0,a.v_)(ye.transitReport.recommendations.relationships.focus),1)):(0,r.Q3)("",!0),ye.transitReport.recommendations.relationships.advice?((0,r.uX)(),(0,r.CE)("p",Mt,(0,a.v_)(ye.transitReport.recommendations.relationships.advice),1)):(0,r.Q3)("",!0),ye.transitReport.recommendations.relationships.areas?((0,r.uX)(),(0,r.CE)("div",Gt,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.focusAreas"))+":",1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(ye.transitReport.recommendations.relationships.areas,(function(t){return(0,r.uX)(),(0,r.CE)("span",{key:t,class:"area-tag"},(0,a.v_)(t),1)})),128))])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),"health"===ye.activeTab?((0,r.uX)(),(0,r.CE)("div",Yt,[ye.transitReport.recommendations.health?((0,r.uX)(),(0,r.CE)("div",It,[ye.transitReport.recommendations.health.physical?((0,r.uX)(),(0,r.CE)("div",Nt,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.physicalHealth"))+":",1),(0,r.eW)(" "+(0,a.v_)(ye.transitReport.recommendations.health.physical),1)])):(0,r.Q3)("",!0),ye.transitReport.recommendations.health.mental?((0,r.uX)(),(0,r.CE)("div",Bt,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.mentalHealth"))+":",1),(0,r.eW)(" "+(0,a.v_)(ye.transitReport.recommendations.health.mental),1)])):(0,r.Q3)("",!0),ye.transitReport.recommendations.health.emotional?((0,r.uX)(),(0,r.CE)("div",qt,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.emotionalHealth"))+":",1),(0,r.eW)(" "+(0,a.v_)(ye.transitReport.recommendations.health.emotional),1)])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),"personal"===ye.activeTab?((0,r.uX)(),(0,r.CE)("div",Kt,[(0,r.Lk)("h4",null,(0,a.v_)(t.$t("transitAnalysis.personalGrowthFocus")),1),ye.transitReport.recommendations.personal.priorities?((0,r.uX)(),(0,r.CE)("div",Wt,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.priorityDevelopment"))+":",1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(ye.transitReport.recommendations.personal.priorities,(function(t){return(0,r.uX)(),(0,r.CE)("span",{key:t,class:"priority-tag"},(0,a.v_)(t),1)})),128))])):(0,r.Q3)("",!0),ye.transitReport.recommendations.personal.methods?((0,r.uX)(),(0,r.CE)("div",zt,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.recommendedMethods"))+":",1),(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(ye.transitReport.recommendations.personal.methods,(function(t){return(0,r.uX)(),(0,r.CE)("li",{key:t},(0,a.v_)(t),1)})),128))])])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),"financial"===ye.activeTab?((0,r.uX)(),(0,r.CE)("div",Ut,[ye.transitReport.recommendations.financial.priority?((0,r.uX)(),(0,r.CE)("h4",Ht,(0,a.v_)(ye.transitReport.recommendations.financial.priority),1)):(0,r.Q3)("",!0),ye.transitReport.recommendations.financial.approach?((0,r.uX)(),(0,r.CE)("p",Vt,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.approach"))+":",1),(0,r.eW)(" "+(0,a.v_)(ye.transitReport.recommendations.financial.approach),1)])):(0,r.Q3)("",!0),ye.transitReport.recommendations.financial.advice?((0,r.uX)(),(0,r.CE)("p",Jt,(0,a.v_)(ye.transitReport.recommendations.financial.advice),1)):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),"timing"===ye.activeTab?((0,r.uX)(),(0,r.CE)("div",Zt,[ye.transitReport.recommendations.timing?((0,r.uX)(),(0,r.CE)("div",te,[ye.transitReport.recommendations.timing.bestTiming?((0,r.uX)(),(0,r.CE)("div",ee,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.bestTiming"))+":",1),(0,r.eW)(" "+(0,a.v_)(ye.transitReport.recommendations.timing.bestTiming),1)])):(0,r.Q3)("",!0),ye.transitReport.recommendations.timing.avoidTiming?((0,r.uX)(),(0,r.CE)("div",ne,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.cautionPeriod"))+":",1),(0,r.eW)(" "+(0,a.v_)(ye.transitReport.recommendations.timing.avoidTiming),1)])):(0,r.Q3)("",!0),ye.transitReport.recommendations.timing.keyDates?((0,r.uX)(),(0,r.CE)("div",re,[(0,r.Lk)("strong",null,(0,a.v_)(t.$t("transitAnalysis.keyDates"))+":",1),(0,r.eW)(" "+(0,a.v_)(ye.transitReport.recommendations.timing.keyDates),1)])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0),ye.transitReport.futureOutlook?((0,r.uX)(),(0,r.CE)("div",ae,[(0,r.Lk)("h3",se,(0,a.v_)(t.$t("transitAnalysis.futureOutlook")),1),(0,r.Lk)("div",ie,[ye.transitReport.futureOutlook.next3Months?((0,r.uX)(),(0,r.CE)("div",oe,[(0,r.Lk)("h4",null,(0,a.v_)(t.$t("transitAnalysis.next3Months")),1),(0,r.Lk)("p",null,(0,a.v_)(ye.transitReport.futureOutlook.next3Months),1)])):(0,r.Q3)("",!0),ye.transitReport.futureOutlook.next6Months?((0,r.uX)(),(0,r.CE)("div",ce,[(0,r.Lk)("h4",null,(0,a.v_)(t.$t("transitAnalysis.next6Months")),1),(0,r.Lk)("p",null,(0,a.v_)(ye.transitReport.futureOutlook.next6Months),1)])):(0,r.Q3)("",!0),ye.transitReport.futureOutlook.nextYear?((0,r.uX)(),(0,r.CE)("div",le,[(0,r.Lk)("h4",null,(0,a.v_)(t.$t("transitAnalysis.nextYearOutlook")),1),(0,r.Lk)("p",null,(0,a.v_)(ye.transitReport.futureOutlook.nextYear),1)])):(0,r.Q3)("",!0),ye.transitReport.futureOutlook.longTerm?((0,r.uX)(),(0,r.CE)("div",ue,[(0,r.Lk)("h4",null,(0,a.v_)(t.$t("transitAnalysis.longTermDevelopment")),1),(0,r.Lk)("p",null,(0,a.v_)(ye.transitReport.futureOutlook.longTerm),1)])):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0),(0,r.Lk)("div",pe,[(0,r.Lk)("button",{onClick:e[7]||(e[7]=function(){return ke.generateNewAnalysis&&ke.generateNewAnalysis.apply(ke,arguments)}),class:"secondary-btn"},(0,a.v_)(t.$t("transitAnalysis.reanalyze")),1),(0,r.Lk)("button",{onClick:e[8]||(e[8]=function(){return ke.shareReport&&ke.shareReport.apply(ke,arguments)}),class:"primary-btn"},(0,a.v_)(t.$t("transitAnalysis.shareReport")),1),(0,r.Lk)("button",{onClick:e[9]||(e[9]=function(){return ke.goBack&&ke.goBack.apply(ke,arguments)}),class:"secondary-btn"},(0,a.v_)(t.$t("transitAnalysis.returnHome")),1)])])):(0,r.Q3)("",!0),ye.isAnalyzing?((0,r.uX)(),(0,r.CE)("div",de,[(0,r.Lk)("div",me,[e[10]||(e[10]=(0,r.Lk)("div",{class:"spinner"},null,-1)),(0,r.Lk)("h3",null,(0,a.v_)(t.$t("transitAnalysis.analyzingYourTransit")),1),(0,r.Lk)("p",null,(0,a.v_)(t.$t("transitAnalysis.calculatingPlanets")),1),(0,r.Lk)("div",ve,[(0,r.Lk)("div",{class:(0,a.C4)(["step",{active:ye.loadingStep>=1}])},(0,a.v_)(t.$t("transitAnalysis.step1")),3),(0,r.Lk)("div",{class:(0,a.C4)(["step",{active:ye.loadingStep>=2}])},(0,a.v_)(t.$t("transitAnalysis.step2")),3),(0,r.Lk)("div",{class:(0,a.C4)(["step",{active:ye.loadingStep>=3}])},(0,a.v_)(t.$t("transitAnalysis.step3")),3)])])])):(0,r.Q3)("",!0)]),(0,r.Lk)("footer",he,[(0,r.Lk)("p",null,(0,a.v_)(t.$t("footer.copyright")),1)])])}var fe=n(4048),ke=n(388),ge=n(8653),Re=(n(8706),n(4114),n(1688),n(3288),n(6099),n(6031),n(144)),Ce=n(782),Ae=n(426),be=n(272),Le=n(2694),we=n(1599);const _e={name:"TransitAnalysisPage",mixins:[be.A],components:{LanguageSwitcher:Ae.A},setup:function(){var t=(0,Re.KR)(""),e=(0,Re.KR)("12:00"),n=(0,Re.KR)(!1),a=(0,Re.KR)(null),s=(0,Re.KR)(0),i=(0,Re.KR)("career"),o={career:{name:"transitAnalysis.tabs.career"},relationships:{name:"transitAnalysis.tabs.relationships"},health:{name:"transitAnalysis.tabs.health"},personal:{name:"transitAnalysis.tabs.personal"},financial:{name:"transitAnalysis.tabs.financial"},timing:{name:"transitAnalysis.tabs.timing"}},c=(new Date).toISOString().split("T")[0],l=(0,r.EW)((function(){var t=new Date;return t.setFullYear(t.getFullYear()-1),t.toISOString().split("T")[0]})),u=(0,r.EW)((function(){var t=new Date;return t.setFullYear(t.getFullYear()+1),t.toISOString().split("T")[0]})),p=(0,r.EW)((function(){if(!t.value)return"";var e=new Date(t.value);return"".concat(e.getFullYear(),"年").concat(e.getMonth()+1,"月").concat(e.getDate(),"日")})),d=(0,r.EW)((function(){return a.value?a.value.header.analysisDate:""})),m=(0,r.EW)((function(){if(!a.value)return"";var t=a.value.overview.intensity;return{"intensity-high":"高强度"===t||"high"===t,"intensity-medium":"中等强度"===t||"medium"===t,"intensity-low":"温和强度"===t||"low"===t}}));return(0,r.sV)((function(){t.value=c})),{selectedDate:t,selectedTime:e,isAnalyzing:n,transitReport:a,loadingStep:s,activeTab:i,recommendationTabs:o,today:c,minDate:l,maxDate:u,formatSelectedDate:p,formatAnalysisDate:d,intensityClass:m}},computed:(0,ge.A)((0,ge.A)({},(0,Ce.L8)({userData:"getUserData"})),{},{calculatedAge:function(){if(!this.selectedDate||!this.userData)return 0;var t=new Date(this.userData.fullBirthDateTime),e=new Date(this.selectedDate),n=e-t;return Math.floor(n/315576e5)},daysToBirthday:function(){if(!this.selectedDate||!this.userData)return 0;var t=new Date(this.userData.fullBirthDateTime),e=new Date(this.selectedDate),n=new Date(e.getFullYear(),t.getMonth(),t.getDate());n<e&&n.setFullYear(e.getFullYear()+1);var r=n-e;return Math.ceil(r/864e5)},isToday:function(){return this.selectedDate===this.today},isBirthday:function(){if(!this.userData||!this.selectedDate)return!1;var t=new Date(this.userData.fullBirthDateTime),e=new Date(this.selectedDate);return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},isNewYear:function(){if(!this.selectedDate)return!1;var t=new Date(this.selectedDate);return 0===t.getMonth()&&1===t.getDate()},isMobile:function(){return window.innerWidth<=768}}),methods:{onLanguageChanged:function(t){console.log("Language changed to:",t),this.$forceUpdate()},selectToday:function(){this.selectedDate=this.today,this.selectedTime="12:00"},selectBirthday:function(){if(this.userData){var t=new Date(this.userData.fullBirthDateTime),e=(new Date).getFullYear(),n=new Date(e,t.getMonth(),t.getDate());n<new Date&&n.setFullYear(e+1),this.selectedDate=n.toISOString().split("T")[0],this.selectedTime=t.toTimeString().substring(0,5)}},selectNewYear:function(){var t=(new Date).getFullYear()+1;this.selectedDate="".concat(t,"-01-01"),this.selectedTime="00:00"},startAnalysis:function(){var t=this;return(0,ke.A)((0,fe.A)().mark((function e(){var n,r,a;return(0,fe.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.userData&&t.selectedDate){e.next=2;break}return e.abrupt("return");case 2:return t.isAnalyzing=!0,t.loadingStep=0,e.prev=4,t.loadingStep=1,e.next=8,t.delay(1e3);case 8:return n="".concat(t.selectedDate,"T").concat(t.selectedTime,":00"),t.loadingStep=2,e.next=12,t.delay(1e3);case 12:return r=(0,Le.calculateTransitChart)(t.userData,n),t.loadingStep=3,e.next=16,t.delay(1e3);case 16:a=(0,we.generateDetailedTransitReport)(r,t.userData),t.transitReport=a,e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](4),console.error("行运分析失败:",e.t0),alert(t.$t("transitAnalysis.analysisError"));case 24:return e.prev=24,t.isAnalyzing=!1,t.loadingStep=0,e.finish(24);case 28:case"end":return e.stop()}}),e,null,[[4,20,24,28]])})))()},intensityAspectClass:function(t){return{"aspect-strong":"strong"===t||"強烈"===t,"aspect-moderate":"moderate"===t||"中等"===t,"aspect-weak":!t||"weak"===t||"微弱"===t}},getIntensityText:function(t){return"高强度"===t||"high"===t?this.$t("transitAnalysis.intensity.high"):"中等强度"===t||"medium"===t?this.$t("transitAnalysis.intensity.medium"):"温和强度"===t||"low"===t?this.$t("transitAnalysis.intensity.low"):this.$t("transitAnalysis.intensity.medium")},generateNewAnalysis:function(){this.transitReport=null},shareReport:function(){var t=this;navigator.share?navigator.share({title:this.$t("transitAnalysis.shareTitle"),text:"".concat(this.userData.name).concat(this.$t("transitAnalysis.shareText")),url:window.location.href})["catch"](console.error):navigator.clipboard.writeText(window.location.href).then((function(){return alert(t.$t("transitAnalysis.linkCopied"))}))["catch"]((function(){return alert(t.$t("transitAnalysis.copyManually"))}))},goBack:function(){window.history.length>1?this.$router.go(-1):this.$router.push({name:"home"})},delay:function(t){return new Promise((function(e){return setTimeout(e,t)}))}},created:function(){this.userData||this.$router.push({name:"home"})}};var Te=n(1241);const De=(0,Te.A)(_e,[["render",ye],["__scopeId","data-v-6dfd77d6"]]),Ee=De},9868:(t,e,n)=>{var r=n(6518),a=n(9504),s=n(1291),i=n(1240),o=n(2333),c=n(9039),l=RangeError,u=String,p=Math.floor,d=a(o),m=a("".slice),v=a(1..toFixed),h=function(t,e,n){return 0===e?n:e%2===1?h(t,e-1,n*t):h(t*t,e/2,n)},y=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},f=function(t,e,n){var r=-1,a=n;while(++r<6)a+=e*t[r],t[r]=a%1e7,a=p(a/1e7)},k=function(t,e){var n=6,r=0;while(--n>=0)r+=t[n],t[n]=p(r/e),r=r%e*1e7},g=function(t){var e=6,n="";while(--e>=0)if(""!==n||0===e||0!==t[e]){var r=u(t[e]);n=""===n?r:n+d("0",7-r.length)+r}return n},R=c((function(){return"0.000"!==v(8e-5,3)||"1"!==v(.9,0)||"1.25"!==v(1.255,2)||"1000000000000000128"!==v(0xde0b6b3a7640080,0)}))||!c((function(){v({})}));r({target:"Number",proto:!0,forced:R},{toFixed:function(t){var e,n,r,a,o=i(this),c=s(t),p=[0,0,0,0,0,0],v="",R="0";if(c<0||c>20)throw new l("Incorrect fraction digits");if(o!==o)return"NaN";if(o<=-1e21||o>=1e21)return u(o);if(o<0&&(v="-",o=-o),o>1e-21)if(e=y(o*h(2,69,1))-69,n=e<0?o*h(2,-e,1):o/h(2,e,1),n*=4503599627370496,e=52-e,e>0){f(p,0,n),r=c;while(r>=7)f(p,1e7,0),r-=7;f(p,h(10,r,1),0),r=e-1;while(r>=23)k(p,1<<23),r-=23;k(p,1<<r),f(p,1,1),k(p,2),R=g(p)}else f(p,0,n),f(p,1<<-e,0),R=g(p)+d("0",c);return c>0?(a=R.length,R=v+(a<=c?"0."+d("0",c-a)+R:m(R,0,a-c)+"."+m(R,a-c))):R=v+R,R}})}}]);
//# sourceMappingURL=954.79809034.js.map