(()=>{"use strict";var t={3307:(t,e,n)=>{n.d(e,{lc:()=>S,Y6:()=>A,RV:()=>R,C2:()=>l});var r=n(8653),a=n(9258),i=(n(2008),n(4423),n(5276),n(3288),n(6099),n(1415),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(1699),n(7764),n(2953),n(8676)),o=(n(113),n(1629),n(4114),n(6910),n(8111),n(116),n(7588),n(5506),n(3500),{東京:{lat:35.6762,lng:139.6503,country:"JP"},东京:{lat:35.6762,lng:139.6503,country:"JP"},大阪:{lat:34.6937,lng:135.5023,country:"JP"},京都:{lat:35.0116,lng:135.7681,country:"JP"},横浜:{lat:35.4437,lng:139.638,country:"JP"},横滨:{lat:35.4437,lng:139.638,country:"JP"},名古屋:{lat:35.1815,lng:136.9066,country:"JP"},福岡:{lat:33.5904,lng:130.4017,country:"JP"},福冈:{lat:33.5904,lng:130.4017,country:"JP"},札幌:{lat:43.0642,lng:141.3469,country:"JP"},仙台:{lat:38.2682,lng:140.8694,country:"JP"},広島:{lat:34.3853,lng:132.4553,country:"JP"},广岛:{lat:34.3853,lng:132.4553,country:"JP"},沖縄:{lat:26.2125,lng:127.6792,country:"JP"},冲绳:{lat:26.2125,lng:127.6792,country:"JP"},北京:{lat:39.9042,lng:116.4074,country:"CN"},上海:{lat:31.2304,lng:121.4737,country:"CN"},广州:{lat:23.1291,lng:113.2644,country:"CN"},深圳:{lat:22.5431,lng:114.0579,country:"CN"},杭州:{lat:30.2741,lng:120.1551,country:"CN"},南京:{lat:32.0603,lng:118.7969,country:"CN"},苏州:{lat:31.2989,lng:120.5853,country:"CN"},武汉:{lat:30.5928,lng:114.3055,country:"CN"},成都:{lat:30.5728,lng:104.0668,country:"CN"},重庆:{lat:29.563,lng:106.5516,country:"CN"},西安:{lat:34.3416,lng:108.9398,country:"CN"},天津:{lat:39.3434,lng:117.3616,country:"CN"},青岛:{lat:36.0986,lng:120.3719,country:"CN"},大连:{lat:38.914,lng:121.6147,country:"CN"},厦门:{lat:24.4798,lng:118.0819,country:"CN"},福州:{lat:26.0745,lng:119.2965,country:"CN"},济南:{lat:36.6512,lng:117.1201,country:"CN"},郑州:{lat:34.7466,lng:113.6254,country:"CN"},长沙:{lat:28.2282,lng:112.9388,country:"CN"},哈尔滨:{lat:45.8038,lng:126.5349,country:"CN"},沈阳:{lat:41.8057,lng:123.4315,country:"CN"},长春:{lat:43.8171,lng:125.3235,country:"CN"},石家庄:{lat:38.0428,lng:114.5149,country:"CN"},太原:{lat:37.8706,lng:112.5489,country:"CN"},呼和浩特:{lat:40.8414,lng:111.7525,country:"CN"},银川:{lat:38.4681,lng:106.2731,country:"CN"},西宁:{lat:36.6171,lng:101.7782,country:"CN"},兰州:{lat:36.0611,lng:103.8343,country:"CN"},乌鲁木齐:{lat:43.8256,lng:87.6168,country:"CN"},拉萨:{lat:29.652,lng:91.1721,country:"CN"},昆明:{lat:25.0389,lng:102.7183,country:"CN"},贵阳:{lat:26.647,lng:106.6302,country:"CN"},南宁:{lat:22.817,lng:108.3669,country:"CN"},海口:{lat:20.0444,lng:110.1989,country:"CN"},三亚:{lat:18.2533,lng:109.5007,country:"CN"},台州:{lat:28.6568,lng:121.4281,country:"CN"},天台:{lat:29.1444,lng:121.0114,country:"CN"},天台县:{lat:29.1444,lng:121.0114,country:"CN"},玉环:{lat:28.1356,lng:121.2318,country:"CN"},玉环县:{lat:28.1356,lng:121.2318,country:"CN"},温州:{lat:28.0015,lng:120.6997,country:"CN"},嘉兴:{lat:30.7463,lng:120.755,country:"CN"},湖州:{lat:30.8936,lng:120.0856,country:"CN"},绍兴:{lat:30.0023,lng:120.581,country:"CN"},金华:{lat:29.1028,lng:119.6471,country:"CN"},衢州:{lat:28.9569,lng:118.8739,country:"CN"},舟山:{lat:29.985,lng:122.2068,country:"CN"},丽水:{lat:28.4517,lng:119.9217,country:"CN"},香港:{lat:22.3193,lng:114.1694,country:"HK"},澳门:{lat:22.1987,lng:113.5439,country:"MO"},澳門:{lat:22.1987,lng:113.5439,country:"MO"},台北:{lat:25.033,lng:121.5654,country:"TW"},臺北:{lat:25.033,lng:121.5654,country:"TW"},高雄:{lat:22.6273,lng:120.3014,country:"TW"},台中:{lat:24.1477,lng:120.6736,country:"TW"},臺中:{lat:24.1477,lng:120.6736,country:"TW"}}),s={北京市:"北京",上海市:"上海",天津市:"天津",重庆市:"重庆",河北:"石家庄",河北省:"石家庄",山西:"太原",山西省:"太原",内蒙古:"呼和浩特",辽宁:"沈阳",辽宁省:"沈阳",吉林:"长春",吉林省:"长春",黑龙江:"哈尔滨",黑龙江省:"哈尔滨",江苏:"南京",江苏省:"南京",浙江:"杭州",浙江省:"杭州",安徽:"合肥",安徽省:"合肥",福建:"福州",福建省:"福州",江西:"南昌",江西省:"南昌",山东:"济南",山东省:"济南",河南:"郑州",河南省:"郑州",湖北:"武汉",湖北省:"武汉",湖南:"长沙",湖南省:"长沙",广东:"广州",广东省:"广州",广西:"南宁",海南:"海口",海南省:"海口",四川:"成都",四川省:"成都",贵州:"贵阳",贵州省:"贵阳",云南:"昆明",云南省:"昆明",西藏:"拉萨",陕西:"西安",陕西省:"西安",甘肃:"兰州",甘肃省:"兰州",青海:"西宁",青海省:"西宁",宁夏:"银川",新疆:"乌鲁木齐"};function l(){var t={japanese:[],chinese:[],hkTaiwan:[]};return Object.entries(o).forEach((function(e){var n=(0,i.A)(e,2),r=n[0],a=n[1],o={value:r,label:r};"JP"!==a.country||t.japanese.find((function(t){return t.value===r}))?"CN"!==a.country||t.chinese.find((function(t){return t.value===r}))?["HK","MO","TW"].includes(a.country)&&!t.hkTaiwan.find((function(t){return t.value===r}))&&t.hkTaiwan.push(o):t.chinese.push(o):t.japanese.push(o)})),t.japanese.sort((function(t,e){return t.label.localeCompare(e.label)})),t.chinese.sort((function(t,e){return t.label.localeCompare(e.label)})),t.hkTaiwan.sort((function(t,e){return t.label.localeCompare(e.label)})),t}function u(t){if(o[t])return o[t];for(var e=0,n=Object.entries(o);e<n.length;e++){var r=(0,i.A)(n[e],2),a=r[0],l=r[1];if(t.includes(a)||a.includes(t))return l}for(var u=0,c=Object.entries(s);u<c.length;u++){var d=(0,i.A)(c[u],2),g=d[0],h=d[1];if(t.includes(g)&&o[h])return o[h]}return{lat:35.6762,lng:139.6503,country:"JP"}}var c=["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],d=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],g=["白羊座","金牛座","双子座","巨蟹座","狮子座","处女座","天秤座","天蝎座","射手座","摩羯座","水瓶座","双鱼座"],h={甲:"木",乙:"木",丙:"火",丁:"火",戊:"土",己:"土",庚:"金",辛:"金",壬:"水",癸:"水"},f={寅:"木",卯:"木",巳:"火",午:"火",申:"金",酉:"金",亥:"水",子:"水",辰:"土",戌:"土",丑:"土",未:"土"},p={1:"丑",2:"寅",3:"卯",4:"辰",5:"巳",6:"午",7:"未",8:"申",9:"酉",10:"戌",11:"亥",12:"子"},m={23:"子",0:"子",1:"丑",2:"丑",3:"寅",4:"寅",5:"卯",6:"卯",7:"辰",8:"辰",9:"巳",10:"巳",11:"午",12:"午",13:"未",14:"未",15:"申",16:"申",17:"酉",18:"酉",19:"戌",20:"戌",21:"亥",22:"亥"};function y(t){return t%=360,t<0?t+360:t}function v(t){return t*Math.PI/180}function b(t,e,n,r,a){e<=2&&(t-=1,e+=12);var i=Math.floor(t/100),o=2-i+Math.floor(i/4),s=Math.floor(365.25*(t+4716))+Math.floor(30.6001*(e+1))+n+o-1524.5,l=(r+a/60)/24;return s+l}function w(t,e){var n=(t-2451545)/36525,r=280.46061837+360.98564736629*(t-2451545)+387933e-9*n*n-n*n*n/3871e4,a=(r+e)%360;return a<0?a+360:a}function D(t){var e=t-2451545,n=(280.46+.9856474*e)%360,r=(357.528+.9856003*e)%360*Math.PI/180,a=1.915*Math.sin(r)+.02*Math.sin(2*r),i=(n+a)%360;return i<0?i+360:i}function C(t){if(t<240){if(t<120){var e=9.615+t/120*10.385;return(t-e+360)%360}var n=(t-120)/120,r=20+9*n;return(t-r+360)%360}return t<290?(t-191.549+360)%360:(t-45.06+360)%360}function k(t){var e=(t-2451545)/36525,n=y(218.3164591+481267.88134236*e-.0013268*e*e),r=y(134.9634114+477198.8676313*e+.008997*e*e),a=y(357.5291092+35999.0502909*e-1536e-7*e*e),i=y(297.8502042+445267.1115168*e-.00163*e*e),o=y(93.2720993+483202.0175273*e-.0034029*e*e),s=6.288774*Math.sin(v(r))+1.274027*Math.sin(v(2*i-r))+.658314*Math.sin(v(2*i))+.213618*Math.sin(v(2*r))-.185116*Math.sin(v(a))-.114332*Math.sin(v(2*o)),l=y(n+s);return l}function L(t){var e=Math.floor(t/30),n=Math.floor(t%30),r=Math.floor(60*(t%30-n));return{sign:g[e],degree:n,minute:r,longitude:t}}function S(t){try{console.log("🔍 开始计算占星位置 - 调试信息:"),console.log("输入数据:",t);var e=new Date(t.fullBirthDateTime);console.log("本地时间:",e);var n=u(t.birthplace);console.log("坐标信息:",n);var r=e.getFullYear(),a=e.getMonth()+1,i=e.getDate(),o=e.getHours(),s=e.getMinutes();console.log("解析时间:",{year:r,month:a,day:i,hour:o,minute:s});var l=b(r,a,i,o,s);console.log("儒略日:",l);var c=D(l);console.log("太阳黄经:",c);var d=k(l);console.log("月亮黄经:",d);var g=w(l,n.lng);console.log("恒星时:",g,"度 (第"+(Math.floor(g/90)+1)+"象限)");var h=C(g);console.log("上升黄经:",h);var f={sun:L(c),moon:L(d),ascendant:L(h)};return console.log("最终结果:",f),console.log("🎯 占星位置计算完成"),f}catch(p){return console.error("占星位置计算出错:",p),{ascendant:{sign:"双子座",degree:4,minute:11},sun:{sign:"双鱼座",degree:13,minute:49},moon:{sign:"水瓶座",degree:18,minute:56}}}}function A(t){var e=["白羊座","金牛座","双子座","巨蟹座","狮子座","处女座","天秤座","天蝎座","射手座","摩羯座","水瓶座","双鱼座"],n=e.indexOf(t.sign);return-1===n?0:30*n+t.degree+t.minute/60}function E(t){try{var e=new Date(t.fullBirthDateTime),n=e.getFullYear(),r=e.getMonth()+1,i=e.getHours(),o=(n-4)%10,s=(n-4)%12,l=[2,4,6,8,0][o%5],u=(l+r-1)%10,g=Math.floor((e-new Date(1900,0,1))/864e5),y=g%10,v=g%12,b=y%5*2,w=i>=23||i<1?0:Math.floor((i+1)/2),D=(b+w)%10,C=[h[c[o]],h[c[u]],h[c[y]],h[c[D]],f[d[s]],f[p[r]],f[d[v]],f[m[i]||"子"]].filter(Boolean);return{eightCharacters:{year:{heavenlyStem:c[o],earthlyBranch:d[s]},month:{heavenlyStem:c[u],earthlyBranch:p[r]},day:{heavenlyStem:c[y],earthlyBranch:d[v]},hour:{heavenlyStem:c[D],earthlyBranch:m[i]||"子"}},elements:(0,a.A)(new Set(C))}}catch(k){return console.error("八字计算出错:",k),null}}function T(t,e){if(!t)return null;var n=t.elements,r=["木","火","土","金","水"].filter((function(t){return n.includes(t)})).length,a=r>=4?"大吉":3===r?"吉":"凶",i=e.gender,o="★★★☆☆",s="★★★☆☆",l="★★★☆☆",u="★★★☆☆";return"male"===i?(n.includes("金")&&n.includes("水")&&(o="★★★★★"),n.includes("木")&&n.includes("火")&&(s="★★★★☆"),n.includes("土")&&n.includes("火")&&(l="★★★★☆"),n.includes("水")&&n.includes("木")&&(u="★★★★★")):(n.includes("火")&&n.includes("土")&&(o="★★★★☆"),n.includes("金")&&n.includes("水")&&(s="★★★★★"),n.includes("木")&&n.includes("水")&&(l="★★★★★"),n.includes("土")&&n.includes("金")&&(u="★★★★☆")),{overview:a,career:o,wealth:s,love:l,health:u}}function R(t){try{var e=E(t),n=S(t),a=T(e,t);return(0,r.A)((0,r.A)({},e),{},{astrologyPositions:n,fortune:a})}catch(i){return console.error("完整命盘计算出错:",i),{eightCharacters:{year:{heavenlyStem:"甲",earthlyBranch:"子"},month:{heavenlyStem:"丙",earthlyBranch:"寅"},day:{heavenlyStem:"戊",earthlyBranch:"午"},hour:{heavenlyStem:"庚",earthlyBranch:"申"}},elements:["木","火","土","金"],astrologyPositions:{ascendant:{sign:"双子座",degree:4,minute:11},sun:{sign:"双鱼座",degree:13,minute:49},moon:{sign:"水瓶座",degree:18,minute:56}},fortune:{overview:"大吉",career:"★★★☆☆",wealth:"★★★★☆",love:"★★★★★",health:"★★★☆☆"}}}}},8316:(t,e,n)=>{n(3792),n(3362),n(9085),n(9391);var r=n(5130),a=n(6768),i={id:"app"};function o(t,e){var n=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(n)])}var s=n(1241);const l={},u=(0,s.A)(l,[["render",o]]),c=u;n(8706),n(4114),n(2010),n(6099),n(7764),n(2762),n(2953);var d=n(1387),g=n(8676),h=n(4048),f=n(388),p=n(8653),m=(n(6280),n(6918),n(2008),n(113),n(1629),n(4423),n(4782),n(6910),n(3609),n(9089),n(1688),n(739),n(3288),n(8111),n(2489),n(116),n(7588),n(3110),n(9432),n(3500),n(782)),y=n(3307);function v(){try{var t=localStorage.getItem("meibanAppState");if(null===t)return;return JSON.parse(t)}catch(e){return void console.error("无法加载保存的状态:",e)}}function b(t){try{var e=JSON.stringify({userData:t.userData,calculationResults:t.calculationResults,settings:t.settings,analysisHistory:t.analysisHistory});localStorage.setItem("meibanAppState",e)}catch(n){console.error("无法保存状态:",n)}}var w={userData:null,calculationResults:null,transitResults:null,analysisHistory:[],currentAnalysisType:null,settings:{language:"ja",theme:"default",notifications:!0,autoSave:!0,debugMode:!1},loading:!1,error:null,pageStates:{lastVisitedPage:null,navigationHistory:[]}},D=v();const C=(0,m.y$)({state:(0,p.A)((0,p.A)({},w),D),getters:{getUserData:function(t){return t.userData},getCalculationResults:function(t){return t.calculationResults},getTransitResults:function(t){return t.transitResults},getAnalysisHistory:function(t){return t.analysisHistory},getCurrentAnalysisType:function(t){return t.currentAnalysisType},getSettings:function(t){return t.settings},isLoading:function(t){return t.loading},getError:function(t){return t.error},getPageStates:function(t){return t.pageStates},hasCompleteUserData:function(t){return t.userData&&t.userData.name&&""!==t.userData.name.trim()&&t.userData.birthdate&&null!==t.userData.birthHour&&void 0!==t.userData.birthHour&&""!==t.userData.birthHour&&null!==t.userData.birthMinute&&void 0!==t.userData.birthMinute&&""!==t.userData.birthMinute&&t.userData.birthplace&&""!==t.userData.birthplace.trim()&&t.userData.gender},hasCalculationResults:function(t){return t.calculationResults&&t.calculationResults.eightCharacters&&t.calculationResults.astrologyPositions},hasBaziResults:function(t){return t.calculationResults&&t.calculationResults.eightCharacters&&t.calculationResults.elements},hasAstrologyResults:function(t){return t.calculationResults&&t.calculationResults.astrologyPositions},getUserAge:function(t){if(!t.userData||!t.userData.fullBirthDateTime)return null;var e=new Date(t.userData.fullBirthDateTime),n=new Date,r=n-e;return Math.floor(r/315576e5)},getFormattedUserInfo:function(t){if(!t.userData)return null;var e=new Date(t.userData.fullBirthDateTime);return{name:t.userData.name,age:Math.floor((new Date-e)/315576e5),birthDateFormatted:"".concat(e.getFullYear(),"年").concat(e.getMonth()+1,"月").concat(e.getDate(),"日"),birthTimeFormatted:"".concat(t.userData.birthHour,"時").concat(t.userData.birthMinute,"分"),birthPlace:t.userData.birthplace,gender:"male"===t.userData.gender?"男性":"女性"}},getRecentAnalysis:function(t){return t.analysisHistory.sort((function(t,e){return new Date(e.timestamp)-new Date(t.timestamp)})).slice(0,5)},isDebugMode:function(t){return t.settings.debugMode}},mutations:{setLoading:function(t,e){t.loading=e},setError:function(t,e){t.error={message:e.message||e,type:e.type||"UnknownError",timestamp:(new Date).toISOString(),code:e.code||null}},clearError:function(t){t.error=null},setUserData:function(t,e){t.userData=e,t.settings.autoSave&&b(t)},setAnalysisType:function(t,e){t.currentAnalysisType=e},setCalculationResults:function(t,e){if(t.calculationResults=e,t.userData&&e){var n={id:Date.now(),timestamp:(new Date).toISOString(),userData:(0,p.A)({},t.userData),results:(0,p.A)({},e),analysisType:t.currentAnalysisType||"unknown"};t.analysisHistory.unshift(n),t.analysisHistory.length>20&&(t.analysisHistory=t.analysisHistory.slice(0,20))}t.settings.autoSave&&b(t)},setTransitResults:function(t,e){t.transitResults=e},updateSettings:function(t,e){t.settings=(0,p.A)((0,p.A)({},t.settings),e),b(t)},toggleDebugMode:function(t){t.settings.debugMode=!t.settings.debugMode,b(t)},clearUserData:function(t){t.userData=null,t.calculationResults=null,t.transitResults=null,t.currentAnalysisType=null,t.error=null,localStorage.removeItem("meibanAppState")},clearTransitResults:function(t){t.transitResults=null},clearCalculationResults:function(t){t.calculationResults=null,t.settings.autoSave&&b(t)},clearAnalysisHistory:function(t){t.analysisHistory=[],t.settings.autoSave&&b(t)},removeAnalysisHistory:function(t,e){t.analysisHistory=t.analysisHistory.filter((function(t){return t.id!==e})),t.settings.autoSave&&b(t)},setPageState:function(t,e){var n=e.page,r=e.data;t.pageStates[n]=r},recordPageVisit:function(t,e){t.pageStates.lastVisitedPage=e,t.pageStates.navigationHistory.unshift({page:e,timestamp:(new Date).toISOString()}),t.pageStates.navigationHistory.length>50&&(t.pageStates.navigationHistory=t.pageStates.navigationHistory.slice(0,50))}},actions:{saveUserData:function(t,e){var n=t.commit;n("clearError"),n("setUserData",e)},setAnalysisType:function(t,e){var n=t.commit,r=["bazi","astrology","transit"];r.includes(e)?n("setAnalysisType",e):console.warn("无效的分析类型:",e)},calculateFortune:function(t){var e=arguments;return(0,f.A)((0,h.A)().mark((function n(){var r,a,i,o,s,l,u,c;return(0,h.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.commit,a=t.state,i=e.length>1&&void 0!==e[1]?e[1]:null,o=i||a.userData,o){n.next=8;break}throw s=new Error("缺少用户数据，请先填写基本信息"),s.type="DataError",r("setError",s),s;case 8:return r("setLoading",!0),r("clearError"),n.prev=10,l=(0,y.RV)(o),r("setCalculationResults",l),a.settings.debugMode&&console.log("命盘计算成功:",l),n.abrupt("return",l);case 17:return n.prev=17,n.t0=n["catch"](10),console.error("命盤計算失敗:",n.t0),u=new Error("命盤計算失敗，請檢查輸入數據或稍後重試"),u.type="CalculationError",u.originalError=n.t0,r("setError",u),c={eightCharacters:{year:{heavenlyStem:"甲",earthlyBranch:"子"},month:{heavenlyStem:"丙",earthlyBranch:"寅"},day:{heavenlyStem:"戊",earthlyBranch:"午"},hour:{heavenlyStem:"庚",earthlyBranch:"申"}},elements:["木","火","土","金"],astrologyPositions:{ascendant:{sign:"双子座",degree:4,minute:11},sun:{sign:"双鱼座",degree:13,minute:49},moon:{sign:"水瓶座",degree:18,minute:56}},fortune:{overview:"大吉",career:"★★★☆☆",wealth:"★★★★☆",love:"★★★★★",health:"★★★☆☆"}},r("setCalculationResults",c),n.abrupt("return",c);case 27:return n.prev=27,r("setLoading",!1),n.finish(27);case 30:case"end":return n.stop()}}),n,null,[[10,17,27,30]])})))()},calculateTransit:function(t,e){return(0,f.A)((0,h.A)().mark((function r(){var a,i,o,s,l,u,c,d,f,p,m,y;return(0,h.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=t.commit,i=t.state,o=e.transitDate,s=i.userData,s){r.next=8;break}throw l=new Error("缺少用户数据，请先填写基本信息"),l.type="DataError",a("setError",l),l;case 8:return a("setLoading",!0),a("clearError"),r.prev=10,r.next=13,Promise.all([n.e(694).then(n.bind(n,2694)),n.e(599).then(n.bind(n,1599))]);case 13:return u=r.sent,c=(0,g.A)(u,2),d=c[0].calculateTransitChart,f=c[1].generateDetailedTransitReport,p=d(s,o),m=f(p,s),a("setTransitResults",m),r.abrupt("return",m);case 23:throw r.prev=23,r.t0=r["catch"](10),console.error("行運計算失敗:",r.t0),y=new Error("行運計算失敗，請檢查輸入數據或稍後重試"),y.type="CalculationError",y.originalError=r.t0,a("setError",y),y;case 31:return r.prev=31,a("setLoading",!1),r.finish(31);case 34:case"end":return r.stop()}}),r,null,[[10,23,31,34]])})))()},recalculateFortune:function(t){return(0,f.A)((0,h.A)().mark((function e(){var n,r;return(0,h.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,r("clearCalculationResults"),e.next=4,n("calculateFortune");case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))()},loadAnalysisHistory:function(t,e){var n=t.commit,r=t.state,a=r.analysisHistory.find((function(t){return t.id===e}));return a?(n("setUserData",a.userData),n("setCalculationResults",a.results),n("setAnalysisType",a.analysisType),a):null},exportUserData:function(t){var e=t.state;if(!e.userData)throw new Error("没有用户数据可以导出");var n={userData:e.userData,calculationResults:e.calculationResults,analysisHistory:e.analysisHistory,settings:e.settings,exportTime:(new Date).toISOString(),version:"2.0"};return n},importUserData:function(t,e){return(0,f.A)((0,h.A)().mark((function n(){var r,a,i;return(0,h.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.commit,a=t.dispatch,n.prev=1,e.userData){n.next=4;break}throw new Error("导入数据格式错误");case 4:if(r("setLoading",!0),r("setUserData",e.userData),!e.calculationResults){n.next=10;break}r("setCalculationResults",e.calculationResults),n.next=12;break;case 10:return n.next=12,a("calculateFortune");case 12:return e.analysisHistory&&(r("clearAnalysisHistory"),e.analysisHistory.forEach((function(t){r("setCalculationResults",t.results)}))),e.settings&&r("updateSettings",e.settings),n.abrupt("return",!0);case 17:throw n.prev=17,n.t0=n["catch"](1),console.error("導入數據失敗:",n.t0),i=new Error("導入數據失敗："+n.t0.message),i.type="DataError",r("setError",i),i;case 24:return n.prev=24,r("setLoading",!1),n.finish(24);case 27:case"end":return n.stop()}}),n,null,[[1,17,24,27]])})))()},updateAppSettings:function(t,e){var n=t.commit;n("updateSettings",e)},toggleAutoSave:function(t){var e=t.commit,n=t.state,r=!n.settings.autoSave;e("updateSettings",{autoSave:r}),r&&b(n)},manualSave:function(t){var e=t.state;b(e)},resetApp:function(t){var e=t.commit;e("clearUserData"),e("clearAnalysisHistory"),e("clearError")},clearTransitData:function(t){var e=t.commit;e("clearTransitResults")},clearErrorMessage:function(t){var e=t.commit;e("clearError")},recordPageVisit:function(t,e){var n=t.commit;n("recordPageVisit",e)},initializeApp:function(t){return(0,f.A)((0,h.A)().mark((function e(){var n,r,a,i;return(0,h.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.state,r=t.dispatch,a=t.commit,e.prev=1,a("setLoading",!0),!n.userData||n.calculationResults){e.next=6;break}return e.next=6,r("calculateFortune");case 6:return a("clearError"),n.settings.debugMode&&console.log("应用初始化完成"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e["catch"](1),console.error("應用初始化失敗:",e.t0),i=new Error("應用初始化失敗"),i.type="InitializationError",a("setError",i),e.abrupt("return",!1);case 18:return e.prev=18,a("setLoading",!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,11,18,21]])})))()}},modules:{}});n(8156);var k=n(4232),L={class:"meiban-container"},S={class:"header"},A={class:"title"},E={class:"subtitle"},T={class:"form-container"},R={class:"birth-form"},M={class:"form-group"},N={for:"name"},P={class:"optional-badge"},H=["placeholder"],_={class:"form-group"},q={for:"birthdate"},$={class:"required-badge"},O={class:"form-group"},F={for:"birthTime"},U={class:"required-badge"},j={class:"time-input-wrapper"},x={value:"",disabled:""},z=["value"],B={value:"",disabled:""},I=["value"],J={class:"form-group"},W={for:"birthplace"},X={class:"required-badge"},V={class:"location-combo-wrapper"},K=["placeholder"],G={class:"city-dropdown"},Y={class:"region-header"},Z=["onMousedown"],Q={class:"form-group gender-group"},tt={class:"required-badge"},et={class:"radio-group"},nt=["value"],rt={class:"section"},at={class:"section-title"},it={class:"analysis-buttons"},ot={class:"btn-content"},st={class:"btn-description"},lt={class:"btn-content"},ut={class:"btn-description"},ct={class:"features-section"},dt={class:"features-title"},gt={class:"features-grid"},ht={class:"feature-card feature-card--primary"},ft={class:"feature-card feature-card--secondary"},pt={class:"feature-card feature-card--success"},mt={class:"footer"};function yt(t,e,n,i,o,s){var l=(0,a.g2)("LanguageSwitcher");return(0,a.uX)(),(0,a.CE)("div",L,[(0,a.bF)(l,{compact:s.isMobile,"show-names":!s.isMobile,onLanguageChanged:s.onLanguageChanged},null,8,["compact","show-names","onLanguageChanged"]),(0,a.Lk)("header",S,[(0,a.Lk)("h1",A,(0,k.v_)(t.$t("app.title")),1),(0,a.Lk)("p",E,(0,k.v_)(t.$t("app.subtitle")),1)]),(0,a.Lk)("div",T,[(0,a.Lk)("form",R,[(0,a.Lk)("div",M,[(0,a.Lk)("label",N,[(0,a.eW)((0,k.v_)(t.$t("form.name"))+" ",1),(0,a.Lk)("span",P,(0,k.v_)(t.$t("form.optional")),1)]),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=function(t){return o.formData.name=t}),placeholder:t.$t("form.namePlaceholder")},null,8,H),[[r.Jo,o.formData.name]])]),(0,a.Lk)("div",_,[(0,a.Lk)("label",q,[(0,a.eW)((0,k.v_)(t.$t("form.birthdate"))+" ",1),(0,a.Lk)("span",$,(0,k.v_)(t.$t("form.required")),1)]),(0,a.bo)((0,a.Lk)("input",{type:"date",id:"birthdate","onUpdate:modelValue":e[1]||(e[1]=function(t){return o.formData.birthdate=t}),required:""},null,512),[[r.Jo,o.formData.birthdate]])]),(0,a.Lk)("div",O,[(0,a.Lk)("label",F,[(0,a.eW)((0,k.v_)(t.$t("form.birthTime"))+" ",1),(0,a.Lk)("span",U,(0,k.v_)(t.$t("form.required")),1)]),(0,a.Lk)("div",j,[(0,a.bo)((0,a.Lk)("select",{id:"birthHour","onUpdate:modelValue":e[2]||(e[2]=function(t){return o.formData.birthHour=t}),required:"",class:"time-select"},[(0,a.Lk)("option",x,(0,k.v_)(t.$t("form.hour")),1),((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(24,(function(t){return(0,a.Lk)("option",{key:t,value:String(t-1)},(0,k.v_)(String(t-1).padStart(2,"0")),9,z)})),64))],512),[[r.u1,o.formData.birthHour]]),e[12]||(e[12]=(0,a.Lk)("span",{class:"time-separator"},":",-1)),(0,a.bo)((0,a.Lk)("select",{id:"birthMinute","onUpdate:modelValue":e[3]||(e[3]=function(t){return o.formData.birthMinute=t}),required:"",class:"time-select"},[(0,a.Lk)("option",B,(0,k.v_)(t.$t("form.minute")),1),((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(12,(function(t){return(0,a.Lk)("option",{key:t,value:String(5*(t-1))},(0,k.v_)(String(5*(t-1)).padStart(2,"0")),9,I)})),64))],512),[[r.u1,o.formData.birthMinute]])])]),(0,a.Lk)("div",J,[(0,a.Lk)("label",W,[(0,a.eW)((0,k.v_)(t.$t("form.birthplace"))+" ",1),(0,a.Lk)("span",X,(0,k.v_)(t.$t("form.required")),1)]),(0,a.Lk)("div",V,[(0,a.bo)((0,a.Lk)("input",{type:"text",id:"birthplace","onUpdate:modelValue":e[4]||(e[4]=function(t){return o.formData.birthplace=t}),placeholder:t.$t("form.birthplacePlaceholder"),required:"",onFocus:e[5]||(e[5]=function(){return s.onLocationFocus&&s.onLocationFocus.apply(s,arguments)}),onInput:e[6]||(e[6]=function(){return s.filterCities&&s.filterCities.apply(s,arguments)}),onBlur:e[7]||(e[7]=function(){return s.hideDropdown&&s.hideDropdown.apply(s,arguments)}),onKeydown:e[8]||(e[8]=(0,r.jR)((function(t){return o.showDropdown=!1}),["esc"])),class:"location-input"},null,40,K),[[r.Jo,o.formData.birthplace]]),(0,a.bo)((0,a.Lk)("div",G,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.filteredCities,(function(e,n){return(0,a.uX)(),(0,a.CE)("div",{class:"city-group",key:n},[(0,a.Lk)("div",Y,(0,k.v_)(t.$t("regions."+n)),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,(function(t){return(0,a.uX)(),(0,a.CE)("div",{class:"city-option",key:t.value,onMousedown:(0,r.D$)((function(e){return s.selectCity(t.value)}),["prevent"])},(0,k.v_)(t.label),41,Z)})),128))])})),128))],512),[[r.aG,o.showDropdown&&Object.keys(o.filteredCities).length>0]])])]),(0,a.Lk)("div",Q,[(0,a.Lk)("label",null,[(0,a.eW)((0,k.v_)(t.$t("form.gender"))+" ",1),(0,a.Lk)("span",tt,(0,k.v_)(t.$t("form.required")),1)]),(0,a.Lk)("div",et,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.genderOptions,(function(n){return(0,a.uX)(),(0,a.CE)("label",{class:"radio-label",key:n.value},[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":e[9]||(e[9]=function(t){return o.formData.gender=t}),value:n.value,required:""},null,8,nt),[[r.XL,o.formData.gender]]),(0,a.Lk)("span",null,(0,k.v_)(t.$t("form.genders."+n.value)),1)])})),128))])])]),(0,a.Lk)("div",rt,[(0,a.Lk)("h3",at,(0,k.v_)(t.$t("analysis.selectType")),1),(0,a.Lk)("div",it,[(0,a.Lk)("button",{type:"button",onClick:e[10]||(e[10]=function(t){return s.submitWithAnalysisType("bazi")}),class:"analysis-btn analysis-btn--bazi"},[e[13]||(e[13]=(0,a.Lk)("div",{class:"btn-icon"},"🔮",-1)),(0,a.Lk)("div",ot,[(0,a.Lk)("h4",null,(0,k.v_)(t.$t("analysis.bazi.title")),1),(0,a.Lk)("p",st,(0,k.v_)(t.$t("analysis.bazi.description")),1)])]),(0,a.Lk)("button",{type:"button",onClick:e[11]||(e[11]=function(t){return s.submitWithAnalysisType("astrology")}),class:"analysis-btn analysis-btn--astrology"},[e[14]||(e[14]=(0,a.Lk)("div",{class:"btn-icon"},"⭐",-1)),(0,a.Lk)("div",lt,[(0,a.Lk)("h4",null,(0,k.v_)(t.$t("analysis.astrology.title")),1),(0,a.Lk)("p",ut,(0,k.v_)(t.$t("analysis.astrology.description")),1)])])])])]),(0,a.Lk)("div",ct,[(0,a.Lk)("h3",dt,(0,k.v_)(t.$t("features.title")),1),(0,a.Lk)("div",gt,[(0,a.Lk)("div",ht,[e[15]||(e[15]=(0,a.Lk)("div",{class:"feature-icon"},"📊",-1)),(0,a.Lk)("h4",null,(0,k.v_)(t.$t("features.detailed.title")),1),(0,a.Lk)("p",null,(0,k.v_)(t.$t("features.detailed.description")),1)]),(0,a.Lk)("div",ft,[e[16]||(e[16]=(0,a.Lk)("div",{class:"feature-icon"},"🎯",-1)),(0,a.Lk)("h4",null,(0,k.v_)(t.$t("features.personalized.title")),1),(0,a.Lk)("p",null,(0,k.v_)(t.$t("features.personalized.description")),1)]),(0,a.Lk)("div",pt,[e[17]||(e[17]=(0,a.Lk)("div",{class:"feature-icon"},"🔄",-1)),(0,a.Lk)("h4",null,(0,k.v_)(t.$t("features.transit.title")),1),(0,a.Lk)("p",null,(0,k.v_)(t.$t("features.transit.description")),1)])])]),(0,a.Lk)("footer",mt,[(0,a.Lk)("p",null,(0,k.v_)(t.$t("footer.copyright")),1)])])}n(8940),n(1699),n(6031);var vt={key:0,class:"lang-buttons"},bt=["onClick","title"],wt={class:"lang-flag"},Dt={key:0,class:"lang-name"},Ct={key:1,class:"compact-switcher"},kt=["title"],Lt={class:"current-flag"},St=["onClick"],At={class:"lang-flag"},Et={class:"lang-name"};function Tt(t,e,n,i,o,s){return(0,a.uX)(),(0,a.CE)("div",{class:(0,k.C4)(["language-switcher",{compact:n.compact,"dark-theme":"dark"===n.theme}]),style:(0,k.Tr)(s.positionStyle)},[n.compact?((0,a.uX)(),(0,a.CE)("div",Ct,[(0,a.Lk)("button",{onClick:e[0]||(e[0]=function(){return s.toggleDropdown&&s.toggleDropdown.apply(s,arguments)}),class:(0,k.C4)(["compact-btn",{active:o.showDropdown}]),title:s.t("languageSwitcher.title")},[(0,a.Lk)("span",Lt,(0,k.v_)(s.currentLanguageData.flag),1),e[2]||(e[2]=(0,a.Lk)("span",{class:"dropdown-arrow"},"▼",-1))],10,kt),(0,a.bo)((0,a.Lk)("div",{class:"language-dropdown",onClick:e[1]||(e[1]=(0,r.D$)((function(){}),["stop"]))},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.languages,(function(t){return(0,a.uX)(),(0,a.CE)("button",{key:t.code,onClick:function(e){return s.switchLanguage(t.code)},class:(0,k.C4)(["dropdown-item",{active:o.currentLanguage===t.code}])},[(0,a.Lk)("span",At,(0,k.v_)(t.flag),1),(0,a.Lk)("span",Et,(0,k.v_)(t.name),1)],10,St)})),128))],512),[[r.aG,o.showDropdown]])])):((0,a.uX)(),(0,a.CE)("div",vt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.languages,(function(t){return(0,a.uX)(),(0,a.CE)("button",{key:t.code,onClick:function(e){return s.switchLanguage(t.code)},class:(0,k.C4)(["lang-btn",{active:o.currentLanguage===t.code}]),title:s.getTooltip(t)},[(0,a.Lk)("span",wt,(0,k.v_)(t.flag),1),n.showNames?((0,a.uX)(),(0,a.CE)("span",Dt,(0,k.v_)(t.name),1)):(0,a.Q3)("",!0)],10,bt)})),128))]))],6)}var Rt=n(4119),Mt=n(3604);n(1392);const Nt={app:{title:"命盤",subtitle:"生辰八字・命盤占い・占星分析"},form:{name:"お名前",optional:"選択",required:"必須",namePlaceholder:"お名前を入力してください（選択）",birthdate:"生年月日",birthTime:"出生時間",hour:"時",minute:"分",birthplace:"出生地",birthplacePlaceholder:"都市を選択または直接入力",gender:"性別",genders:{male:"男性",female:"女性"},requiredNote:"は必須項目です"},regions:{japanese:"日本",chinese:"中国",hkTaiwan:"港澳台"},analysis:{selectType:"分析種類を選択",bazi:{title:"生辰八字",description:"伝統八字命盤"},astrology:{title:"占星分析",description:"現代占星図"}},features:{title:"サービス特徴",detailed:{title:"詳細分析",description:"専門的な命盤計算"},personalized:{title:"個人化",description:"あなただけの運勢"},transit:{title:"行運分析",description:"時期別の運勢変化"}},footer:{copyright:"© 2025 命盤 - 生辰八字・四柱推命・命盤占い・占星分析"},alerts:{birthdateRequired:"生年月日を選択してください",birthTimeRequired:"出生時間を選択してください",birthMinuteRequired:"出生分を選択してください",birthplaceRequired:"出生地を入力してください",genderRequired:"性別を選択してください"},languageSwitcher:{title:"言語を選択",current:"現在の言語"}},Pt={app:{title:"命盘",subtitle:"生辰八字・紫微斗数・西方占星分析"},form:{name:"姓名",optional:"可选",required:"必填",namePlaceholder:"请输入您的姓名（可选）",birthdate:"出生日期",birthTime:"出生时间",hour:"时",minute:"分",birthplace:"出生地",birthplacePlaceholder:"选择城市或直接输入",gender:"性别",genders:{male:"男",female:"女"},requiredNote:"为必填项"},regions:{japanese:"日本",chinese:"中国",hkTaiwan:"港澳台"},analysis:{selectType:"选择分析类型",bazi:{title:"生辰八字",description:"传统命理分析"},astrology:{title:"西方占星",description:"现代星盘解读"}},features:{title:"服务特色",detailed:{title:"详细分析",description:"专业命盘计算"},personalized:{title:"个性化",description:"专属运势解读"},transit:{title:"流年分析",description:"时运变化趋势"}},footer:{copyright:"© 2025 命盘 - 生辰八字・紫微斗数・西方占星分析"},alerts:{birthdateRequired:"请选择出生日期",birthTimeRequired:"请选择出生时间",birthMinuteRequired:"请选择出生分钟",birthplaceRequired:"请输入出生地",genderRequired:"请选择性别"},languageSwitcher:{title:"选择语言",current:"当前语言"}},Ht={app:{title:"Destiny Chart",subtitle:"BaZi・Astrology・Divination Analysis"},form:{name:"Name",optional:"Optional",required:"Required",namePlaceholder:"Enter your name (optional)",birthdate:"Birth Date",birthTime:"Birth Time",hour:"Hour",minute:"Min",birthplace:"Birth Place",birthplacePlaceholder:"Select city or enter directly",gender:"Gender",genders:{male:"Male",female:"Female"},requiredNote:"Required fields"},regions:{japanese:"Japan",chinese:"China",hkTaiwan:"HK/Macao/Taiwan"},analysis:{selectType:"Select Analysis Type",bazi:{title:"BaZi Analysis",description:"Traditional Chinese"},astrology:{title:"Astrology",description:"Western Astrology"}},features:{title:"Service Features",detailed:{title:"Detailed Analysis",description:"Professional calculation"},personalized:{title:"Personalized",description:"Your unique reading"},transit:{title:"Transit Analysis",description:"Timing predictions"}},footer:{copyright:"© 2025 Destiny Chart - BaZi・Astrology・Divination Analysis"},alerts:{birthdateRequired:"Please select birth date",birthTimeRequired:"Please select birth time",birthMinuteRequired:"Please select birth minute",birthplaceRequired:"Please enter birth place",genderRequired:"Please select gender"},languageSwitcher:{title:"Select Language",current:"Current Language"}};var _t=[{code:"ja",name:"日本語",flag:"🇯🇵"},{code:"zh",name:"中文",flag:"🇨🇳"},{code:"en",name:"English",flag:"🇺🇸"}],qt={ja:Nt,zh:Pt,en:Ht},$t="ja",Ot="preferred-language";function Ft(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t,r=qt[n]||qt[$t],a=t.split("."),i=r,o=(0,Mt.A)(a);try{for(o.s();!(e=o.n()).done;){var s=e.value;if(!i||"object"!==(0,Rt.A)(i))return console.warn('Translation key "'.concat(t,'" not found for language "').concat(n,'"')),t;i=i[s]}}catch(l){o.e(l)}finally{o.f()}return i||t}function Ut(){var t=localStorage.getItem(Ot);if(t&&_t.find((function(e){return e.code===t})))return t;var e=navigator.language.toLowerCase();return e.startsWith("zh")?"zh":e.startsWith("ja")?"ja":e.startsWith("en")?"en":$t}function jt(t){return _t.find((function(e){return e.code===t}))?(localStorage.setItem(Ot,t),document.documentElement.lang=t,window.dispatchEvent(new CustomEvent("languageChanged",{detail:{language:t}})),!0):(console.warn("Unsupported language: ".concat(t)),!1)}const xt={name:"LanguageSwitcher",props:{position:{type:String,default:"top-right"},theme:{type:String,default:"light"},compact:{type:Boolean,default:!1},showNames:{type:Boolean,default:!0},offset:{type:Object,default:function(){return{top:20,right:20,bottom:20,left:20}}}},data:function(){return{currentLanguage:"ja",languages:_t,showDropdown:!1}},computed:{currentLanguageData:function(){var t=this;return this.languages.find((function(e){return e.code===t.currentLanguage}))||this.languages[0]},positionStyle:function(){var t=this.position.split("-"),e=(0,g.A)(t,2),n=e[0],r=e[1],a={position:"fixed",zIndex:9999};return"top"===n?a.top="".concat(this.offset.top,"px"):a.bottom="".concat(this.offset.bottom,"px"),"right"===r?a.right="".concat(this.offset.right,"px"):a.left="".concat(this.offset.left,"px"),a}},methods:{t:function(t){return Ft(t,this.currentLanguage)},switchLanguage:function(t){if(t!==this.currentLanguage){var e=jt(t);e&&(this.currentLanguage=t,this.showDropdown=!1,this.$emit("language-changed",t))}},toggleDropdown:function(){this.showDropdown=!this.showDropdown},hideDropdown:function(){this.showDropdown=!1},getTooltip:function(t){return"".concat(this.t("languageSwitcher.title"),": ").concat(t.name)},handleOutsideClick:function(t){this.$el.contains(t.target)||this.hideDropdown()}},mounted:function(){var t=this;this.currentLanguage=Ut(),window.addEventListener("languageChanged",(function(e){t.currentLanguage=e.detail.language})),document.addEventListener("click",this.handleOutsideClick)},beforeUnmount:function(){document.removeEventListener("click",this.handleOutsideClick)}},zt=(0,s.A)(xt,[["render",Tt],["__scopeId","data-v-1e9c1966"]]),Bt=zt,It={data:function(){return{currentLanguage:Ut()}},methods:{$t:function(t){return Ft(t,this.currentLanguage)},$updateLanguage:function(){this.currentLanguage=Ut()}},mounted:function(){var t=this;this._languageChangeHandler=function(e){t.currentLanguage=e.detail.language,t.$forceUpdate()},window.addEventListener("languageChanged",this._languageChangeHandler)},beforeUnmount:function(){this._languageChangeHandler&&window.removeEventListener("languageChanged",this._languageChangeHandler)}},Jt={name:"HomePage",mixins:[It],components:{LanguageSwitcher:Bt},data:function(){return{formData:{name:"",birthdate:"",birthHour:"",birthMinute:"",birthplace:"",gender:""},showDropdown:!1,filteredCities:{},cityGroups:{},genderOptions:[{value:"male"},{value:"female"}]}},computed:(0,p.A)((0,p.A)({},(0,m.L8)({userData:"getUserData",calculationResults:"getCalculationResults"})),{},{isMobile:function(){return window.innerWidth<=768}}),watch:{userData:{handler:function(t){t&&this.fillFormWithStoredData()},immediate:!0}},created:function(){this.cityGroups=(0,y.C2)(),this.filteredCities=this.cityGroups},mounted:function(){var t=this;this.userData&&this.fillFormWithStoredData(),this.handleResize=function(){t.$forceUpdate()},window.addEventListener("resize",this.handleResize)},beforeUnmount:function(){window.removeEventListener("resize",this.handleResize)},methods:{onLanguageChanged:function(t){console.log("Language changed to:",t)},onLocationFocus:function(){this.showDropdown=!0,this.formData.birthplace.trim()&&this.filterCities()},selectCity:function(t){this.formData.birthplace=t,this.showDropdown=!1,this.filteredCities=this.cityGroups},filterCities:function(){var t=this,e=this.formData.birthplace.toLowerCase().trim();if(e){var n={};Object.keys(this.cityGroups).forEach((function(r){var a=t.cityGroups[r].filter((function(t){return t.label.toLowerCase().includes(e)||t.value.toLowerCase().includes(e)}));a.length>0&&(n[r]=a)})),this.filteredCities=n}else this.filteredCities=this.cityGroups},hideDropdown:function(){var t=this;setTimeout((function(){t.showDropdown=!1}),150)},fillFormWithStoredData:function(){this.userData&&(this.formData={name:this.userData.name||"",birthdate:this.userData.birthdate||"",birthHour:String(void 0!==this.userData.birthHour?this.userData.birthHour:""),birthMinute:String(void 0!==this.userData.birthMinute?this.userData.birthMinute:""),birthplace:this.userData.birthplace||"",gender:this.userData.gender||""})},submitWithAnalysisType:function(t){if(this.validateForm()){this.analysisType=t;var e=(0,p.A)((0,p.A)({},this.formData),{},{birthHour:parseInt(this.formData.birthHour),birthMinute:parseInt(this.formData.birthMinute),fullBirthDateTime:"".concat(this.formData.birthdate,"T").concat(String(this.formData.birthHour).padStart(2,"0"),":").concat(String(this.formData.birthMinute).padStart(2,"0"),":00")});this.$store.dispatch("saveUserData",e),this.$store.dispatch("setAnalysisType",t),this.$store.dispatch("calculateFortune",e),"bazi"===t?this.$router.push({name:"bazi-results",params:{id:Date.now()}}):this.$router.push({name:"astrology-results",params:{id:Date.now()}})}},validateForm:function(){return this.formData.birthdate?""===this.formData.birthHour?(alert(this.$t("alerts.birthTimeRequired")),!1):""===this.formData.birthMinute?(alert(this.$t("alerts.birthMinuteRequired")),!1):this.formData.birthplace.trim()?!!this.formData.gender||(alert(this.$t("alerts.genderRequired")),!1):(alert(this.$t("alerts.birthplaceRequired")),!1):(alert(this.$t("alerts.birthdateRequired")),!1)}}},Wt=(0,s.A)(Jt,[["render",yt],["__scopeId","data-v-dfdef524"]]),Xt=Wt;var Vt=[{path:"/",name:"home",component:Xt},{path:"/results/:id",name:"results",component:function(){return Promise.all([n.e(457),n.e(958)]).then(n.bind(n,6989))}},{path:"/bazi-results/:id",name:"bazi-results",component:function(){return Promise.all([n.e(569),n.e(188)]).then(n.bind(n,7188))},meta:{requiresUserData:!0,analysisType:"bazi",title:"生辰八字結果"}},{path:"/astrology-results/:id",name:"astrology-results",component:function(){return Promise.all([n.e(569),n.e(457),n.e(623)]).then(n.bind(n,5416))},meta:{requiresUserData:!0,analysisType:"astrology",title:"占星分析結果"}},{path:"/transit-analysis",name:"transit-analysis",component:function(){return n.e(554).then(n.bind(n,6554))},meta:{requiresUserData:!0,title:"行運盤分析"}},{path:"/error",name:"error",component:function(){return n.e(476).then(n.bind(n,476))},props:function(t){return{error:t.query.error||"Unknown error",message:t.query.message||"An error occurred"}}},{path:"/:pathMatch(.*)*",name:"not-found",component:function(){return n.e(411).then(n.bind(n,1411))}}],Kt=(0,d.aE)({history:(0,d.LA)("/meiban/"),routes:Vt,scrollBehavior:function(t,e,n){return n||{top:0}}});Kt.beforeEach((function(t,e,n){if(console.log("路由守卫检查:",t.name,t.meta),t.meta.title?document.title="".concat(t.meta.title," - 命盤"):document.title="命盤 - 生辰八字・占星分析",t.meta.requiresUserData){var r=C.getters.getUserData,a=C.getters.getCalculationResults;console.log("路由守卫检查用户数据:",r),console.log("路由守卫检查计算结果:",a);var i=r&&r.name&&""!==r.name.trim()&&r.birthdate&&null!==r.birthHour&&void 0!==r.birthHour&&""!==r.birthHour&&null!==r.birthMinute&&void 0!==r.birthMinute&&""!==r.birthMinute&&r.birthplace&&""!==r.birthplace.trim()&&r.gender;if(console.log("用户数据验证结果:",i),!i){console.log("用户数据不完整，重定向到首页");var o="";return o="transit-analysis"===t.name?"行運分析需要完整的出生信息，請先填寫基本資料":"bazi-results"===t.name?"生辰八字分析需要完整的出生信息，請先填寫基本資料":"astrology-results"===t.name?"占星分析需要完整的出生信息，請先填寫基本資料":"訪問此頁面需要完整的出生信息，請先填寫基本資料",alert(o),void n({name:"home"})}if(("bazi-results"===t.name||"astrology-results"===t.name)&&!a)return console.log("没有计算结果，重定向到首页"),alert("沒有找到計算結果，請先進行分析"),void n({name:"home"});console.log("用户数据验证通过，允许访问"),n()}else n()})),Kt.onError((function(t){console.error("Router error:",t),Kt.push({name:"error",query:{error:t.name||"RouterError",message:t.message||"Navigation failed"}})})),Kt.afterEach((function(t,e){console.log("路由跳转: ".concat(e.name," -> ").concat(t.name)),"undefined"!==typeof window&&window.gtag&&window.gtag("config","GA_MEASUREMENT_ID",{page_title:t.meta.title||t.name,page_location:window.location.href})}));const Gt=Kt;(0,r.Ef)(c).use(C).use(Gt).mount("#app")}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.m=t,(()=>{var t=[];n.O=(e,r,a,i)=>{if(!r){var o=1/0;for(c=0;c<t.length;c++){for(var[r,a,i]=t[c],s=!0,l=0;l<r.length;l++)(!1&i||o>=i)&&Object.keys(n.O).every((t=>n.O[t](r[l])))?r.splice(l--,1):(s=!1,i<o&&(o=i));if(s){t.splice(c--,1);var u=a();void 0!==u&&(e=u)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[r,a,i]}})(),(()=>{n.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return n.d(e,{a:e}),e}})(),(()=>{n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}})(),(()=>{n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,r)=>(n.f[r](t,e),e)),[]))})(),(()=>{n.u=t=>"js/"+t+"."+{188:"f4cac6b9",411:"d4d099ca",457:"99c096ef",476:"bcf92fe2",554:"76230742",569:"2ba997f6",599:"1cffc112",623:"87c59cff",694:"cf01f16b",958:"6f6929f1"}[t]+".js"})(),(()=>{n.miniCssF=t=>"css/"+t+"."+{188:"ff8c1b44",411:"c61c93ec",476:"c1344bfd",554:"dc0cd33c",623:"8210dc5e",958:"b62e84c9"}[t]+".css"})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{var t={},e="meiban-app:";n.l=(r,a,i,o)=>{if(t[r])t[r].push(a);else{var s,l;if(void 0!==i)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==e+i){s=d;break}}s||(l=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+i),s.src=r),t[r]=[a];var g=(e,n)=>{s.onerror=s.onload=null,clearTimeout(h);var a=t[r];if(delete t[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((t=>t(n))),e)return e(n)},h=setTimeout(g.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=g.bind(null,s.onerror),s.onload=g.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),(()=>{n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{n.p="/meiban/"})(),(()=>{if("undefined"!==typeof document){var t=(t,e,r,a,i)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",n.nc&&(o.nonce=n.nc);var s=n=>{if(o.onerror=o.onload=null,"load"===n.type)a();else{var r=n&&n.type,s=n&&n.target&&n.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+r+": "+s+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=s,o.parentNode&&o.parentNode.removeChild(o),i(l)}};return o.onerror=o.onload=s,o.href=e,r?r.parentNode.insertBefore(o,r.nextSibling):document.head.appendChild(o),o},e=(t,e)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var a=n[r],i=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===t||i===e))return a}var o=document.getElementsByTagName("style");for(r=0;r<o.length;r++){a=o[r],i=a.getAttribute("data-href");if(i===t||i===e)return a}},r=r=>new Promise(((a,i)=>{var o=n.miniCssF(r),s=n.p+o;if(e(o,s))return a();t(r,s,null,a,i)})),a={524:0};n.f.miniCss=(t,e)=>{var n={188:1,411:1,476:1,554:1,623:1,958:1};a[t]?e.push(a[t]):0!==a[t]&&n[t]&&e.push(a[t]=r(t).then((()=>{a[t]=0}),(e=>{throw delete a[t],e})))}}})(),(()=>{var t={524:0};n.f.j=(e,r)=>{var a=n.o(t,e)?t[e]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise(((n,r)=>a=t[e]=[n,r]));r.push(a[2]=i);var o=n.p+n.u(e),s=new Error,l=r=>{if(n.o(t,e)&&(a=t[e],0!==a&&(t[e]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}};n.l(o,l,"chunk-"+e,e)}},n.O.j=e=>0===t[e];var e=(e,r)=>{var a,i,[o,s,l]=r,u=0;if(o.some((e=>0!==t[e]))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)var c=l(n)}for(e&&e(r);u<o.length;u++)i=o[u],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(c)},r=self["webpackChunkmeiban_app"]=self["webpackChunkmeiban_app"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var r=n.O(void 0,[504],(()=>n(8316)));r=n.O(r)})();
//# sourceMappingURL=app.bd58345b.js.map